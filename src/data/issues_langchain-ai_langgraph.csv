url,repository_url,labels_url,comments_url,events_url,html_url,id,node_id,number,title,user,labels,state,locked,assignee,assignees,milestone,comments,created_at,updated_at,closed_at,author_association,type,active_lock_reason,sub_issues_summary,issue_dependencies_summary,body,closed_by,reactions,timeline_url,performed_via_github_app,state_reason,draft,pull_request
https://api.github.com/repos/langchain-ai/langgraph/issues/6495,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6495/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6495/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6495/events,https://github.com/langchain-ai/langgraph/issues/6495,3658618553,I_kwDOKFU0lc7aEha5,6495,Add on_end_behavior parameter to graph.compile() for batch job support,"{'login': 'AmritSDutta', 'id': 31450144, 'node_id': 'MDQ6VXNlcjMxNDUwMTQ0', 'avatar_url': 'https://avatars.githubusercontent.com/u/31450144?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/AmritSDutta', 'html_url': 'https://github.com/AmritSDutta', 'followers_url': 'https://api.github.com/users/AmritSDutta/followers', 'following_url': 'https://api.github.com/users/AmritSDutta/following{/other_user}', 'gists_url': 'https://api.github.com/users/AmritSDutta/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/AmritSDutta/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/AmritSDutta/subscriptions', 'organizations_url': 'https://api.github.com/users/AmritSDutta/orgs', 'repos_url': 'https://api.github.com/users/AmritSDutta/repos', 'events_url': 'https://api.github.com/users/AmritSDutta/events{/privacy}', 'received_events_url': 'https://api.github.com/users/AmritSDutta/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-24T12:16:22Z,2025-11-24T13:30:44Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
graph = builder.compile(
    checkpointer=MemorySaver(),
    on_end_behavior=""stop""  # <-- This would be nice
)
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

## Description
LangGraph's thread-based persistence is designed for conversation continuity, 
but  if workflows do need an option to prevent automatic resumption 
when a graph reaches END state on the same thread. There is no option.

Currently, the only way to prevent resumption is , as I found it:
- Using unique thread_ids per execution (workaround)
- Using interrupts (hacky for non-HITL workflows)

## Requested Feature
Add an `on_end_behavior` parameter to `graph.compile()`:

```python
graph = builder.compile(
    checkpointer=MemorySaver(),
    on_end_behavior=""stop""  # ""stop"" or ""resume"" (default)
)

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.26100
> Python Version:  3.11.14 | packaged by Anaconda, Inc. | (main, Oct 21 2025, 18:30:03) [MSC v.1929 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.5
> langsmith: 0.4.43
> langgraph_api: 0.5.14
> langgraph_cli: 0.4.7
> langgraph_runtime_inmem: 0.18.0
> langgraph_sdk: 0.2.9",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6495/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6495/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6494,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6494/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6494/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6494/events,https://github.com/langchain-ai/langgraph/issues/6494,3658097210,I_kwDOKFU0lc7aCiI6,6494,LangSmith Studio hangs when communicating with local Agent server on Windows,"{'login': 'mcavdar', 'id': 4072246, 'node_id': 'MDQ6VXNlcjQwNzIyNDY=', 'avatar_url': 'https://avatars.githubusercontent.com/u/4072246?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mcavdar', 'html_url': 'https://github.com/mcavdar', 'followers_url': 'https://api.github.com/users/mcavdar/followers', 'following_url': 'https://api.github.com/users/mcavdar/following{/other_user}', 'gists_url': 'https://api.github.com/users/mcavdar/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mcavdar/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mcavdar/subscriptions', 'organizations_url': 'https://api.github.com/users/mcavdar/orgs', 'repos_url': 'https://api.github.com/users/mcavdar/repos', 'events_url': 'https://api.github.com/users/mcavdar/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mcavdar/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-24T10:07:34Z,2025-11-24T10:10:45Z,,CONTRIBUTOR,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
#I'm following the steps from https://docs.langchain.com/oss/python/langchain/studio

#Agent code:

from langchain.agents import create_agent

def send_email(to: str, subject: str, body: str):
    """"""Send an email""""""
    email = {
        ""to"": to,
        ""subject"": subject,
        ""body"": body
    }
    # ... email sending logic

    return f""Email sent to {to}""

agent = create_agent(
    ""gpt-4o"",
    tools=[send_email],
    system_prompt=""You are an email assistant. Always use the send_email tool."",
)
```

### Error Message and Stack Trace (if applicable)

```shell
langgraph dev
INFO:langgraph_api.cli:

        Welcome to

â•¦  â”Œâ”€â”â”Œâ”â”Œâ”Œâ”€â”â•”â•â•—â”¬â”€â”â”Œâ”€â”â”Œâ”€â”â”¬ â”¬
â•‘  â”œâ”€â”¤â”‚â”‚â”‚â”‚ â”¬â•‘ â•¦â”œâ”¬â”˜â”œâ”€â”¤â”œâ”€â”˜â”œâ”€â”¤
â•©â•â•â”´ â”´â”˜â””â”˜â””â”€â”˜â•šâ•â•â”´â””â”€â”´ â”´â”´  â”´ â”´

- ðŸš€ API: http://127.0.0.1:2024
- ðŸŽ¨ Studio UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
- ðŸ“š API Docs: http://127.0.0.1:2024/docs

This in-memory server is designed for development and testing.
For production use, please use LangSmith Deployment.


2025-11-24T09:49:20.183916Z [info     ] Using langgraph_runtime_inmem  [langgraph_runtime] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=MainThread
2025-11-24T09:49:20.207357Z [info     ] Using auth of type=noop        [langgraph_api.auth.middleware] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=MainThread
2025-11-24T09:49:20.222555Z [info     ] Starting In-Memory runtime with langgraph-api=0.5.26 and in-memory runtime=0.19.0 [langgraph_runtime_inmem.lifespan] api_variant=local_dev langgraph_api_version=0.5.26 langgraph_runtime_inmem_version=0.19.0 thread_name=asyncio_0 version=0.5.26
2025-11-24T09:49:20.619932Z [info     ] Starting metadata loop         [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=MainThread
2025-11-24T09:49:20.619932Z [info     ] Getting auth instance: None    [langgraph_api.auth.custom] api_variant=local_dev langgraph_api_version=0.5.26 langgraph_auth=None thread_name=MainThread
2025-11-24T09:49:20.622027Z [info     ] Starting thread TTL sweeper with interval 5 minutes [langgraph_api.thread_ttl] api_variant=local_dev interval_minutes=5 langgraph_api_version=0.5.26 strategy=delete thread_name=asyncio_1
2025-11-24T09:49:21.114191Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=MainThread
2025-11-24T09:49:21.114191Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=MainThread
2025-11-24T09:49:21.493077Z [info     ] Registering graph with id 'agent' [langgraph_api.graph] api_variant=local_dev graph_id=agent langgraph_api_version=0.5.26 thread_name=asyncio_1
2025-11-24T09:49:21.514982Z [info     ] Starting 1 background workers  [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.26 thread_name=asyncio_0
2025-11-24T09:49:21.514982Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.26 max=1 thread_name=asyncio_0
Server started in 3.79s
2025-11-24T09:49:21.780835Z [info     ] Server started in 3.79s        [browser_opener] api_variant=local_dev langgraph_api_version=0.5.26 message='Server started in 3.79s' thread_name='Thread-2 (_open_browser)'
ðŸŽ¨ Opening Studio in your browser...
2025-11-24T09:49:21.780835Z [info     ] ðŸŽ¨ Opening Studio in your browser... [browser_opener] api_variant=local_dev langgraph_api_version=0.5.26 message='ðŸŽ¨ Opening Studio in your browser...' thread_name='Thread-2 (_open_browser)'
URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
2025-11-24T09:49:21.780835Z [info     ] URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024 [browser_opener] api_variant=local_dev langgraph_api_version=0.5.26 message='URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024' thread_name='Thread-2 (_open_browser)'
2025-11-24T09:49:22.018436Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.26 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-24T09:49:36.915450Z [info     ] Created run                    [langgraph_api.models.run] after_seconds=0 api_variant=local_dev assistant_id=fe096781-5601-53d2-b2f6-0d3403f7e9ca checkpoint_id=None if_not_exists=reject langgraph_api_version=0.5.26 method=POST multitask_strategy=rollback path=/threads/{thread_id}/runs/stream request_id=661aa1e3-a582-4c11-ae2c-b60aace6236c run_create_ms=4 run_id=019ab544-cf11-7254-9451-fd5052c40a59 run_put_ms=1 stream_mode=['debug'] stream_resumable=False temporary=False thread_id=25c0ebde-d4f2-4f9e-ba09-030d1a6f789f thread_name=MainThread
2025-11-24T09:49:37.515730Z [info     ] Starting background run        [langgraph_api.worker] api_variant=local_dev assistant_id=fe096781-5601-53d2-b2f6-0d3403f7e9ca graph_id=agent langgraph_api_version=0.5.26 request_id=661aa1e3-a582-4c11-ae2c-b60aace6236c resumable=False run_attempt=1 run_creation_ms=2 run_id=019ab544-cf11-7254-9451-fd5052c40a59 run_queue_ms=600 run_started_at=2025-11-24T09:49:37.514724+00:00 run_stream_start_ms=0 temporary=False thread_id=25c0ebde-d4f2-4f9e-ba09-030d1a6f789f thread_name=asyncio_2
```

### Description

* Iâ€™m following the steps from https://docs.langchain.com/oss/python/langchain/studio
* After the first message, the graph gets stuck.

### System Info


System Information
------------------
> OS:  Windows
> OS Version:  10.0.26200
> Python Version:  3.11.8 (tags/v3.11.8:db85d51, Feb  6 2024, 22:03:32) [MSC v.1937 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.1.0
> langchain: 1.0.8
> langsmith: 0.4.46
> langchain_google_genai: 3.1.0
> langgraph_api: 0.5.26
> langgraph_cli: 0.4.7
> langgraph_runtime_inmem: 0.19.0
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> blockbuster: 1.5.25
> click: 8.3.1
> cloudpickle: 3.1.2
> cryptography: 44.0.3
> filetype: 1.2.0
> google-ai-generativelanguage: 0.9.0
> grpcio: 1.76.0
> grpcio-tools: 1.75.1
> httpx: 0.28.1
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langgraph: 1.0.3
> langgraph-checkpoint: 3.0.1
> opentelemetry-api: 1.38.0
> opentelemetry-exporter-otlp-proto-http: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> protobuf: 6.33.1
> pydantic: 2.12.4
> pyjwt: 2.10.1
> python-dotenv: 1.2.1
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> sse-starlette: 2.1.3
> starlette: 0.50.0
> structlog: 25.5.0
> tenacity: 9.1.2
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.38.0
> watchfiles: 1.1.1
> zstandard: 0.25.0
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6494/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6494/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6493,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6493/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6493/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6493/events,https://github.com/langchain-ai/langgraph/pull/6493,3657848605,PR_kwDOKFU0lc61JJwI,6493,chore(docs): Update OpenAPI spec from LangGraph API v0.5.26,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-24T09:07:21Z,2025-11-24T09:07:42Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.26**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6493/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6493/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6493', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6493', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6493.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6493.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6492,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6492/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6492/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6492/events,https://github.com/langchain-ai/langgraph/pull/6492,3657535617,PR_kwDOKFU0lc61IIGe,6492,docs: update main README React agent example for LangGraph,"{'login': 'code-with-rashid', 'id': 79503882, 'node_id': 'MDQ6VXNlcjc5NTAzODgy', 'avatar_url': 'https://avatars.githubusercontent.com/u/79503882?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/code-with-rashid', 'html_url': 'https://github.com/code-with-rashid', 'followers_url': 'https://api.github.com/users/code-with-rashid/followers', 'following_url': 'https://api.github.com/users/code-with-rashid/following{/other_user}', 'gists_url': 'https://api.github.com/users/code-with-rashid/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/code-with-rashid/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/code-with-rashid/subscriptions', 'organizations_url': 'https://api.github.com/users/code-with-rashid/orgs', 'repos_url': 'https://api.github.com/users/code-with-rashid/repos', 'events_url': 'https://api.github.com/users/code-with-rashid/events{/privacy}', 'received_events_url': 'https://api.github.com/users/code-with-rashid/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-24T07:50:46Z,2025-11-24T07:50:50Z,,NONE,,,,,"The `langgraph.prebuilt.create_react_agent` import and its `prompt=` argument were officially deprecated in LangGraph(November 2025). The recommended and maintained path forward is now `langchain.agents.create_agent`.

This PR updates the primary quickstart example in the README to:

- Use `from langchain.agents import create_agent`
- Replace deprecated `prompt=` with correct `system_prompt=`

The example remains functionally identical (still prints ""It's always sunny in sf!"") but now reflects current best practices and works out-of-the-box with the latest versions of `langchain` and `langgraph`.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6492/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6492/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6492', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6492', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6492.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6492.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6491,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6491/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6491/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6491/events,https://github.com/langchain-ai/langgraph/issues/6491,3657386568,I_kwDOKFU0lc7Z_0pI,6491,"Invalid state saved to checkpoint without validation, causing permanent corruption.","{'login': 'goma-25', 'id': 227095876, 'node_id': 'U_kgDODYk1RA', 'avatar_url': 'https://avatars.githubusercontent.com/u/227095876?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/goma-25', 'html_url': 'https://github.com/goma-25', 'followers_url': 'https://api.github.com/users/goma-25/followers', 'following_url': 'https://api.github.com/users/goma-25/following{/other_user}', 'gists_url': 'https://api.github.com/users/goma-25/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/goma-25/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/goma-25/subscriptions', 'organizations_url': 'https://api.github.com/users/goma-25/orgs', 'repos_url': 'https://api.github.com/users/goma-25/repos', 'events_url': 'https://api.github.com/users/goma-25/events{/privacy}', 'received_events_url': 'https://api.github.com/users/goma-25/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-24T07:10:14Z,2025-11-24T07:10:14Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langchain_core.runnables import RunnableConfig
from typing import List
from pydantic import BaseModel
from langgraph.graph import StateGraph, START, END
from langgraph.checkpoint.memory import MemorySaver


class State(BaseModel):
    items: List[str] = []


def create_invalid_state(state: State) -> State:
    """"""Node that returns invalid state (None in List[str]).""""""
    state.items.append(None)  # Invalid! But no validation occurs on OUTPUT
    return state


# Build graph
graph = StateGraph(State)
graph.add_node(""bad"", create_invalid_state)
graph.add_node(""next"", lambda s: s)  # This node will never execute
graph.add_edge(START, ""bad"")
graph.add_edge(""bad"", ""next"")
graph.add_edge(""next"", END)

app = graph.compile(checkpointer=MemorySaver())
config: RunnableConfig = {""configurable"": {""thread_id"": ""test""}}

print(""Executing graph..."")
try:
    app.invoke(State(), config)
except Exception as e:
    print(f""âœ“ Graph execution failed (expected): {type(e).__name__}"")

print(""\nAttempting to retrieve checkpoint..."")
history = list(app.get_state_history(config)) # ValidationError is raised!!
```

### Error Message and Stack Trace (if applicable)

```shell
---------------------------------------------------------------------------
ValidationError                           Traceback (most recent call last)
Cell In[2], line 36
     33     print(f""âœ“ Graph execution failed (expected): {type(e).__name__}"")
     35 print(""\nAttempting to retrieve checkpoint..."")
---> 36 history = list(app.get_state_history(config))

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/pregel/main.py:1360, in Pregel.get_state_history(self, config, filter, before, limit)
   1356 # eagerly consume list() to avoid holding up the db cursor
   1357 for checkpoint_tuple in list(
   1358     checkpointer.list(config, before=before, limit=limit, filter=filter)
   1359 ):
-> 1360     yield self._prepare_state_snapshot(
   1361         checkpoint_tuple.config, checkpoint_tuple
   1362     )

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/pregel/main.py:1019, in Pregel._prepare_state_snapshot(self, config, saved, recurse, apply_pending_writes)
   1014 channels, managed = channels_from_checkpoint(
   1015     self.channels,
   1016     saved.checkpoint,
   1017 )
   1018 # tasks for this checkpoint
-> 1019 next_tasks = prepare_next_tasks(
   1020     saved.checkpoint,
   1021     saved.pending_writes or [],
   1022     self.nodes,
   1023     channels,
   1024     managed,
   1025     saved.config,
   1026     step,
   1027     stop,
   1028     for_execution=True,
   1029     store=self.store,
   1030     checkpointer=(
   1031         self.checkpointer
   1032         if isinstance(self.checkpointer, BaseCheckpointSaver)
   1033         else None
   1034     ),
   1035     manager=None,
   1036 )
   1037 # get the subgraphs
   1038 subgraphs = dict(self.get_subgraphs())

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/pregel/_algo.py:466, in prepare_next_tasks(checkpoint, pending_writes, processes, channels, managed, config, step, stop, for_execution, store, checkpointer, manager, trigger_to_nodes, updated_channels, retry_policy, cache_policy)
    463 # Check if any processes should be run in next step
    464 # If so, prepare the values to be passed to them
    465 for name in candidate_nodes:
--> 466     if task := prepare_single_task(
    467         (PULL, name),
    468         None,
    469         checkpoint=checkpoint,
    470         checkpoint_id_bytes=checkpoint_id_bytes,
    471         checkpoint_null_version=null_version,
    472         pending_writes=pending_writes,
    473         processes=processes,
    474         channels=channels,
    475         managed=managed,
    476         config=config,
    477         step=step,
    478         stop=stop,
    479         for_execution=for_execution,
    480         store=store,
    481         checkpointer=checkpointer,
    482         manager=manager,
    483         input_cache=input_cache,
    484         cache_policy=cache_policy,
    485         retry_policy=retry_policy,
    486     ):
    487         tasks.append(task)
    488 return {t.id: t for t in tasks}

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/pregel/_algo.py:807, in prepare_single_task(task_path, task_id_checksum, checkpoint, checkpoint_id_bytes, checkpoint_null_version, pending_writes, processes, channels, managed, config, step, stop, for_execution, store, checkpointer, manager, input_cache, cache_policy, retry_policy)
    805 # create task input
    806 try:
--> 807     val = _proc_input(
    808         proc,
    809         managed,
    810         channels,
    811         for_execution=for_execution,
    812         input_cache=input_cache,
    813         scratchpad=scratchpad,
    814     )
    815     if val is MISSING:
    816         return

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/pregel/_algo.py:1057, in _proc_input(proc, managed, channels, for_execution, scratchpad, input_cache)
   1055 # If the process has a mapper, apply it to the value
   1056 if for_execution and proc.mapper is not None:
-> 1057     val = proc.mapper(val)
   1059 # Cache the input value
   1060 if input_cache is not None:

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/langgraph/graph/state.py:1237, in _coerce_state(schema, input)
   1236 def _coerce_state(schema: type[Any], input: dict[str, Any]) -> dict[str, Any]:
-> 1237     return schema(**input)

File /Volumes/p41/Users/mir/goma/repeat/.venv/lib/python3.13/site-packages/pydantic/main.py:253, in BaseModel.__init__(self, **data)
    251 # `__tracebackhide__` tells pytest and some other tools to omit this function from tracebacks
    252 __tracebackhide__ = True
--> 253 validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
    254 if self is not validated_self:
    255     warnings.warn(
    256         'A custom validator is returning a value other than `self`.\n'
    257         ""Returning anything other than `self` from a top level model validator isn't supported when validating via `__init__`.\n""
    258         'See the `model_validator` docs (https://docs.pydantic.dev/latest/concepts/validators/#model-validators) for more details.',
    259         stacklevel=2,
    260     )

ValidationError: 1 validation error for State
items.0
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Before task with name 'next' and path '('__pregel_pull', 'next')'
```

### Description

## Problem

When a node returns invalid state (violating Pydantic schema), the checkpoint is saved successfully but cannot be retrieved later due to validation failure. This creates permanently corrupted checkpoints that cannot be recovered.


## Root Cause

LangGraph validates node **INPUT** (when preparing the next task) but does NOT validate node **OUTPUT** (after execution completes). This creates a timing gap where invalid state can be checkpointed before validation occurs.

### System Info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:40 PDT 2025; root:xnu-11417.140.69~1/RELEASE_ARM64_T8132
> Python Version:  3.13.5 (main, Jun 12 2025, 12:22:43) [Clang 20.1.4 ]

Package Information
-------------------
> langchain_core: 1.0.4
> langchain: 1.0.5
> langsmith: 0.4.21
> langchain_anthropic: 0.3.19
> langchain_google_genai: 2.1.10
> langchain_openai: 0.3.32
> langchain_tool: 0.1.1
> langgraph_sdk: 0.2.4",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6491/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6491/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6490,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6490/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6490/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6490/events,https://github.com/langchain-ai/langgraph/pull/6490,3657270130,PR_kwDOKFU0lc61HUwr,6490,chore(deps): bump actions/checkout from 5 to 6,"{'login': 'dependabot[bot]', 'id': 49699333, 'node_id': 'MDM6Qm90NDk2OTkzMzM=', 'avatar_url': 'https://avatars.githubusercontent.com/in/29110?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/dependabot%5Bbot%5D', 'html_url': 'https://github.com/apps/dependabot', 'followers_url': 'https://api.github.com/users/dependabot%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/dependabot%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/dependabot%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/dependabot%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}, {'id': 8717114058, 'node_id': 'LA_kwDOKFU0lc8AAAACB5Sayg', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/github_actions', 'name': 'github_actions', 'color': '000000', 'default': False, 'description': 'Pull requests that update GitHub Actions code'}]",open,False,,[],,1,2025-11-24T06:32:44Z,2025-11-24T06:32:55Z,,CONTRIBUTOR,,,,,"Bumps [actions/checkout](https://github.com/actions/checkout) from 5 to 6.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/actions/checkout/releases"">actions/checkout's releases</a>.</em></p>
<blockquote>
<h2>v6.0.0</h2>
<h2>What's Changed</h2>
<ul>
<li>Update README to include Node.js 24 support details and requirements by <a href=""https://github.com/salmanmkc""><code>@â€‹salmanmkc</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
<li>Persist creds to a separate file by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>v6-beta by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2298"">actions/checkout#2298</a></li>
<li>update readme/changelog for v6 by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2311"">actions/checkout#2311</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/actions/checkout/compare/v5.0.0...v6.0.0"">https://github.com/actions/checkout/compare/v5.0.0...v6.0.0</a></p>
<h2>v6-beta</h2>
<h2>What's Changed</h2>
<p>Updated persist-credentials to store the credentials under <code>$RUNNER_TEMP</code> instead of directly in the local git config.</p>
<p>This requires a minimum Actions Runner version of <a href=""https://github.com/actions/runner/releases/tag/v2.329.0"">v2.329.0</a> to access the persisted credentials for <a href=""https://docs.github.com/en/actions/tutorials/use-containerized-services/create-a-docker-container-action"">Docker container action</a> scenarios.</p>
<h2>v5.0.1</h2>
<h2>What's Changed</h2>
<ul>
<li>Port v6 cleanup to v5 by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/actions/checkout/compare/v5...v5.0.1"">https://github.com/actions/checkout/compare/v5...v5.0.1</a></p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/actions/checkout/blob/main/CHANGELOG.md"">actions/checkout's changelog</a>.</em></p>
<blockquote>
<h1>Changelog</h1>
<h2>V6.0.0</h2>
<ul>
<li>Persist creds to a separate file by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>Update README to include Node.js 24 support details and requirements by <a href=""https://github.com/salmanmkc""><code>@â€‹salmanmkc</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
</ul>
<h2>V5.0.1</h2>
<ul>
<li>Port v6 cleanup to v5 by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<h2>V5.0.0</h2>
<ul>
<li>Update actions checkout to use node 24 by <a href=""https://github.com/salmanmkc""><code>@â€‹salmanmkc</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2226"">actions/checkout#2226</a></li>
</ul>
<h2>V4.3.1</h2>
<ul>
<li>Port v6 cleanup to v4 by <a href=""https://github.com/ericsciple""><code>@â€‹ericsciple</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2305"">actions/checkout#2305</a></li>
</ul>
<h2>V4.3.0</h2>
<ul>
<li>docs: update README.md by <a href=""https://github.com/motss""><code>@â€‹motss</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1971"">actions/checkout#1971</a></li>
<li>Add internal repos for checking out multiple repositories by <a href=""https://github.com/mouismail""><code>@â€‹mouismail</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1977"">actions/checkout#1977</a></li>
<li>Documentation update - add recommended permissions to Readme by <a href=""https://github.com/benwells""><code>@â€‹benwells</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2043"">actions/checkout#2043</a></li>
<li>Adjust positioning of user email note and permissions heading by <a href=""https://github.com/joshmgross""><code>@â€‹joshmgross</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2044"">actions/checkout#2044</a></li>
<li>Update README.md by <a href=""https://github.com/nebuk89""><code>@â€‹nebuk89</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2194"">actions/checkout#2194</a></li>
<li>Update CODEOWNERS for actions by <a href=""https://github.com/TingluoHuang""><code>@â€‹TingluoHuang</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2224"">actions/checkout#2224</a></li>
<li>Update package dependencies by <a href=""https://github.com/salmanmkc""><code>@â€‹salmanmkc</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/2236"">actions/checkout#2236</a></li>
</ul>
<h2>v4.2.2</h2>
<ul>
<li><code>url-helper.ts</code> now leverages well-known environment variables by <a href=""https://github.com/jww3""><code>@â€‹jww3</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1941"">actions/checkout#1941</a></li>
<li>Expand unit test coverage for <code>isGhes</code> by <a href=""https://github.com/jww3""><code>@â€‹jww3</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1946"">actions/checkout#1946</a></li>
</ul>
<h2>v4.2.1</h2>
<ul>
<li>Check out other refs/* by commit if provided, fall back to ref by <a href=""https://github.com/orhantoy""><code>@â€‹orhantoy</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1924"">actions/checkout#1924</a></li>
</ul>
<h2>v4.2.0</h2>
<ul>
<li>Add Ref and Commit outputs by <a href=""https://github.com/lucacome""><code>@â€‹lucacome</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1180"">actions/checkout#1180</a></li>
<li>Dependency updates by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a>- <a href=""https://redirect.github.com/actions/checkout/pull/1777"">actions/checkout#1777</a>, <a href=""https://redirect.github.com/actions/checkout/pull/1872"">actions/checkout#1872</a></li>
</ul>
<h2>v4.1.7</h2>
<ul>
<li>Bump the minor-npm-dependencies group across 1 directory with 4 updates by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1739"">actions/checkout#1739</a></li>
<li>Bump actions/checkout from 3 to 4 by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1697"">actions/checkout#1697</a></li>
<li>Check out other refs/* by commit by <a href=""https://github.com/orhantoy""><code>@â€‹orhantoy</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1774"">actions/checkout#1774</a></li>
<li>Pin actions/checkout's own workflows to a known, good, stable version. by <a href=""https://github.com/jww3""><code>@â€‹jww3</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1776"">actions/checkout#1776</a></li>
</ul>
<h2>v4.1.6</h2>
<ul>
<li>Check platform to set archive extension appropriately by <a href=""https://github.com/cory-miller""><code>@â€‹cory-miller</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1732"">actions/checkout#1732</a></li>
</ul>
<h2>v4.1.5</h2>
<ul>
<li>Update NPM dependencies by <a href=""https://github.com/cory-miller""><code>@â€‹cory-miller</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1703"">actions/checkout#1703</a></li>
<li>Bump github/codeql-action from 2 to 3 by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1694"">actions/checkout#1694</a></li>
<li>Bump actions/setup-node from 1 to 4 by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1696"">actions/checkout#1696</a></li>
<li>Bump actions/upload-artifact from 2 to 4 by <a href=""https://github.com/dependabot""><code>@â€‹dependabot</code></a> in <a href=""https://redirect.github.com/actions/checkout/pull/1695"">actions/checkout#1695</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/actions/checkout/commit/1af3b93b6815bc44a9784bd300feb67ff0d1eeb3""><code>1af3b93</code></a> update readme/changelog for v6 (<a href=""https://redirect.github.com/actions/checkout/issues/2311"">#2311</a>)</li>
<li><a href=""https://github.com/actions/checkout/commit/71cf2267d89c5cb81562390fa70a37fa40b1305e""><code>71cf226</code></a> v6-beta (<a href=""https://redirect.github.com/actions/checkout/issues/2298"">#2298</a>)</li>
<li><a href=""https://github.com/actions/checkout/commit/069c6959146423d11cd0184e6accf28f9d45f06e""><code>069c695</code></a> Persist creds to a separate file (<a href=""https://redirect.github.com/actions/checkout/issues/2286"">#2286</a>)</li>
<li><a href=""https://github.com/actions/checkout/commit/ff7abcd0c3c05ccf6adc123a8cd1fd4fb30fb493""><code>ff7abcd</code></a> Update README to include Node.js 24 support details and requirements (<a href=""https://redirect.github.com/actions/checkout/issues/2248"">#2248</a>)</li>
<li>See full diff in <a href=""https://github.com/actions/checkout/compare/v5...v6"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/checkout&package-manager=github_actions&previous-version=5&new-version=6)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)


</details>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6490/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6490/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6490', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6490', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6490.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6490.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6489,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6489/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6489/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6489/events,https://github.com/langchain-ai/langgraph/pull/6489,3655691447,PR_kwDOKFU0lc61CM0t,6489,chore(docs): Update OpenAPI spec from LangGraph API v0.5.25,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-23T09:05:11Z,2025-11-23T09:05:32Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.25**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6489/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6489/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6489', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6489', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6489.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6489.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6488,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6488/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6488/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6488/events,https://github.com/langchain-ai/langgraph/pull/6488,3655590793,PR_kwDOKFU0lc61B4G5,6488,chore: delete docs,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-23T07:03:15Z,2025-11-23T07:03:22Z,,MEMBER,,,,,,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6488/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6488/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6488', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6488', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6488.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6488.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6487,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6487/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6487/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6487/events,https://github.com/langchain-ai/langgraph/pull/6487,3655588297,PR_kwDOKFU0lc61B3ma,6487,chore: clean up some refs,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-23T06:59:48Z,2025-11-23T07:13:32Z,2025-11-23T07:13:30Z,MEMBER,,,,,,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6487/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6487/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6487', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6487', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6487.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6487.patch', 'merged_at': '2025-11-23T07:13:30Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6486,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6486/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6486/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6486/events,https://github.com/langchain-ai/langgraph/issues/6486,3654963446,I_kwDOKFU0lc7Z2lD2,6486,Tool node error handling disabled by default after 1.0.1,"{'login': 'akiliscodes', 'id': 9283862, 'node_id': 'MDQ6VXNlcjkyODM4NjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/9283862?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/akiliscodes', 'html_url': 'https://github.com/akiliscodes', 'followers_url': 'https://api.github.com/users/akiliscodes/followers', 'following_url': 'https://api.github.com/users/akiliscodes/following{/other_user}', 'gists_url': 'https://api.github.com/users/akiliscodes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/akiliscodes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/akiliscodes/subscriptions', 'organizations_url': 'https://api.github.com/users/akiliscodes/orgs', 'repos_url': 'https://api.github.com/users/akiliscodes/repos', 'events_url': 'https://api.github.com/users/akiliscodes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/akiliscodes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-22T18:39:47Z,2025-11-23T05:21:27Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langgraph.graph import StateGraph, START, END
from langgraph.prebuilt import ToolNode
from langchain_core.messages import HumanMessage, ToolMessage, AIMessage
from langchain_core.tools import tool
from typing import TypedDict, List


class State(TypedDict):
    messages: List


@tool
def exploding_tool():
    """"""A tool that always raises an exception.""""""
    raise ValueError(""boom"")


def agent_node(state: State):
    # return an AIMessage containing a tool call
    return {
        ""messages"": [
            AIMessage(
                content=""calling tool"",
                tool_calls=[{
                    ""name"": ""exploding_tool"",
                    ""args"": {},
                    ""id"": ""test-call""
                }]
            )
        ]
    }


graph = StateGraph(State)
graph.add_node(""agent"", agent_node)
graph.add_node(""tools"", ToolNode([exploding_tool]))

graph.add_edge(START, ""agent"")
graph.add_edge(""agent"", ""tools"")
graph.add_edge(""tools"", END)

app = graph.compile()

result = app.invoke({
    ""messages"": [
        HumanMessage(content=""hello"")
    ]
})

print(""\n=== RESULT ==="")
print(result)
```

### Error Message and Stack Trace (if applicable)

```shell
ValueError                                Traceback (most recent call last)
Cell In[3], line 44
     40 graph.add_edge(""tools"", END)
     42 app = graph.compile()
---> 44 result = app.invoke({
     45     ""messages"": [
     46         HumanMessage(content=""hello"")
     47     ]
     48 })
     50 print(""\n=== RESULT ==="")
     51 print(result)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/pregel/main.py:3050, in Pregel.invoke(self, input, config, context, stream_mode, print_mode, output_keys, interrupt_before, interrupt_after, durability, **kwargs)
   3047 chunks: list[dict[str, Any] | Any] = []
   3048 interrupts: list[Interrupt] = []
-> 3050 for chunk in self.stream(
   3051     input,
   3052     config,
   3053     context=context,
   3054     stream_mode=[""updates"", ""values""]
   3055     if stream_mode == ""values""
   3056     else stream_mode,
   3057     print_mode=print_mode,
   3058     output_keys=output_keys,
   3059     interrupt_before=interrupt_before,
   3060     interrupt_after=interrupt_after,
   3061     durability=durability,
   3062     **kwargs,
   3063 ):
   3064     if stream_mode == ""values"":
   3065         if len(chunk) == 2:

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/pregel/main.py:2633, in Pregel.stream(self, input, config, context, stream_mode, print_mode, output_keys, interrupt_before, interrupt_after, durability, subgraphs, debug, **kwargs)
   2631 for task in loop.match_cached_writes():
   2632     loop.output_writes(task.id, task.writes, cached=True)
-> 2633 for _ in runner.tick(
   2634     [t for t in loop.tasks.values() if not t.writes],
   2635     timeout=self.step_timeout,
   2636     get_waiter=get_waiter,
   2637     schedule_task=loop.accept_push,
   2638 ):
   2639     # emit output
   2640     yield from _output(
   2641         stream_mode, print_mode, subgraphs, stream.get, queue.Empty
   2642     )
   2643 loop.after_tick()

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/pregel/_runner.py:167, in PregelRunner.tick(self, tasks, reraise, timeout, retry_policy, get_waiter, schedule_task)
    165 t = tasks[0]
    166 try:
--> 167     run_with_retry(
    168         t,
    169         retry_policy,
    170         configurable={
    171             CONFIG_KEY_CALL: partial(
    172                 _call,
    173                 weakref.ref(t),
    174                 retry_policy=retry_policy,
    175                 futures=weakref.ref(futures),
    176                 schedule_task=schedule_task,
    177                 submit=self.submit,
    178             ),
    179         },
    180     )
    181     self.commit(t, None)
    182 except Exception as exc:

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/pregel/_retry.py:42, in run_with_retry(task, retry_policy, configurable)
     40     task.writes.clear()
     41     # run the task
---> 42     return task.proc.invoke(task.input, config)
     43 except ParentCommand as exc:
     44     ns: str = config[CONF][CONFIG_KEY_CHECKPOINT_NS]

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/_internal/_runnable.py:656, in RunnableSeq.invoke(self, input, config, **kwargs)
    654     # run in context
    655     with set_config_context(config, run) as context:
--> 656         input = context.run(step.invoke, input, config, **kwargs)
    657 else:
    658     input = step.invoke(input, config)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/_internal/_runnable.py:400, in RunnableCallable.invoke(self, input, config, **kwargs)
    398         run_manager.on_chain_end(ret)
    399 else:
--> 400     ret = self.func(*args, **kwargs)
    401 if self.recurse and isinstance(ret, Runnable):
    402     return ret.invoke(input, config)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/prebuilt/tool_node.py:799, in ToolNode._func(self, input, config, runtime)
    797 input_types = [input_type] * len(tool_calls)
    798 with get_executor_for_config(config) as executor:
--> 799     outputs = list(
    800         executor.map(self._run_one, tool_calls, input_types, tool_runtimes)
    801     )
    803 return self._combine_tool_outputs(outputs, input_type)

File ~/miniconda/envs/my_env/lib/python3.13/concurrent/futures/_base.py:619, in Executor.map.<locals>.result_iterator()
    616 while fs:
    617     # Careful not to keep a reference to the popped future
    618     if timeout is None:
--> 619         yield _result_or_cancel(fs.pop())
    620     else:
    621         yield _result_or_cancel(fs.pop(), end_time - time.monotonic())

File ~/miniconda/envs/my_env/lib/python3.13/concurrent/futures/_base.py:317, in _result_or_cancel(***failed resolving arguments***)
    315 try:
    316     try:
--> 317         return fut.result(timeout)
    318     finally:
    319         fut.cancel()

File ~/miniconda/envs/my_env/lib/python3.13/concurrent/futures/_base.py:449, in Future.result(self, timeout)
    447     raise CancelledError()
    448 elif self._state == FINISHED:
--> 449     return self.__get_result()
    451 self._condition.wait(timeout)
    453 if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:

File ~/miniconda/envs/my_env/lib/python3.13/concurrent/futures/_base.py:401, in Future.__get_result(self)
    399 if self._exception:
    400     try:
--> 401         raise self._exception
    402     finally:
    403         # Break a reference cycle with the exception in self._exception
    404         self = None

File ~/miniconda/envs/my_env/lib/python3.13/concurrent/futures/thread.py:59, in _WorkItem.run(self)
     56     return
     58 try:
---> 59     result = self.fn(*self.args, **self.kwargs)
     60 except BaseException as exc:
     61     self.future.set_exception(exc)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langchain_core/runnables/config.py:546, in ContextThreadPoolExecutor.map.<locals>._wrapped_fn(*args)
    545 def _wrapped_fn(*args: Any) -> T:
--> 546     return contexts.pop().run(fn, *args)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/prebuilt/tool_node.py:1010, in ToolNode._run_one(self, call, input_type, tool_runtime)
   1006 config = tool_runtime.config
   1008 if self._wrap_tool_call is None:
   1009     # No wrapper - execute directly
-> 1010     return self._execute_tool_sync(tool_request, input_type, config)
   1012 # Define execute callable that can be called multiple times
   1013 def execute(req: ToolCallRequest) -> ToolMessage | Command:

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langgraph/prebuilt/tool_node.py:916, in ToolNode._execute_tool_sync(self, request, input_type, config)
    914 try:
    915     try:
--> 916         response = tool.invoke(call_args, config)
    917     except ValidationError as exc:
    918         # Filter out errors for injected arguments
    919         injected = self._injected_args.get(call[""name""])

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langchain_core/tools/base.py:605, in BaseTool.invoke(self, input, config, **kwargs)
    597 @override
    598 def invoke(
    599     self,
   (...)
    602     **kwargs: Any,
    603 ) -> Any:
    604     tool_input, kwargs = _prep_run_args(input, config, **kwargs)
--> 605     return self.run(tool_input, **kwargs)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langchain_core/tools/base.py:932, in BaseTool.run(self, tool_input, verbose, start_color, color, callbacks, tags, metadata, run_name, run_id, config, tool_call_id, **kwargs)
    930 if error_to_raise:
    931     run_manager.on_tool_error(error_to_raise)
--> 932     raise error_to_raise
    933 output = _format_output(content, artifact, tool_call_id, self.name, status)
    934 run_manager.on_tool_end(output, color=color, name=self.name, **kwargs)

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langchain_core/tools/base.py:898, in BaseTool.run(self, tool_input, verbose, start_color, color, callbacks, tags, metadata, run_name, run_id, config, tool_call_id, **kwargs)
    896     if config_param := _get_runnable_config_param(self._run):
    897         tool_kwargs |= {config_param: config}
--> 898     response = context.run(self._run, *tool_args, **tool_kwargs)
    899 if self.response_format == ""content_and_artifact"":
    900     msg = (
    901         ""Since response_format='content_and_artifact' ""
    902         ""a two-tuple of the message content and raw tool output is ""
    903         f""expected. Instead, generated response is of type: ""
    904         f""{type(response)}.""
    905     )

File ~/miniconda/envs/my_env/lib/python3.13/site-packages/langchain_core/tools/structured.py:93, in StructuredTool._run(self, config, run_manager, *args, **kwargs)
     91     if config_param := _get_runnable_config_param(self.func):
     92         kwargs[config_param] = config
---> 93     return self.func(*args, **kwargs)
     94 msg = ""StructuredTool does not support sync invocation.""
     95 raise NotImplementedError(msg)

Cell In[3], line 15
     12 @tool
     13 def exploding_tool():
     14     """"""A tool that always raises an exception.""""""
---> 15     raise ValueError(""boom"")

ValueError: boom
During task with name 'tools' and id 'f1c7f354-d5cf-e2d9-fe91-2088176594ed'
```

### Description

Hello,

After updating to langgraph-prebuilt 1.0.1 (via langgraph 1.0.2), I noticed a change in the default behavior of tool error handling.

Previously, tool nodes would automatically handle errors.
After this commit:

https://github.com/langchain-ai/langgraph/commit/4ac1c628ee93c48abc43ef56a72df693f0981323#diff-34ed372d5e45913593e00f5704aa61f05ebc1d0aafbfd032f12b29c0db448cbeL126

â€¦the default changed, and tool error handling is now off unless explicitly enabled.
This modifies the behavior of existing graphs that relied on the old default.

## Expected

Tool node error handling enabled by default, matching earlier versions.

## Actual

Tool errors now propagate unless manually enabling tool_node_handling like below


```python
graph.add_node(""tools"", ToolNode([exploding_tool], handle_tool_errors=True))
```

Thanks for the work on the project!
Just reporting this in case the behavior change was unintentional.

### System Info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.5.0: Tue Apr 22 19:48:46 PDT 2025; root:xnu-11417.121.6~2/RELEASE_ARM64_T8103
> Python Version:  3.13.1 | packaged by conda-forge | (main, Jan  8 2025, 09:15:43) [Clang 18.1.8 ]

Package Information
-------------------
> langchain_core: 1.1.0
> langsmith: 0.4.46
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> httpx: 0.28.1
> jsonpatch: 1.33
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.4
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> tenacity: 9.1.2
> typing-extensions: 4.15.0
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6486/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6486/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6485,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6485/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6485/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6485/events,https://github.com/langchain-ai/langgraph/pull/6485,3654660181,PR_kwDOKFU0lc60-7dA,6485,feat(langgraph): add probabilistic routing via negative nodes,"{'login': 'rachitjindal56', 'id': 55994140, 'node_id': 'MDQ6VXNlcjU1OTk0MTQw', 'avatar_url': 'https://avatars.githubusercontent.com/u/55994140?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/rachitjindal56', 'html_url': 'https://github.com/rachitjindal56', 'followers_url': 'https://api.github.com/users/rachitjindal56/followers', 'following_url': 'https://api.github.com/users/rachitjindal56/following{/other_user}', 'gists_url': 'https://api.github.com/users/rachitjindal56/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/rachitjindal56/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/rachitjindal56/subscriptions', 'organizations_url': 'https://api.github.com/users/rachitjindal56/orgs', 'repos_url': 'https://api.github.com/users/rachitjindal56/repos', 'events_url': 'https://api.github.com/users/rachitjindal56/events{/privacy}', 'received_events_url': 'https://api.github.com/users/rachitjindal56/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-22T13:03:46Z,2025-11-22T13:04:13Z,,NONE,,,,,"## Description

This PR introduces **negative nodes** - a new node type in LangGraph that enables probabilistic routing to multiple destination nodes. Negative nodes are special nodes marked with metadata that allow graphs to route execution probabilistically based on a probability distribution.

### Key Features
- New `add_negative_node()` method in `StateGraph` for creating probabilistic router nodes
- Extended `add_edge()` method to support `nodes_prob_distribution` parameter
- Probabilistic routing using numpy's `np.random.choice()` for fair random selection
- Comprehensive validation of probability distributions (must sum to 1.0, all non-negative)
- Full backwards compatibility - no breaking changes to existing API

### Technical Implementation
1. Negative nodes are marked with metadata flag `__node_type_negative_langgraph__: True`
2. When adding edges from negative nodes, users provide a list of destinations and probability distribution
3. Implementation converts probabilistic edges into conditional edges internally
4. Routing decisions made at runtime using numpy's random choice function

## Dependencies
No new dependencies required. Uses existing `numpy` dependency already in LangGraph.

## Tests Added
- Location: `libs/langgraph/tests/test_negative_nodes.py`
- Coverage: 18 comprehensive edge case tests
- All tests pass without network dependencies

### Test Coverage Includes:
- âœ… Negative node creation and metadata validation
- âœ… Probability distribution validation (sum to 1.0, non-negative)
- âœ… Single destination routing with probabilities
- âœ… Multiple destination routing
- âœ… Error handling for invalid distributions
- âœ… Backwards compatibility verification
- âœ… START and END node handling
- âœ… Conditional edge integration

## Documentation
- Location: `docs/docs/integrations/negative_nodes.ipynb`
- Includes: Complete examples, use cases, and integration patterns

### Examples Provided:
1. Basic negative node setup and usage
2. A/B testing pattern (80% version A, 20% version B)
3. Load balancing across processors
4. Real-world use case demonstrations

## Validation
- [x] PR title follows format: `{TYPE}({SCOPE}): {DESCRIPTION}`
- [x] Type: `feat` (new feature)
- [x] Scope: `langgraph` (core package)
- [x] Unit tests added (18 tests, no network dependencies)
- [x] Integration example added
- [x] `make format` passes
- [x] `make lint` passes
- [x] `make test` passes (all 18 tests pass)
- [x] Changes are backwards compatible
- [x] No unnecessary changes to `pyproject.toml`
- [x] Optional dependencies imported inside functions
- [x] All functions have complete type hints
- [x] All functions have docstrings
- [x] Error messages are clear and actionable
- [x] Code follows LangGraph conventions

## Breaking Changes
**None** - This is a fully backwards compatible addition.
- `add_node()` unchanged
- `add_edge()` works same for single start/end (new param optional)
- `add_conditional_edges()` unchanged
- All existing tests pass

## Files Changed
1. `libs/langgraph/langgraph/graph/state.py` (modified)
   - Added `add_negative_node()` method
   - Extended `add_edge()` for probabilistic routing
   - Added validation and bug fixes

2. `libs/langgraph/tests/test_negative_nodes.py` (new)
   - 18 comprehensive edge case tests

3. `docs/docs/integrations/negative_nodes.ipynb` (new)
   - Complete usage examples and patterns",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6485/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6485/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6485', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6485', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6485.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6485.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6484,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6484/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6484/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6484/events,https://github.com/langchain-ai/langgraph/pull/6484,3653796005,PR_kwDOKFU0lc608HZq,6484,chore(docs): Update OpenAPI spec from LangGraph API v0.5.24,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-22T03:53:46Z,2025-11-22T03:54:05Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.24**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6484/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6484/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6484', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6484', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6484.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6484.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6483,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6483/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6483/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6483/events,https://github.com/langchain-ai/langgraph/pull/6483,3653448204,PR_kwDOKFU0lc6066Y8,6483,feat(sdk-py): Add `name` parameter to Assistants search API,"{'login': 'andrewnguonly', 'id': 7654246, 'node_id': 'MDQ6VXNlcjc2NTQyNDY=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7654246?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/andrewnguonly', 'html_url': 'https://github.com/andrewnguonly', 'followers_url': 'https://api.github.com/users/andrewnguonly/followers', 'following_url': 'https://api.github.com/users/andrewnguonly/following{/other_user}', 'gists_url': 'https://api.github.com/users/andrewnguonly/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/andrewnguonly/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/andrewnguonly/subscriptions', 'organizations_url': 'https://api.github.com/users/andrewnguonly/orgs', 'repos_url': 'https://api.github.com/users/andrewnguonly/repos', 'events_url': 'https://api.github.com/users/andrewnguonly/events{/privacy}', 'received_events_url': 'https://api.github.com/users/andrewnguonly/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-22T00:08:02Z,2025-11-24T04:36:14Z,,CONTRIBUTOR,,,,, **Description:** The Agent Server API now supports searching for assistants by name.,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6483/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6483/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6483', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6483', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6483.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6483.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6482,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6482/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6482/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6482/events,https://github.com/langchain-ai/langgraph/pull/6482,3652753278,PR_kwDOKFU0lc604jS1,6482,feat: custom encryption at rest,"{'login': 'cwlbraa', 'id': 3478454, 'node_id': 'MDQ6VXNlcjM0Nzg0NTQ=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3478454?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/cwlbraa', 'html_url': 'https://github.com/cwlbraa', 'followers_url': 'https://api.github.com/users/cwlbraa/followers', 'following_url': 'https://api.github.com/users/cwlbraa/following{/other_user}', 'gists_url': 'https://api.github.com/users/cwlbraa/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/cwlbraa/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/cwlbraa/subscriptions', 'organizations_url': 'https://api.github.com/users/cwlbraa/orgs', 'repos_url': 'https://api.github.com/users/cwlbraa/repos', 'events_url': 'https://api.github.com/users/cwlbraa/events{/privacy}', 'received_events_url': 'https://api.github.com/users/cwlbraa/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-21T18:54:14Z,2025-11-21T21:25:52Z,,NONE,,,,,"Thank you for contributing to LangGraph! Follow these steps to mark your pull request as ready for review. **If any of these steps are not completed, your PR will not be considered for review.**

- [x] **PR title**: Follows the format: {TYPE}({SCOPE}): {DESCRIPTION}
  - Examples:
    - feat(core): add multi-tenant support
    - fix(cli): resolve flag parsing error
    - docs(openai): update API usage examples
  - Allowed `{TYPE}` values:
    - feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, release
  - Allowed `{SCOPE}` values (optional):
    - langgraph, docs, cli, checkpoint, checkpoint-postgres, checkpoint-sqlite, prebuilt, scheduler-kafka, sdk-py
  - Once you've written the title, please delete this checklist item; do not include it in the PR.

- [ ] **PR message**: ***Delete this entire checklist*** and replace with
  - **Description:** a description of the change. Include a [closing keyword](https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword) if applicable.
  - **Issue:** the issue # it fixes, if applicable
  - **Dependencies:** any dependencies required for this change
  - **Twitter handle:** if your PR gets announced, and you'd like a mention, we'll gladly shout you out!

- [ ] **Add tests and docs**: If you're adding a new integration, you must include:
  1. A test for the integration, preferably unit tests that do not rely on network access,
  2. An example notebook showing its use. It lives in `docs/docs/integrations` directory.

- [ ] **Lint and test**: Run `make format`, `make lint` and `make test` from the root of the package(s) you've modified. We will not consider a PR unless these three are passing in CI. See [contribution guidelines](https://github.com/langchain-ai/langgraph/blob/main/CONTRIBUTING.md) for more.

Additional guidelines:

- Make sure optional dependencies are imported within a function.
- Please do not add dependencies to `pyproject.toml` files (even optional ones) unless they are **required** for unit tests.
- Most PRs should not touch more than one package.
- Changes should be backwards compatible.
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6482/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6482/timeline,,,True,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6482', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6482', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6482.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6482.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6481,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6481/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6481/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6481/events,https://github.com/langchain-ai/langgraph/pull/6481,3650821888,PR_kwDOKFU0lc60x_Va,6481,chore(docs): Update OpenAPI spec from LangGraph API v0.5.23,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-21T09:06:17Z,2025-11-21T09:06:38Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.23**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6481/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6481/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6481', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6481', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6481.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6481.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6480,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6480/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6480/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6480/events,https://github.com/langchain-ai/langgraph/pull/6480,3649851506,PR_kwDOKFU0lc60uw-3,6480,chore(sdk-py): Improve type-hinting of inputs,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-21T01:41:56Z,2025-11-21T14:19:40Z,,CONTRIBUTOR,,,,,,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6480/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6480/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6480', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6480', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6480.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6480.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6479,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6479/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6479/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6479/events,https://github.com/langchain-ai/langgraph/pull/6479,3649760520,PR_kwDOKFU0lc60udah,6479,chore(sdk-py): Add more type checking.,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-21T00:59:54Z,2025-11-21T01:40:26Z,2025-11-21T01:40:24Z,CONTRIBUTOR,,,,,,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6479/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6479/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6479', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6479', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6479.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6479.patch', 'merged_at': '2025-11-21T01:40:24Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6478,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6478/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6478/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6478/events,https://github.com/langchain-ai/langgraph/issues/6478,3649624229,I_kwDOKFU0lc7ZiNil,6478,AttributeError in streaming when InMemorySaver is used,"{'login': 'inancsevinc', 'id': 1168428, 'node_id': 'MDQ6VXNlcjExNjg0Mjg=', 'avatar_url': 'https://avatars.githubusercontent.com/u/1168428?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/inancsevinc', 'html_url': 'https://github.com/inancsevinc', 'followers_url': 'https://api.github.com/users/inancsevinc/followers', 'following_url': 'https://api.github.com/users/inancsevinc/following{/other_user}', 'gists_url': 'https://api.github.com/users/inancsevinc/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/inancsevinc/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/inancsevinc/subscriptions', 'organizations_url': 'https://api.github.com/users/inancsevinc/orgs', 'repos_url': 'https://api.github.com/users/inancsevinc/repos', 'events_url': 'https://api.github.com/users/inancsevinc/events{/privacy}', 'received_events_url': 'https://api.github.com/users/inancsevinc/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-20T23:58:39Z,2025-11-23T11:07:17Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
#!/usr/bin/env -S uv run --script

# /// script
# dependencies = [""langgraph>=1.0.2"", ""langgraph-checkpoint>=2.1.1""]
# ///

""""""
Minimal reproduction of LangGraph InMemorySaver bug.
""""""

import asyncio

from langgraph.checkpoint.memory import InMemorySaver
from langgraph.graph import END, START, MessagesState, StateGraph


def node(state):
    return state


async def main():
    checkpointer = InMemorySaver()

    async with checkpointer as entered:
        graph = StateGraph(MessagesState)
        graph.add_node(""node"", node)
        graph.add_edge(START, ""node"")
        graph.add_edge(""node"", END)
        app = graph.compile(checkpointer=entered)

        try:
            async for chunk in app.astream(
                {""messages"": [(""user"", ""test"")]},
                config={""configurable"": {""thread_id"": ""1""}},
            ):
                print(f""Chunk: {chunk}"")
        except AttributeError as e:
            print(f""ERROR: {e}"")
            import traceback

            traceback.print_exc()


if __name__ == ""__main__"":
    asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
ERROR: 'ExitStack' object has no attribute 'get_next_version'
```

### Description

When streaming a graph using InMemorySaver, we are seeing `AttributeError: 'ExitStack' object has no attribute 'get_next_version'` exception.

Using this patched version of the `InMemorySaver` seems to resolve the issue:
```python
class PatchedInMemorySaver(InMemorySaver):
    @override
    async def __aenter__(self) -> InMemorySaver:
        await super().__aenter__()
        return self

    @override
    def __enter__(self) -> InMemorySaver:
        super().__enter__()
        return self
```



### System Info

```
System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.6.0: Mon Aug 11 21:16:21 PDT 2025; root:xnu-11417.140.69.701.11~1/RELEASE_ARM64_T6000
> Python Version:  3.12.6 (main, Sep 12 2024, 11:45:16) [Clang 14.0.0 (clang-1400.0.29.202)]

Package Information
-------------------
> langchain_core: 1.0.2
> langchain: 1.0.3
> langchain_community: 0.4.1
> langsmith: 0.4.38
> langchain_anthropic: 1.0.1
> langchain_classic: 1.0.0
> langchain_glean: 0.3.3
> langchain_mcp_adapters: 0.1.12
> langchain_openai: 1.0.1
> langchain_qdrant: 1.0.0
> langchain_text_splitters: 1.0.0
> langgraph_sdk: 0.2.3

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.12.14
> anthropic: 0.69.0
> async-timeout: Installed. No version info available.
> claude-agent-sdk: 0.1.5
> codespell: Installed. No version info available.
> commitizen: Installed. No version info available.
> dataclasses-json: 0.6.7
> fastembed: Installed. No version info available.
> glean-api-client: 0.6.6
> httpx: 0.28.1
> httpx-sse: 0.4.0
> jsonpatch: 1.33
> langchain-aws: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-huggingface: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-tests: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langsmith-pyo3: Installed. No version info available.
> mcp: 1.17.0
> mypy: Installed. No version info available.
> numpy: 2.2.6
> openai: 2.5.0
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.30.0
> opentelemetry-exporter-otlp-proto-http: 1.30.0
> opentelemetry-sdk: 1.30.0
> orjson: 3.11.3
> packaging: 25.0
> pydantic: 2.12.3
> pydantic-settings: 2.11.0
> pytest: 9.0.1
> pytest-asyncio: 1.3.0
> pytest-socket: Installed. No version info available.
> pytest-watcher: Installed. No version info available.
> python-dotenv: 1.1.1
> pyyaml: 6.0.2
> PyYAML: 6.0.2
> qdrant-client: 1.14.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 14.0.0
> ruff: 0.14.0
> sqlalchemy: 2.0.41
> SQLAlchemy: 2.0.41
> tenacity: 9.1.2
> tiktoken: 0.9.0
> types-requests: 2.32.4.20250913
> typing-extensions: 4.15.0
> vcrpy: 7.0.0
> zstandard: 0.23.0
```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6478/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6478/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6477,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6477/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6477/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6477/events,https://github.com/langchain-ai/langgraph/issues/6477,3649509837,I_kwDOKFU0lc7ZhxnN,6477,prebuilt==1.0.5 breaks create_react_agent when passing a list of BaseTool,"{'login': 'grahonan', 'id': 22183999, 'node_id': 'MDQ6VXNlcjIyMTgzOTk5', 'avatar_url': 'https://avatars.githubusercontent.com/u/22183999?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/grahonan', 'html_url': 'https://github.com/grahonan', 'followers_url': 'https://api.github.com/users/grahonan/followers', 'following_url': 'https://api.github.com/users/grahonan/following{/other_user}', 'gists_url': 'https://api.github.com/users/grahonan/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/grahonan/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/grahonan/subscriptions', 'organizations_url': 'https://api.github.com/users/grahonan/orgs', 'repos_url': 'https://api.github.com/users/grahonan/repos', 'events_url': 'https://api.github.com/users/grahonan/events{/privacy}', 'received_events_url': 'https://api.github.com/users/grahonan/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,2,2025-11-20T23:08:06Z,2025-11-21T18:28:00Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
""""""
Demo script showing bug in langgraph-prebuilt==1.0.5
""""""

from langchain_community.vectorstores import FAISS
from langchain_openai import OpenAIEmbeddings
from langchain_core.documents import Document
from langchain_core.tools.retriever import create_retriever_tool
from langchain_openai import ChatOpenAI
from langgraph.prebuilt import create_react_agent
from langchain_core.runnables import RunnableConfig
from langchain_core.messages import HumanMessage

# Create sample documents for the vector store
documents = [
    Document(
        page_content=""The Colosseum in Rome is an iconic ancient amphitheater built in 70-80 AD. It could hold up to 80,000 spectators and was used for gladiatorial contests and public spectacles."",
        metadata={""source"": ""colosseum_info"", ""title"": ""The Colosseum""}
    ),
    Document(
        page_content=""The Leaning Tower of Pisa is a freestanding bell tower located in Pisa. Construction began in 1173 and the tower is famous for its unintended tilt caused by soft ground."",
        metadata={""source"": ""pisa_tower"", ""title"": ""Leaning Tower of Pisa""}
    ),
    Document(
        page_content=""The Trevi Fountain in Rome is the largest Baroque fountain in the city. Completed in 1762, tradition says throwing a coin into the fountain ensures a return to Rome."",
        metadata={""source"": ""trevi_fountain"", ""title"": ""Trevi Fountain""}
    ),
]

# Create embeddings and vector store
print(""Creating vector store with embeddings..."")
embeddings = OpenAIEmbeddings()
vectorstore = FAISS.from_documents(documents, embeddings)

# Create a VectorStoreRetriever
print(""Creating VectorStoreRetriever..."")
retriever = vectorstore.as_retriever(
    search_type=""similarity"",
    search_kwargs={""k"": 3}  # Return top 3 most relevant documents
)

# Create a retrieval tool using create_retrieval_tool
print(""Creating retrieval tool..."")
retrieval_tool = create_retriever_tool(
    retriever=retriever,
    name=""italian_monument_knowledge_base"",
    description=""Searches and returns information about monuments in Italy.""
)

# Initialize the LLM
print(""Initializing LLM..."")
llm = ChatOpenAI(temperature=0, model=""gpt-3.5-turbo"")

# Create the ReAct agent with the retrieval tool
print(""Creating ReAct agent..."")
tools = [retrieval_tool]
agent = create_react_agent(
    llm,
    tools=tools,
)

runnable = RunnableConfig(
    callbacks=None,
    configurable={""thread_id"": ""thread-id""},
)

# Ask questions using the agent
print(""\n"" + ""=""*80)
print(""ASKING QUESTION TO THE AGENT"")
print(""=""*80 + ""\n"")

questions = [
    ""Tell me about the Colosseum in Rome."",
    ""When was the Leaning Tower of Pisa built?"",
    ""What is the tradition associated with the Trevi Fountain?""
]

for question in questions:
    print(f""\n{'='*80}"")
    print(f""Question: {question}"")
    print(f""{'='*80}\n"")
    messages = [HumanMessage(content=question)]
    try:
        response = agent.invoke({""messages"": messages}, config=runnable)
        print(f""\nFinal Answer: {response[""messages""][-1].content}\n"")
    except Exception as e:
        print(f""Error: {e}\n"")

print(""\n"" + ""=""*80)
print(""DEMO COMPLETE"")
print(""=""*80)
```

### Error Message and Stack Trace (if applicable)

```shell
$ python ../demo_retrieval_agent.py
Creating vector store with embeddings...
Creating VectorStoreRetriever...
Creating retrieval tool...
Initializing LLM...
Creating ReAct agent...
/Users/grayson/Documents/connext-bot-git/connext-bot/../demo_retrieval_agent.py:57: LangGraphDeprecatedSinceV10: create_react_agent has been moved to `langchain.agents`. Please update your import to `from langchain.agents import create_agent`. Deprecated in LangGraph V1.0 to be removed in V2.0.
  agent = create_react_agent(
Traceback (most recent call last):
  File ""/Users/grayson/Documents/connext-bot-git/connext-bot/../demo_retrieval_agent.py"", line 57, in <module>
    agent = create_react_agent(
            ^^^^^^^^^^^^^^^^^^^
  File ""/Users/grayson/Documents/connext-bot-git/venv/lib/python3.12/site-packages/typing_extensions.py"", line 3004, in wrapper
    return arg(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""/Users/grayson/Documents/connext-bot-git/venv/lib/python3.12/site-packages/langgraph/prebuilt/chat_agent_executor.py"", line 549, in create_react_agent
    tool_node = ToolNode([t for t in tools if not isinstance(t, dict)])
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/grayson/Documents/connext-bot-git/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 766, in __init__
    self._injected_args[tool_.name] = _get_all_injected_args(tool_)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/grayson/Documents/connext-bot-git/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 1801, in _get_all_injected_args
    func_annotations = get_type_hints(func, include_extras=True) if func else {}
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/typing.py"", line 2300, in get_type_hints
    raise TypeError('{!r} is not a module, class, method, '
TypeError: functools.partial(<function _get_relevant_documents at 0x13a72d4e0>, retriever=VectorStoreRetriever(tags=['FAISS', 'OpenAIEmbeddings'], vectorstore=<langchain_community.vectorstores.faiss.FAISS object at 0x13c4b3020>, search_kwargs={'k': 3}), document_prompt=PromptTemplate(input_variables=['page_content'], input_types={}, partial_variables={}, template='{page_content}'), document_separator='\n\n', response_format='content') is not a module, class, method, or function.
```

### Description

prebuilt==1.0.5 introduces a bug for users of `create_react_agent`. `create_react_agent` fails when **passing in a list of BaseTools** with the stack trace shown.

The attached reproducer code will **fail** with the stack trace shown with **langgraph-prebuilt==1.0.5** and the packages below:

```
langchain                     1.0.7
langchain-classic             1.0.0
langchain-community           0.4.1
langchain-core                1.0.5
langchain-google-community    3.0.1
langchain-ollama              1.0.0
langchain-openai              1.0.3
langchain-text-splitters      1.0.0
langdetect                    1.0.9
langgraph                     1.0.3
langgraph-checkpoint          3.0.1
langgraph-prebuilt            1.0.5
langgraph-sdk                 0.2.9
langsmith                     0.4.45
```

If you run `pip install langgraph-prebuilt==1.0.4` and re-run the reproducer code, it will run **without** errors.

```
$ pip install langgraph-prebuilt==1.0.4
Collecting langgraph-prebuilt==1.0.4
[...]
      Successfully uninstalled langgraph-prebuilt-1.0.5
Successfully installed langgraph-prebuilt-1.0.4

$ python ../demo_retrieval_agent.py
Creating vector store with embeddings...
Creating VectorStoreRetriever...
Creating retrieval tool...
Initializing LLM...
Creating ReAct agent...
/Users/grayson/Documents/connext-bot-git/connext-bot/../demo_retrieval_agent.py:58: LangGraphDeprecatedSinceV10: create_react_agent has been moved to `langchain.agents`. Please update your import to `from langchain.agents import create_agent`. Deprecated in LangGraph V1.0 to be removed in V2.0.
  agent = create_react_agent(

================================================================================
ASKING QUESTION TO THE AGENT
================================================================================


================================================================================
Question: Tell me about the Colosseum in Rome.
================================================================================
[...]

Final Answer: The tradition associated with the Trevi Fountain in Rome is that if you throw a coin into the fountain, it ensures your return to Rome.


================================================================================
DEMO COMPLETE
================================================================================
```

### System Info

$ python -m langchain_core.sys_info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.6.0: Wed Oct 15 21:12:06 PDT 2025; root:xnu-11417.140.69.703.14~1/RELEASE_ARM64_T6000
> Python Version:  3.12.9 (v3.12.9:fdb81425a9a, Feb  4 2025, 12:21:36) [Clang 13.0.0 (clang-1300.0.29.30)]

Package Information
-------------------
> langchain_core: 1.0.5
> langchain: 1.0.7
> langchain_community: 0.4.1
> langsmith: 0.4.45
> langchain_classic: 1.0.0
> langchain_google_community: 3.0.1
> langchain_ollama: 1.0.0
> langchain_openai: 1.0.3
> langchain_text_splitters: 1.0.0
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.12.13
> beautifulsoup4: 4.12.3
> dataclasses-json: 0.6.7
> google-api-core: 2.28.1
> google-api-python-client: 2.163.0
> google-auth: 2.43.0
> google-auth-httplib2: 0.2.0
> google-auth-oauthlib: 1.2.1
> google-cloud-core: 2.5.0
> google-cloud-modelarmor: 0.3.0
> grpcio: 1.76.0
> httpx: 0.27.2
> httpx-sse: 0.4.3
> jsonpatch: 1.33
> langgraph: 1.0.3
> numpy: 2.2.6
> ollama: 0.6.1
> openai: 2.8.1
> orjson: 3.11.4
> packaging: 24.2
> pandas: 2.3.0
> pyarrow: 22.0.0
> pydantic: 2.10.3
> pydantic-settings: 2.12.0
> pytest: 8.3.4
> PyYAML: 6.0.3
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 13.9.4
> sqlalchemy: 2.0.44
> SQLAlchemy: 2.0.44
> tenacity: 9.1.2
> tiktoken: 0.11.0
> typing-extensions: 4.15.0
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6477/reactions', 'total_count': 1, '+1': 1, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6477/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6476,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6476/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6476/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6476/events,https://github.com/langchain-ai/langgraph/pull/6476,3649094054,PR_kwDOKFU0lc60sK-k,6476,fix(docs): Update documentation link for resuming interrupts,"{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-20T21:09:02Z,2025-11-20T21:09:07Z,,CONTRIBUTOR,,,,,Fix broken link,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6476/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6476/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6476', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6476', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6476.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6476.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6475,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6475/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6475/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6475/events,https://github.com/langchain-ai/langgraph/pull/6475,3648571844,PR_kwDOKFU0lc60qXK3,6475,fix: interrupt stream mode values,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,3,2025-11-20T18:38:38Z,2025-11-20T22:23:12Z,2025-11-20T22:23:10Z,COLLABORATOR,,,,,"This PR improves the consistency of interrupt streaming. 

- when streaming with stream_mode values, the stream chunk now contains the entire state alongside the interrupt:

```python
class State(TypedDict):
    robot_input: str
# at this point in time robot_input is already set to  ""beep boop i am a robot""
app.stream(..., stream_mode=""values"")
# before
{""__interrupt__"": (Interrupt(value=""interrupt"",))}}
# after
{""robot_input"": ""beep boop i am a robot"", ""__interrupt__"": (Interrupt(value=""interrupt""))}
```

- when streaming with stream_mode=[""values"", ""updates""], interrupts are surfaced in both an update stream chunk and the value stream chunk, when previously we keep interrupt in values only if we request values mode only

```python
class State(TypedDict):
    robot_input: str
# at this point in time robot_input is already set to  ""beep boop i am a robot""
app.stream(..., stream_mode=[""values"", ""updates""])
# before (interrupt would only emit on update chunk, there would be no values chunk)
(""updates"", {""__interrupt__"": (Interrupt(value=""interrupt"",))}})
# after
(""updates"", {""__interrupt__"": (Interrupt(value=""interrupt"",))}})
(""values"", {""robot_input"": ""beep boop i am a robot"", ""__interrupt__"": (Interrupt(value=""interrupt""))})
```

For housekeeping: this PR improves on this revert: https://github.com/langchain-ai/langgraph/pull/6141","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6475/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6475/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6475', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6475', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6475.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6475.patch', 'merged_at': '2025-11-20T22:23:10Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6474,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6474/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6474/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6474/events,https://github.com/langchain-ai/langgraph/pull/6474,3648132634,PR_kwDOKFU0lc60o38n,6474,chore(deps): bump js-yaml from 4.1.0 to 4.1.1 in /libs/cli/js-monorepo-example,"{'login': 'dependabot[bot]', 'id': 49699333, 'node_id': 'MDM6Qm90NDk2OTkzMzM=', 'avatar_url': 'https://avatars.githubusercontent.com/in/29110?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/dependabot%5Bbot%5D', 'html_url': 'https://github.com/apps/dependabot', 'followers_url': 'https://api.github.com/users/dependabot%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/dependabot%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/dependabot%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/dependabot%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}, {'id': 7367967763, 'node_id': 'LA_kwDOKFU0lc8AAAABtypEEw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/javascript', 'name': 'javascript', 'color': '168700', 'default': False, 'description': 'Pull requests that update Javascript code'}]",open,False,,[],,1,2025-11-20T16:46:24Z,2025-11-20T16:46:34Z,,CONTRIBUTOR,,,,,"Bumps [js-yaml](https://github.com/nodeca/js-yaml) from 4.1.0 to 4.1.1.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/nodeca/js-yaml/blob/master/CHANGELOG.md"">js-yaml's changelog</a>.</em></p>
<blockquote>
<h2>[4.1.1] - 2025-11-12</h2>
<h3>Security</h3>
<ul>
<li>Fix prototype pollution issue in yaml merge (&lt;&lt;) operator.</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/nodeca/js-yaml/commit/cc482e775913e6625137572a3712d2826170e53a""><code>cc482e7</code></a> 4.1.1 released</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/50968b862e75866ef90e626572fe0b2f97b55f9f""><code>50968b8</code></a> dist rebuild</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/d092d866031751cb27c12d93f3e2470ad74d678b""><code>d092d86</code></a> lint fix</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/383665ff4248ec2192d1274e934462bb30426879""><code>383665f</code></a> fix prototype pollution in merge (&lt;&lt;)</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/0d3ca7a27b03a6c974790a30a89e456007d62976""><code>0d3ca7a</code></a> README.md: HTTP =&gt; HTTPS (<a href=""https://redirect.github.com/nodeca/js-yaml/issues/678"">#678</a>)</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/49baadd52af887d2991e2c39a6639baa56d6c71b""><code>49baadd</code></a> doc: 'empty' style option for !!null</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/ba3460eb9d3e4478edcbc29edabe17c2157fc9ce""><code>ba3460e</code></a> Fix demo link (<a href=""https://redirect.github.com/nodeca/js-yaml/issues/618"">#618</a>)</li>
<li>See full diff in <a href=""https://github.com/nodeca/js-yaml/compare/4.1.0...4.1.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=js-yaml&package-manager=npm_and_yarn&previous-version=4.1.0&new-version=4.1.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/langchain-ai/langgraph/network/alerts).

</details>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6474/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6474/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6474', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6474', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6474.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6474.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6473,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6473/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6473/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6473/events,https://github.com/langchain-ai/langgraph/pull/6473,3648099614,PR_kwDOKFU0lc60oxsN,6473,release: langgraph-prebuilt 1.0.5,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-20T16:38:57Z,2025-11-20T16:45:21Z,2025-11-20T16:45:19Z,COLLABORATOR,,,,,,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6473/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6473/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6473', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6473', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6473.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6473.patch', 'merged_at': '2025-11-20T16:45:19Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6472,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6472/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6472/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6472/events,https://github.com/langchain-ai/langgraph/pull/6472,3646732781,PR_kwDOKFU0lc60kOrH,6472,chore(langgraph): Add __init__.pyi file for auto import support,"{'login': 'nithinjp1997', 'id': 61446944, 'node_id': 'MDQ6VXNlcjYxNDQ2OTQ0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61446944?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/nithinjp1997', 'html_url': 'https://github.com/nithinjp1997', 'followers_url': 'https://api.github.com/users/nithinjp1997/followers', 'following_url': 'https://api.github.com/users/nithinjp1997/following{/other_user}', 'gists_url': 'https://api.github.com/users/nithinjp1997/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/nithinjp1997/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/nithinjp1997/subscriptions', 'organizations_url': 'https://api.github.com/users/nithinjp1997/orgs', 'repos_url': 'https://api.github.com/users/nithinjp1997/repos', 'events_url': 'https://api.github.com/users/nithinjp1997/events{/privacy}', 'received_events_url': 'https://api.github.com/users/nithinjp1997/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,7,2025-11-20T11:01:26Z,2025-11-24T08:26:29Z,,NONE,,,,,"Added a __init__.py file to langgraph folder. This helps python recognize langgraph as a package. Additionally this allows pylance or other python LSPs to provide import suggestions on the top level modules mainly `runtime.py` and `types.py`. Without __init__.py pylance code actions wouldn't suggest `Runtime` class or `Send` , `Command` from the top level modules. After addition of __init__.py these are now suggested by code actions auto import thereby improving developer experience.
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6472/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6472/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6472', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6472', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6472.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6472.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6471,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6471/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6471/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6471/events,https://github.com/langchain-ai/langgraph/pull/6471,3646231278,PR_kwDOKFU0lc60ig5x,6471,chore(docs): Update OpenAPI spec from LangGraph API v0.5.20,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-20T09:06:24Z,2025-11-20T09:06:44Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.20**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6471/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6471/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6471', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6471', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6471.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6471.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6470,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6470/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6470/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6470/events,https://github.com/langchain-ai/langgraph/issues/6470,3645329165,I_kwDOKFU0lc7ZR08N,6470,WinError 10013 when running langgraph dev,"{'login': 'Septemberlemon', 'id': 84148797, 'node_id': 'MDQ6VXNlcjg0MTQ4Nzk3', 'avatar_url': 'https://avatars.githubusercontent.com/u/84148797?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Septemberlemon', 'html_url': 'https://github.com/Septemberlemon', 'followers_url': 'https://api.github.com/users/Septemberlemon/followers', 'following_url': 'https://api.github.com/users/Septemberlemon/following{/other_user}', 'gists_url': 'https://api.github.com/users/Septemberlemon/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Septemberlemon/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Septemberlemon/subscriptions', 'organizations_url': 'https://api.github.com/users/Septemberlemon/orgs', 'repos_url': 'https://api.github.com/users/Septemberlemon/repos', 'events_url': 'https://api.github.com/users/Septemberlemon/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Septemberlemon/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-20T03:49:33Z,2025-11-20T03:49:33Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
langgraph dev
```

### Error Message and Stack Trace (if applicable)

```shell
(.venv) PS D:\Code\langchain\agent\app> langgraph dev
INFO:langgraph_api.cli:

        Welcome to

â•¦  â”Œâ”€â”â”Œâ”â”Œâ”Œâ”€â”â•”â•â•—â”¬â”€â”â”Œâ”€â”â”Œâ”€â”â”¬ â”¬
â•‘  â”œâ”€â”¤â”‚â”‚â”‚â”‚ â”¬â•‘ â•¦â”œâ”¬â”˜â”œâ”€â”¤â”œâ”€â”˜â”œâ”€â”¤
â•©â•â•â”´ â”´â”˜â””â”˜â””â”€â”˜â•šâ•â•â”´â””â”€â”´ â”´â”´  â”´ â”´

- ðŸš€ API: http://127.0.0.1:2024
- ðŸŽ¨ Studio UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
- ðŸ“š API Docs: http://127.0.0.1:2024/docs

This in-memory server is designed for development and testing.
For production use, please use LangSmith Deployment.


2025-11-19T07:41:38.946778Z [error    ] [WinError 10013] ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æŽ¥å­—çš„å°è¯•ã€‚ [uvicorn.error] api_variant=local_dev langgraph_api_version=0.5.16 thread_name=MainThread
```

### Description

I'm trying run a local server using `langgraph dev`, then I encountered above error
Iâ€™ve tried using netstat -ano | findstr 2024 to check the port and itâ€™s free

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.19044
> Python Version:  3.13.9 (tags/v3.13.9:8183fa5, Oct 14 2025, 14:09:13) [MSC v.1944 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.5
> langchain: 1.0.7
> langsmith: 0.4.43
> langchain_openai: 1.0.3
> langgraph_api: 0.5.16
> langgraph_cli: 0.4.7
> langgraph_runtime_inmem: 0.18.0
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> blockbuster: 1.5.25
> click: 8.3.1
> cloudpickle: 3.1.2
> cryptography: 44.0.3
> grpcio: 1.76.0
> grpcio-tools: 1.75.1
> httpx: 0.28.1
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langgraph: 1.0.3
> langgraph-checkpoint: 3.0.1
> openai: 2.8.1
> opentelemetry-api: 1.38.0
> opentelemetry-exporter-otlp-proto-http: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> protobuf: 6.33.1
> pydantic: 2.12.4
> pyjwt: 2.10.1
> python-dotenv: 1.2.1
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> sse-starlette: 2.1.3
> starlette: 0.50.0
> structlog: 25.5.0
> tenacity: 9.1.2
> tiktoken: 0.12.0
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.38.0
> watchfiles: 1.1.1
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6470/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6470/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6469,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6469/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6469/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6469/events,https://github.com/langchain-ai/langgraph/issues/6469,3645116683,I_kwDOKFU0lc7ZRBEL,6469,"Using Langgraph + Amap MCP, for example, when I input a travel plan, it needs to call many tools and perform 25 steps. Does it really take that long? Is there a better solution?","{'login': 'jinwater88', 'id': 205713895, 'node_id': 'U_kgDODELx5w', 'avatar_url': 'https://avatars.githubusercontent.com/u/205713895?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jinwater88', 'html_url': 'https://github.com/jinwater88', 'followers_url': 'https://api.github.com/users/jinwater88/followers', 'following_url': 'https://api.github.com/users/jinwater88/following{/other_user}', 'gists_url': 'https://api.github.com/users/jinwater88/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jinwater88/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jinwater88/subscriptions', 'organizations_url': 'https://api.github.com/users/jinwater88/orgs', 'repos_url': 'https://api.github.com/users/jinwater88/repos', 'events_url': 'https://api.github.com/users/jinwater88/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jinwater88/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-20T02:11:52Z,2025-11-20T02:11:52Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import asyncio  
import json  
from pathlib import Path  
from langchain_mcp_adapters.client import MultiServerMCPClient  
from langgraph.prebuilt import create_react_agent  
from langchain_openai import ChatOpenAI  
from dotenv import load_dotenv  
import os  
import time  
  
load_dotenv()

def load_mcp_config(config_path: str = ""mcp_server_settings.json"") -> dict:  
    """"""åŠ è½½ MCP æœåŠ¡å™¨é…ç½®æ–‡ä»¶""""""  
    config_file = Path(config_path)  
    if not config_file.exists():  
        raise FileNotFoundError(f""é…ç½®æ–‡ä»¶ {config_path} ä¸å­˜åœ¨"")  
      
    with open(config_file, 'r', encoding='utf-8') as f:  
        config = json.load(f)  
      
    return config.get(""mcpServers"", {})  

async def main():  
    try:  
        # åŠ è½½ MCP é…ç½®  
        print(""æ­£åœ¨åŠ è½½ MCP é…ç½®..."")  
        mcp_servers = load_mcp_config()  
        print(f""âœ“ æˆåŠŸåŠ è½½ {len(mcp_servers)} ä¸ª MCP æœåŠ¡å™¨é…ç½®"")  
          
        # è½¬æ¢é…ç½®æ ¼å¼ä»¥é€‚é… MultiServerMCPClient  
        client_config = {}  
        for server_name, server_config in mcp_servers.items():  
            server_type = server_config.pop(""type"")  
              
            if server_type == ""streamable_http"":  
                client_config[server_name] = {  
                    ""url"": server_config[""url""],  
                    ""transport"": ""streamable_http""  
                }  
            elif server_type == ""stdio"":  
                client_config[server_name] = {  
                    ""command"": server_config[""command""],  
                    ""args"": server_config.get(""args"", []),  
                    ""transport"": ""stdio""  
                }  
            elif server_type == ""sse"":  
                client_config[server_name] = {  
                    ""url"": server_config[""url""],  
                    ""transport"": ""sse""  
                }  
        
        # èŽ·å– MCP æœåŠ¡å™¨æä¾›çš„å·¥å…·  
        print(""æ­£åœ¨è¿žæŽ¥ MCP æœåŠ¡å™¨..."")  
        client = MultiServerMCPClient(client_config)  
        tools = await client.get_tools()  
        print(f""æˆåŠŸèŽ·å– {len(tools)} ä¸ªå·¥å…·:"")  
        for tool in tools:  
            print(f""  - {tool.name}: {tool.description}"")
        # ä½¿ç”¨ DeepSeek æ¨¡åž‹  
        # ä½¿ç”¨ ChatOpenAI æ¨¡åž‹
        print(""\næ­£åœ¨åˆå§‹åŒ–æ¨¡åž‹..."")    
        model = ChatOpenAI(  
            model=""deepseek-chat"",  
            api_key=os.getenv(""DEEPSEEK_API_KEY""),  
            base_url=""https://api.deepseek.com"",  
            temperature=0,  
            timeout=15,  
            request_timeout=15,
            max_retries=2  # æ·»åŠ é‡è¯•æœºåˆ¶    
        ) 
        print(""âœ“ æ¨¡åž‹åˆå§‹åŒ–æˆåŠŸ"")  
          
        print(""\næ­£åœ¨åˆ›å»º agent..."")  
        model_with_tools = model.bind_tools(tools, parallel_tool_calls=True) 
        # åˆ›å»º ReAct agent  
        agent = create_react_agent(  
            model=model_with_tools,  
            tools=tools,
            debug=False  # å¯ç”¨è°ƒè¯•æ¨¡å¼    
        )  
        
        # äº¤äº’å¼å¾ªçŽ¯  
        print(""Agent å·²å¯åŠ¨ã€‚è¾“å…¥ 'quit', 'exit' æˆ– 'q' é€€å‡ºã€‚"")  
        while True:  
            try:  
                user_input = input(""\nUser: "")  
                if user_input.lower() in [""quit"", ""exit"", ""q""]:  
                    print(""å†è§!"")  
                    break  
                
                # è°ƒç”¨ agent  
                # ä½¿ç”¨ astream æ›¿ä»£ ainvoke,å¯ä»¥çœ‹åˆ°ä¸­é—´æ­¥éª¤  
                print(""\n[æ‰§è¡Œå¼€å§‹]"")  
                start_time = time.time()  
                messages = []  
                step_count = 0  
                  
                try:  
                    async with asyncio.timeout(90.0):  
                        async for event in agent.astream(  
                            {""messages"": [{""role"": ""user"", ""content"": user_input}]},  
                            stream_mode=""updates""  
                        ):  
                            step_count += 1  
                            # åªå¤„ç† agent èŠ‚ç‚¹çš„æ›´æ–°  
                            if ""agent"" in event and ""messages"" in event[""agent""]:  
                                messages = event[""agent""][""messages""]  
                                last_msg = messages[-1]  
                                  
                                # ç®€åŒ–æ—¥å¿—è¾“å‡º  
                                if hasattr(last_msg, 'tool_calls') and last_msg.tool_calls:  
                                    print(f""[æ­¥éª¤ {step_count}] è°ƒç”¨ {len(last_msg.tool_calls)} ä¸ªå·¥å…·"")           
                except asyncio.TimeoutError:  
                    print(f""\n[è¶…æ—¶] æ‰§è¡Œè¶…è¿‡ 90 ç§’,å…±å®Œæˆ {step_count} ä¸ªæ­¥éª¤"")  
                    continue  
                  
                if messages:  
                    elapsed = time.time() - start_time  
                    print(f""\n[å®Œæˆ] æ€»è€—æ—¶: {elapsed:.1f}s"")  
                    print(f""Assistant: {messages[-1].content}"") 

            except KeyboardInterrupt:  
                print(""\nå†è§!"")  
                break  
            except Exception as e:  
                print(f""\n[é”™è¯¯] {e}"")  
                import traceback  
                traceback.print_exc()    
              
    except Exception as e:  
        print(f""\n[åˆå§‹åŒ–é”™è¯¯] {e}"")  
        import traceback  
        traceback.print_exc()  
  
if __name__ == ""__main__"":  
    asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
langgraph.errors.GraphRecursionError: Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://docs.langchain.com/oss/python/langgraph/errors/GRAPH_RECURSION_LIMIT
```

### Description

My code is shown above. I'm using Amap's MCP (Multi-Channel Programming) to plan my trip, which requires 23 calls. However, when I use Cherry Studio to call Amap's MCP, it responds instantly. Are there any optimization solutions for my code?

### System Info

langchain                 1.0.7
langchain-core            1.0.5
langchain-mcp-adapters    0.1.13
langchain-openai          1.0.3
langgraph                 1.0.3
langgraph-checkpoint      3.0.1
langgraph-prebuilt        1.0.4
langgraph-sdk             0.2.9
langsmith                 0.4.43",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6469/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6469/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6468,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6468/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6468/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6468/events,https://github.com/langchain-ai/langgraph/pull/6468,3645001734,PR_kwDOKFU0lc60eWqZ,6468,fix: refactor injection logic to respect function signatures,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,2,2025-11-20T01:24:58Z,2025-11-20T16:37:57Z,2025-11-20T16:37:55Z,COLLABORATOR,,,,,"## overview

The main purpose of this is to respect tool signatures that request injected args (like `ToolRuntime`) even when the explicitly specified `args_schema` does not.

Ex in the following example, we should still inject `runtime` despite its absence in `ArgsSchema`

```py
class ArgsSchema(BaseModel):
    some_arg: int = Field(...)

@tool(args_schema=ArgsSchema)
def my_tool(some_arg: int, runtime: ToolRuntime): ...
```

This is accompanied by https://github.com/langchain-ai/langchain/pull/34051 which has tests that pass w/ this change. This tests injection w/ `create_agent` (more end to end than tests added in https://github.com/langchain-ai/langchain/pull/33999.

This unblocks the injection of `ToolRuntime` into MCP tools which is exciting bc that exposes tool call id and state, which we previously were unable to do.

## other benefits

* Cleaner code structure w/ more helpful docs about injected args.
* Nice perf boost, we're no longer inspecting the annotations of a tool's schema 3 different times to detect store, state, and runtime injections.

## additional notes

1. I could see a world where we want more of this logic to reside on the tools themselves, but tools don't now about LG specific injection types (like `ToolRuntime`, hence having this logic here for now).
2. We could separately add validation for the case where something is specified in `args_schema` and not in the function signature (probably at the tool level though).","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6468/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6468/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6468', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6468', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6468.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6468.patch', 'merged_at': '2025-11-20T16:37:55Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6467,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6467/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6467/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6467/events,https://github.com/langchain-ai/langgraph/pull/6467,3644390440,PR_kwDOKFU0lc60cUe2,6467,fix: improved typing on tool call requests (will bubble up to LC),"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-19T20:54:42Z,2025-11-19T20:54:48Z,,COLLABORATOR,,,,,,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6467/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6467/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6467', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6467', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6467.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6467.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6466,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6466/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6466/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6466/events,https://github.com/langchain-ai/langgraph/pull/6466,3644202986,PR_kwDOKFU0lc60bsBF,6466,chore(docs): Update OpenAPI spec from LangGraph API v0.5.17,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-19T19:51:21Z,2025-11-19T19:51:45Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.17**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6466/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6466/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6466', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6466', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6466.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6466.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6465,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6465/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6465/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6465/events,https://github.com/langchain-ai/langgraph/issues/6465,3644075960,I_kwDOKFU0lc7ZNC-4,6465,`ToolRuntime[WithTypeArguments]` not supported,"{'login': 'e792a8', 'id': 25414586, 'node_id': 'MDQ6VXNlcjI1NDE0NTg2', 'avatar_url': 'https://avatars.githubusercontent.com/u/25414586?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/e792a8', 'html_url': 'https://github.com/e792a8', 'followers_url': 'https://api.github.com/users/e792a8/followers', 'following_url': 'https://api.github.com/users/e792a8/following{/other_user}', 'gists_url': 'https://api.github.com/users/e792a8/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/e792a8/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/e792a8/subscriptions', 'organizations_url': 'https://api.github.com/users/e792a8/orgs', 'repos_url': 'https://api.github.com/users/e792a8/repos', 'events_url': 'https://api.github.com/users/e792a8/events{/privacy}', 'received_events_url': 'https://api.github.com/users/e792a8/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-19T19:09:31Z,2025-11-22T04:20:34Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langgraph.prebuilt.tool_node import ToolNode, ToolRuntime
from langgraph.graph import StateGraph, MessagesState, START, END
from langchain_core.messages import AIMessage
from langchain_core.messages.tool import tool_call
from langchain.tools import tool
from dataclasses import dataclass


@dataclass
class MyContext:
    some_info: str


@tool
def get_info_error(rt: ToolRuntime[MyContext]):
    """"""This tool returns error.""""""
    return rt.context.some_info


@tool
def get_info_ok_but_no_typechecking(rt: ToolRuntime):
    """"""This tool is ok, but lacks type checking.""""""
    return rt.context.some_info  # type: ignore


builder = StateGraph(MessagesState, context_schema=MyContext)
builder.add_node(
    ""tool_node"", ToolNode([get_info_ok_but_no_typechecking, get_info_error])
)
builder.add_edge(START, ""tool_node"")
builder.add_edge(""tool_node"", END)
graph = builder.compile()
result = graph.invoke(
    {
        ""messages"": [
            AIMessage(
                ""_"",
                tool_calls=[
                    tool_call(name=""get_info_ok_but_no_typechecking"", args={}, id=""1""),
                    tool_call(name=""get_info_error"", args={}, id=""2""),
                ],
            )
        ]
    },
    context=MyContext(some_info=""this is info""),
)
print(result[""messages""][-2:])
```

### Error Message and Stack Trace (if applicable)

```shell
[ToolMessage(content='this is info', name='get_info_ok_but_no_typechecking', id='cafc05ec-1e87-401a-8150-f7a356046ae1', tool_call_id='1'), 
ToolMessage(content=""Error invoking tool 'get_info_error' with kwargs {} with error:\n rt: Field required\n Please fix the error and try again."", name='get_info_error', id='9ae338e5-7672-48f2-9a52-e9ab1d4675f0', tool_call_id='2', status='error')]
```

### Description

The `ToolRuntime` argument of a `@tool` function cannot attach type arguments, like `ToolRuntime[MyContext, MyStatus]`, or the runtime is not injected. This makes typechecking some difficult.

### System Info

System Information
------------------
> OS:  Linux
> OS Version:  #1 SMP PREEMPT_DYNAMIC Wed, 15 Oct 2025 11:05:48 +0000
> Python Version:  3.13.7 (main, Aug 15 2025, 12:34:02) [GCC 15.2.1 20250813]

Package Information
-------------------
> langchain_core: 1.0.6
> langchain: 1.0.8
> langchain_community: 0.4.1
> langsmith: 0.4.38
> langchain_anthropic: 1.0.1
> langchain_chroma: 1.0.0
> langchain_classic: 1.0.0
> langchain_ollama: 1.0.0
> langchain_openai: 1.0.2
> langchain_text_splitters: 1.0.0
> langgraph_api: 0.4.28
> langgraph_cli: 0.4.5
> langgraph_runtime_inmem: 0.14.1
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.13.2
> anthropic: 0.72.0
> blockbuster: 1.5.25
> chromadb: 1.3.4
> click: 8.3.0
> cloudpickle: 3.1.1
> cryptography: 44.0.3
> dataclasses-json: 0.6.7
> httpx: 0.28.1
> httpx-sse: 0.4.3
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langgraph: 1.0.3
> langgraph-checkpoint: 3.0.0
> numpy: 2.3.4
> ollama: 0.6.0
> openai: 2.6.1
> opentelemetry-api: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.3
> pydantic-settings: 2.11.0
> pyjwt: 2.10.1
> python-dotenv: 1.2.1
> pyyaml: 6.0.3
> PyYAML: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 14.2.0
> sqlalchemy: 2.0.44
> SQLAlchemy: 2.0.44
> sse-starlette: 2.1.3
> starlette: 0.49.1
> structlog: 25.5.0
> tenacity: 9.1.2
> tiktoken: 0.12.0
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.38.0
> watchfiles: 1.1.1
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6465/reactions', 'total_count': 1, '+1': 1, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6465/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6464,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6464/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6464/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6464/events,https://github.com/langchain-ai/langgraph/pull/6464,3643832725,PR_kwDOKFU0lc60acIV,6464,docs: add missing docstrings to PregelNode and ChannelRead,"{'login': 'sebuzdugan', 'id': 81054605, 'node_id': 'MDQ6VXNlcjgxMDU0NjA1', 'avatar_url': 'https://avatars.githubusercontent.com/u/81054605?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sebuzdugan', 'html_url': 'https://github.com/sebuzdugan', 'followers_url': 'https://api.github.com/users/sebuzdugan/followers', 'following_url': 'https://api.github.com/users/sebuzdugan/following{/other_user}', 'gists_url': 'https://api.github.com/users/sebuzdugan/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sebuzdugan/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sebuzdugan/subscriptions', 'organizations_url': 'https://api.github.com/users/sebuzdugan/orgs', 'repos_url': 'https://api.github.com/users/sebuzdugan/repos', 'events_url': 'https://api.github.com/users/sebuzdugan/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sebuzdugan/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-19T18:01:03Z,2025-11-19T18:01:08Z,,NONE,,,,,"Description: Added missing docstrings to internal methods in PregelNode and ChannelRead (_read, _aread, invoke, ainvoke, stream, astream) to improve code readability and developer experience
Issue: N/A 
Dependencies: None 
Twitter handle: @sebuzdugan

 - Add tests and docs: Documentation added.
 - Lint and test: Changes are docstrings only.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6464/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6464/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6464', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6464', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6464.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6464.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6463,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6463/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6463/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6463/events,https://github.com/langchain-ai/langgraph/pull/6463,3643796936,PR_kwDOKFU0lc60aUXj,6463,chore(deps): bump glob from 10.4.5 to 10.5.0 in /docs/_scripts/js_translation/codeblocks,"{'login': 'dependabot[bot]', 'id': 49699333, 'node_id': 'MDM6Qm90NDk2OTkzMzM=', 'avatar_url': 'https://avatars.githubusercontent.com/in/29110?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/dependabot%5Bbot%5D', 'html_url': 'https://github.com/apps/dependabot', 'followers_url': 'https://api.github.com/users/dependabot%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/dependabot%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/dependabot%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/dependabot%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}, {'id': 7367967763, 'node_id': 'LA_kwDOKFU0lc8AAAABtypEEw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/javascript', 'name': 'javascript', 'color': '168700', 'default': False, 'description': 'Pull requests that update Javascript code'}]",open,False,,[],,1,2025-11-19T17:49:27Z,2025-11-19T17:49:47Z,,CONTRIBUTOR,,,,,"Bumps [glob](https://github.com/isaacs/node-glob) from 10.4.5 to 10.5.0.
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/isaacs/node-glob/commit/56774ef73b495eb0b17cdd0f42921f5ef62297c1""><code>56774ef</code></a> 10.5.0</li>
<li><a href=""https://github.com/isaacs/node-glob/commit/1e4e297342a09f2aa0ced87fcd4a70ddc325d75f""><code>1e4e297</code></a> bin: Do not expose filenames to shell expansion</li>
<li>See full diff in <a href=""https://github.com/isaacs/node-glob/compare/v10.4.5...v10.5.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=glob&package-manager=npm_and_yarn&previous-version=10.4.5&new-version=10.5.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/langchain-ai/langgraph/network/alerts).

</details>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6463/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6463/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6463', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6463', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6463.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6463.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6462,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6462/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6462/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6462/events,https://github.com/langchain-ai/langgraph/pull/6462,3643077365,PR_kwDOKFU0lc60X4An,6462,fix: deprecate `setattr` on `ToolCallRequest`,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-19T14:44:22Z,2025-11-19T18:12:13Z,2025-11-19T18:12:11Z,COLLABORATOR,,,,,"* one alternative considered was setting `frozen=True` on the dataclass, but this is breaking, so a deprecation is a nicer approach","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6462/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6462/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6462', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6462', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6462.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6462.patch', 'merged_at': '2025-11-19T18:12:11Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6461,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6461/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6461/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6461/events,https://github.com/langchain-ai/langgraph/pull/6461,3641754416,PR_kwDOKFU0lc60TWMT,6461,chore(docs): Update OpenAPI spec from LangGraph API v0.5.16,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-19T09:06:08Z,2025-11-19T09:06:26Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.16**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6461/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6461/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6461', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6461', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6461.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6461.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6460,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6460/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6460/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6460/events,https://github.com/langchain-ai/langgraph/issues/6460,3639527441,I_kwDOKFU0lc7Y7sgR,6460,StateSnapshot puts the user metadata in possibly wrong place,"{'login': 'spandan-sharma', 'id': 104764727, 'node_id': 'U_kgDOBj6VNw', 'avatar_url': 'https://avatars.githubusercontent.com/u/104764727?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/spandan-sharma', 'html_url': 'https://github.com/spandan-sharma', 'followers_url': 'https://api.github.com/users/spandan-sharma/followers', 'following_url': 'https://api.github.com/users/spandan-sharma/following{/other_user}', 'gists_url': 'https://api.github.com/users/spandan-sharma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/spandan-sharma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/spandan-sharma/subscriptions', 'organizations_url': 'https://api.github.com/users/spandan-sharma/orgs', 'repos_url': 'https://api.github.com/users/spandan-sharma/repos', 'events_url': 'https://api.github.com/users/spandan-sharma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/spandan-sharma/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-18T18:38:46Z,2025-11-18T18:38:46Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import asyncio
import json
from typing import Annotated, TypedDict

from langgraph.checkpoint.memory import InMemorySaver
from langgraph.graph import END, START, StateGraph, add_messages


class State(TypedDict):
    messages: Annotated[list[str], add_messages]


async def node1(state: State) -> State:
    print(""Node1 executing:"", state)
    return {""messages"": [""node1""]}


async def main():
    graph = StateGraph(State)
    graph.add_node(""node1"", node1)
    graph.add_edge(START, ""node1"")
    graph.add_edge(""node1"", END)

    checkpointer = InMemorySaver()
    workflow = graph.compile(checkpointer=checkpointer)

    thread_id = ""test-thread-1""
    config = {
        ""metadata"": {
            ""foo"": ""bar"",
        },
        ""configurable"": {
            ""thread_id"": thread_id,
        },
    }

    print(""Running graph with RunnableConfig:"")
    print(json.dumps(config, indent=2))
    await workflow.ainvoke({""messages"": []}, config=config)
    print(""\n"" + ""="" * 60)
    print(""State history:"")
    print(""="" * 60 + ""\n"")

    get_state_config = {""configurable"": {""thread_id"": thread_id}}
    async for snapshot in workflow.aget_state_history(config=get_state_config):
        print(""snapshot RunnableConfig:"")
        print(snapshot.config)
        print(""\nsnapshot CheckpointMetadata:"")
        print(snapshot.metadata)
        print(""\n"" + ""-"" * 60 + ""\n"")


if __name__ == ""__main__"":
    asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
Running graph with RunnableConfig:
{
  ""metadata"": {
    ""foo"": ""bar""
  },
  ""configurable"": {
    ""thread_id"": ""test-thread-1""
  }
}
Node1 executing: {'messages': []}

============================================================
State history:
============================================================

snapshot RunnableConfig:
{'configurable': {'thread_id': 'test-thread-1', 'checkpoint_ns': '', 'checkpoint_id': '1f0c4ac4-15e7-6ea6-8001-1150b7285acf'}}

snapshot CheckpointMetadata:
{'source': 'loop', 'step': 1, 'parents': {}, 'foo': 'bar'}

------------------------------------------------------------

snapshot RunnableConfig:
{'configurable': {'thread_id': 'test-thread-1', 'checkpoint_ns': '', 'checkpoint_id': '1f0c4ac4-15e6-6be6-8000-9923452d125c'}}

snapshot CheckpointMetadata:
{'source': 'loop', 'step': 0, 'parents': {}, 'foo': 'bar'}

------------------------------------------------------------

snapshot RunnableConfig:
{'configurable': {'thread_id': 'test-thread-1', 'checkpoint_ns': '', 'checkpoint_id': '1f0c4ac4-15df-6008-bfff-32845d236c59'}}

snapshot CheckpointMetadata:
{'source': 'input', 'step': -1, 'parents': {}, 'foo': 'bar'}

------------------------------------------------------------
```

### Description

This is a run of a simple graph. I fetch the state history after the graph finishes. I've injected metadata foo=bar in the config. In each `StateSnapshot` in `aget_state_history` I get my metadata inside `snapshot.metadata` instead of `snapshot.conifg['metadata']`.

Documentation says `snapshot.metadata`:

```
class CheckpointMetadata(TypedDict, total=False):
    """"""Metadata associated with a checkpoint.""""""

    source: Literal[""input"", ""loop"", ""update"", ""fork""]
    """"""The source of the checkpoint.
    [ ... ]
    """"""
    step: int
    """"""The step number of the checkpoint.
    [ ... ]
    """"""
    parents: dict[str, str]
    """"""The IDs of the parent checkpoints.

    Mapping from checkpoint namespace to checkpoint ID.
    """"""
```

so from that ^^^ I shouldn't be expecting to get my metadata there. snapshot.config OTOH is `RunnableConfig` the exact type where I had put my metadata while doing `workflow.ainvoke`. So I would also expect my metadata to be populated in `snapshot.config['metadata']`, but that's not the case.

Either this is a bug or the documentation needs to be clearer about what to expect where, what is the difference between `snapshot.config['metadata']` and `snapshot.metadata` etc.

### System Info

```
$ pip freeze | grep lang
langchain==1.0.7
langchain-classic==1.0.0
langchain-community==0.4.1
langchain-core==1.0.5
langchain-openai==1.0.3
langchain-text-splitters==1.0.0
langgraph==1.0.3
langgraph-checkpoint==3.0.1
langgraph-checkpoint-postgres==3.0.1
langgraph-checkpoint-sqlite==3.0.0
langgraph-prebuilt==1.0.4
langgraph-sdk==0.2.9
langsmith==0.4.43
```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6460/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6460/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6459,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6459/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6459/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6459/events,https://github.com/langchain-ai/langgraph/pull/6459,3639059697,PR_kwDOKFU0lc60KNP1,6459,feat: Add Goto type for atomic cross-graph handoffs,"{'login': 'Aaryan-549', 'id': 165829168, 'node_id': 'U_kgDOCeJaMA', 'avatar_url': 'https://avatars.githubusercontent.com/u/165829168?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Aaryan-549', 'html_url': 'https://github.com/Aaryan-549', 'followers_url': 'https://api.github.com/users/Aaryan-549/followers', 'following_url': 'https://api.github.com/users/Aaryan-549/following{/other_user}', 'gists_url': 'https://api.github.com/users/Aaryan-549/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Aaryan-549/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Aaryan-549/subscriptions', 'organizations_url': 'https://api.github.com/users/Aaryan-549/orgs', 'repos_url': 'https://api.github.com/users/Aaryan-549/repos', 'events_url': 'https://api.github.com/users/Aaryan-549/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Aaryan-549/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-18T16:39:43Z,2025-11-18T16:39:49Z,,NONE,,,,,"## **Description:** 
In Response to #6455.
Implements atomic cross-graph state updates and navigation by introducing a new `Goto` type. This enables nodes to update their local graph state, navigate to a different graph (parent/child/sibling), apply updates to the target graph, and execute the target node - all in a single atomic operation without requiring shim nodes.

## **Problem:**
Currently, performing a single atomic handoff from a subgraph to another graph that updates both source and target graph states requires hacky workarounds with shim nodes, which is error-prone and difficult to enforce consistently.

## **Solution:**
The `Goto` type allows developers to write:
```python
return Command(
    update={""messages"": [ToolMessage(content=""result"", tool_call_id=""1"")]},
    goto=Goto(
        graph=Command.PARENT,
        node=""agent"",
        update={""messages"": [AIMessage(content=""Routing back"")]}
    )
)
```
## Changes:

- Add Goto dataclass to types.py with graph, node, and update fields
- Extend Command.goto to accept Goto objects
- Modify map_command() in _io.py to handle Goto navigation
- Update _control_branch() in state.py to raise ParentCommand for cross-graph Gotos
- Update _loop.py to process 4-tuple format from map_command()
- Maintain full backward compatibility with existing Command usage

**Status:** Work in progress - Core infrastructure (70%) implemented, currently debugging cross-graph update propagation. Seeking feedback on approach before finalizing implementation. 
**Issue:** Closes #6358 
**Dependencies:** None 
**Twitter handle:** 0xaaryan
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6459/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6459/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6459', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6459', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6459.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6459.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6458,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6458/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6458/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6458/events,https://github.com/langchain-ai/langgraph/pull/6458,3638995404,PR_kwDOKFU0lc60J_GN,6458,fix(pregel): handle EmptyInputError for Command with stream_mode='values',"{'login': 'nicolasmota', 'id': 11512608, 'node_id': 'MDQ6VXNlcjExNTEyNjA4', 'avatar_url': 'https://avatars.githubusercontent.com/u/11512608?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/nicolasmota', 'html_url': 'https://github.com/nicolasmota', 'followers_url': 'https://api.github.com/users/nicolasmota/followers', 'following_url': 'https://api.github.com/users/nicolasmota/following{/other_user}', 'gists_url': 'https://api.github.com/users/nicolasmota/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/nicolasmota/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/nicolasmota/subscriptions', 'organizations_url': 'https://api.github.com/users/nicolasmota/orgs', 'repos_url': 'https://api.github.com/users/nicolasmota/repos', 'events_url': 'https://api.github.com/users/nicolasmota/events{/privacy}', 'received_events_url': 'https://api.github.com/users/nicolasmota/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-18T16:22:17Z,2025-11-18T16:22:23Z,,NONE,,,,,"I'm facing some errors related to undeclared resume_is_map variable.
```
  File ""/app/venv/lib/python3.11/site-packages/langgraph/pregel/main.py"", line 3179, in ainvoke
    async for chunk in self.astream(
  File ""/app/venv/lib/python3.11/site-packages/langgraph/pregel/main.py"", line 2914, in astream
    async with AsyncPregelLoop(
  File ""/app/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py"", line 1344, in __aenter__
    self.updated_channels = self._first(
  File ""/app/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py"", line 722, in _first
    if not writes and not resume_is_map:
UnboundLocalError: cannot access local variable 'resume_is_map' where it is not associated with a value
```
- This PR fixes this error declaring the default value for this Variable being possible to throw the error:EmptyInputError
- Added tests to ensure that invoking Command() with stream_mode='values' correctly raises EmptyInputError when input is empty, and that Command(resume=...) works as expected. 
- Updated imports to include EmptyInputError in relevant test files.

",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6458/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6458/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6458', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6458', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6458.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6458.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6456,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6456/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6456/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6456/events,https://github.com/langchain-ai/langgraph/issues/6456,3638788425,I_kwDOKFU0lc7Y44FJ,6456,TypeError: Object of type Send is not JSON serializable when using PostgresSaver checkpoint,"{'login': 'lasendo', 'id': 61889160, 'node_id': 'MDQ6VXNlcjYxODg5MTYw', 'avatar_url': 'https://avatars.githubusercontent.com/u/61889160?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lasendo', 'html_url': 'https://github.com/lasendo', 'followers_url': 'https://api.github.com/users/lasendo/followers', 'following_url': 'https://api.github.com/users/lasendo/following{/other_user}', 'gists_url': 'https://api.github.com/users/lasendo/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lasendo/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lasendo/subscriptions', 'organizations_url': 'https://api.github.com/users/lasendo/orgs', 'repos_url': 'https://api.github.com/users/lasendo/repos', 'events_url': 'https://api.github.com/users/lasendo/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lasendo/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-18T15:38:13Z,2025-11-18T15:45:16Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import operator
from typing import Annotated, TypedDict, List, Optional
from langgraph.graph import StateGraph, START, END
from langgraph.checkpoint.postgres import PostgresSaver
from langgraph.checkpoint.postgres.aio import AsyncPostgresSaver
from langgraph.checkpoint.memory import MemorySaver
from langgraph.constants import Send

class OverallState(TypedDict):
    topics: List[str] = [""fine arts"", 'firefighters', 'maths']
    jokes: Annotated[List[str], operator.add]
    all_jokes: str

default_state = OverallState(topics=[""fine arts"", 'firefighters', 'maths'],
                                   jokes=[], all_jokes="""")

class JokeState(TypedDict):
    topic: str

def send_topics(state: OverallState):
    print(""Sending joke creation"")
    return [Send(""create_joke"", JokeState(topic=topic)) for topic in state[""topics""]]

def create_joke(joke_state: JokeState) -> dict:
    return {""jokes"": [f'Joke for topic {joke_state[""topic""]}']}

def reduce_jokes(state: OverallState) -> dict:
    print(""Merge jokes"")
    return {""all_jokes"": ""\n"".join(state['jokes'])} 


def main():
    print(""Creating graph with..."")
    
    # Create graph
    workflow = StateGraph(OverallState)
    workflow.add_node(""create_joke"", create_joke)
    workflow.add_node(""reduce_jokes"", reduce_jokes)
    workflow.add_conditional_edges(START, send_topics, {""create_joke""})
    workflow.add_edge(""create_joke"", ""reduce_jokes"")
    workflow.add_edge(""reduce_jokes"", END)
    

    # Try with Memory checkpointing (this should work)
    print(""\nTrying with Memory checkpointing..."")
    try:
        checkpointer = MemorySaver()
        app = workflow.compile(checkpointer=checkpointer)
        
        print(""Running graph with Memory checkpointing..."")
        result = app.invoke(default_state, config={'configurable': {'thread_id': ""1""}})
        print(f""Result: {result}"")
        
    except Exception as e:
        print(f""Error with Memory checkpointing: {e}"")
        raise e


    # Try with Postgres checkpointing (this should fail)
    try:
        with PostgresSaver.from_conn_string(
            ""postgresql://test_user:test_password@postgres:9999/test_db"") as checkpointer:
            checkpointer.setup()
            app = workflow.compile(checkpointer=checkpointer)
            
            print(""\n\nRunning graph with Postgres checkpointing..."")
            result = app.invoke(default_state, config={'configurable': {'thread_id': ""1""}})
            print(f""Result: {result}"")
        
    except Exception as e:
        print(f""Error with Postgres checkpointing: {e}"")
        raise e

if __name__ == ""__main__"":
    main()
```

### Error Message and Stack Trace (if applicable)

```shell
TypeError: Object of type Send is not JSON serializable
 Traceback (most recent call last):
   File ""/app/app.py"", line 75, in <module>
     main()
   File ""/app/app.py"", line 72, in main
     raise e
   File ""/app/app.py"", line 67, in main
     result = app.invoke(default_state, config={'configurable': {'thread_id': ""1""}})
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/__init__.py"", line 1927, in invoke
     for chunk in self.stream(
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/__init__.py"", line 1596, in stream
     with SyncPregelLoop(
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/loop.py"", line 874, in __exit__
     return self.stack.__exit__(exc_type, exc_value, traceback)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/contextlib.py"", line 601, in __exit__
     raise exc_details[1]
   File ""/usr/local/lib/python3.11/contextlib.py"", line 586, in __exit__
     if cb(*exc_details):
        ^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/executor.py"", line 107, in __exit__
     task.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 449, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/executor.py"", line 70, in done
     task.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 449, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/concurrent/futures/thread.py"", line 58, in run
     result = self.fn(*self.args, **self.kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/loop.py"", line 799, in _checkpointer_put_after_previous
     prev.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 456, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/executor.py"", line 70, in done
     task.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 449, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/concurrent/futures/thread.py"", line 58, in run
     result = self.fn(*self.args, **self.kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/loop.py"", line 799, in _checkpointer_put_after_previous
     prev.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 456, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/executor.py"", line 70, in done
     task.result()
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 449, in result
     return self.__get_result()
            ^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/concurrent/futures/_base.py"", line 401, in __get_result
     raise self._exception
   File ""/usr/local/lib/python3.11/concurrent/futures/thread.py"", line 58, in run
     result = self.fn(*self.args, **self.kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/langgraph/pregel/loop.py"", line 801, in _checkpointer_put_after_previous
     cast(BaseCheckpointSaver, self.checkpointer).put(
   File ""/usr/local/lib/python3.11/site-packages/langgraph/checkpoint/postgres/__init__.py"", line 321, in put
     cur.execute(
   File ""/usr/local/lib/python3.11/site-packages/psycopg/cursor.py"", line 93, in execute
     self._conn.wait(
   File ""/usr/local/lib/python3.11/site-packages/psycopg/connection.py"", line 453, in wait
     return waiting.wait(gen, self.pgconn.socket, interval=interval)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""psycopg_binary/_psycopg/waiting.pyx"", line 219, in psycopg_binary._psycopg.wait_c
   File ""/usr/local/lib/python3.11/site-packages/psycopg/_cursor_base.py"", line 194, in _execute_gen
     pgq = self._convert_query(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/site-packages/psycopg/_cursor_base.py"", line 453, in _convert_query
     pgq.convert(query, params)
   File ""/usr/local/lib/python3.11/site-packages/psycopg/_queries.py"", line 95, in convert
     self.dump(vars)
   File ""/usr/local/lib/python3.11/site-packages/psycopg/_queries.py"", line 106, in dump
     self.params = self._tx.dump_sequence(params, self._want_formats)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""psycopg_binary/_psycopg/transform.pyx"", line 353, in psycopg_binary._psycopg.Transformer.dump_sequence
   File ""psycopg_binary/_psycopg/transform.pyx"", line 404, in psycopg_binary._psycopg.Transformer.dump_sequence
   File ""/usr/local/lib/python3.11/site-packages/psycopg/types/json.py"", line 218, in dump
     if isinstance((data := dumps(obj)), str):
                            ^^^^^^^^^^
   File ""/usr/local/lib/python3.11/json/__init__.py"", line 231, in dumps
     return _default_encoder.encode(obj)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/json/encoder.py"", line 200, in encode
     chunks = self.iterencode(o, _one_shot=True)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/json/encoder.py"", line 258, in iterencode
     return _iterencode(o, 0)
            ^^^^^^^^^^^^^^^^^
   File ""/usr/local/lib/python3.11/json/encoder.py"", line 180, in default
     raise TypeError(f'Object of type {o.__class__.__name__} '
 TypeError: Object of type Send is not JSON serializable
```

### Description

Recently I wanted to persist the checkpoint data of my graph. I imported PostgresSaver (actually AsyncPosgresSaver) and figured out how to call this from the documentation: https://docs.langchain.com/oss/python/langgraph/add-memory#example-using-postgres-checkpointer.

However, I found that my implementation using `Send` as specified in many Map-Reduce implementations using LangGraph (e.g. https://www.youtube.com/watch?v=JQznvlSatPQ) raises a `TypeError` due to the `Send` class not being JSON serializable.

I found some other issues regarding serialization, but none are specific to this scenario.


The code shows that whereas with `MemorySaver` it works, with the database and `PostgresSaver` there is a need to serialize data, which turns out to contain the `Send`. 

The output shown at the termina when I perform `docker compose up` for the app container is:

```console
Creating graph with...
 
 Trying with Memory checkpointing...
 Running graph with Memory checkpointing...
 Sending joke creation
 Merge jokes
 Result: {'topics': ['fine arts', 'firefighters', 'maths'], 'jokes': ['Joke for topic fine arts', 'Joke for topic firefighters', 'Joke for topic maths'], 'all_jokes': 'Joke for topic fine arts\nJoke for topic firefighters\nJoke for topic maths'}
 
 
 Running graph with Postgres checkpointing...
 Sending joke creation
 Merge jokes
 Error with Postgres checkpointing: Object of type Send is not JSON serializable
```

### System Info

I am using dockercompose:

```docker-compose.yml
services:

  postgres:
    image: postgres
    restart: always
    environment:
      - POSTGRES_USER=test_user
      - POSTGRES_PASSWORD=test_password
      - POSTGRES_DB=test_db
      - PGPORT=9999
    ports:
      - 9999:9999
    volumes:
      - postgres_data:/var/lib/postgresql/data

  app:
    build: .
    depends_on:
      - postgres
    environment:
      - POSTGRES_HOST=postgres
      - POSTGRES_PORT=9999
      - POSTGRES_DB=test_db
      - POSTGRES_USER=test_user
      - POSTGRES_PASSWORD=test_password
    volumes:
      - .:/app/

volumes:
  postgres_data:
```

Where the Dockerfile for app is:

```DockerFile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD [""python"", ""app.py""]
```

The requirements:

```requirements.txt
langchain==0.3.9
langchain-community==0.3.8
langchain-core==0.3.21
langchain-experimental==0.3.3
langgraph==0.2.53
langgraph-checkpoint==2.1.2
langgraph-checkpoint-postgres==3.0.1
langgraph-sdk==0.1.40
psycopg[binary,pool]
psycopg==3.2.12
psycopg-pool==3.2.7
pydantic==2.10.2
```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6456/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6456/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6455,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6455/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6455/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6455/events,https://github.com/langchain-ai/langgraph/issues/6455,3634044527,I_kwDOKFU0lc7Ymx5v,6455,Transactional Cross-Graph Handoff,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-17T16:22:38Z,2025-11-18T16:47:23Z,,COLLABORATOR,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","
### Discussed in https://github.com/langchain-ai/langgraph/discussions/6358

<div type='discussions-op-text'>

<sup>Originally posted by **nanodan** October 28, 2025</sup>
It is currently not possible in Python LangGraph to perform a single atomic handoff from a subgraph to another graph that:

1. Updates the current graphâ€™s state (e.g., pair a tool call locally)
2. Jumps to a different graph
3. Applies updates in the new graph (e.g., breadcrumb / pairing)
4. Guarantees the output history is LLM-valid in both source and target graph (no dangling tool_call)

The `Command` object forces routing logic to be implemented via extra shim nodes or LLM-wrappers, even for simple handoff cases.
This is error-prone and difficult to enforce consistently across routing tools.

I'm suggesting/requesting a modification to `Command` that enables a transactional cross-graph update + goto in one `Command`.

As an example, suppose you have an architecture like below:
<img width=""531""  alt=""graph"" src=""https://github.com/user-attachments/assets/687a53fb-4243-428a-a8e1-9d17c9228af4"" />

One of the ""tools"" is exposed to the LLM as a tool (via bind tools), however the output of that tool node is actually a `Command` object that contains a state update and a `goto` target in another graph. Let's say the LLM-agent and LLM2 are two different subgraphs within a parent graph. Our router might have something like:
```
Command(graph=Command.PARENT, update={<some update>}, goto=<LLM2>)
```

This command will pass the update dict to the state in the parent graph, before then executing the `goto` to enter the subgraph node for LLM2. The problem with this, is now we have a ""dangling"" tool message in the message history for the LLM graph. If we have a global shared message stack (e.g. using the common `messages`) then as part of the update we can append a ""routing to..."" or equivalent tool ""response"" to keep the message stack unbroken (most providers do not accept dangling tool calls with no response). So if we later end up back in our source subgraph, we have a broken message stack.

As soon as we do not have a shared message stack (e.g. each subgraph keeps its own pure message history) we have a problem. We have no way with how `Command` is currently implemented to update the ""source"" graph state and the ""target"" graph state if we are leaving the current graph. We only update the state for the target graph specified in the `graph` argument for `Command`. This necessitates some ""hacky"" workarounds such as adding hidden/dummy/shim nodes to each subgraph that all routing commands go to first, to update the state locally, and then continue on with the routing command.

```
subgraph: tool
    â†“ (local update)
subgraph: __handoff_up   â† developer-maintained shim
    â†“ (Command.PARENT + update)
parent:
```

This shim is not domain-meaningful; it exists only because of SDK constraints. If developers forget to add it, history correctness and tool pairing break. The main problems are:

- Every subgraph a routing tool might escape from must define a shim node in the graph
- Tools canâ€™t be plug-and-play unless each subgraph has this shim-style infrastructure
- Easy to mis-wire or omit the shim which leads to a dangling tool_call history and subsequent LLM errors
- This pattern has no semantic meaning; itâ€™s structural overhead due to the SDK limitation

I'm suggesting something like this instead:
```
return Command.txn(
    local_update={      # apply in current graph
        ""local_messages"": [
            ToolMessage(...),
            AIMessage(""handoffâ€¦"")
        ]
    },
    goto=Goto(
        graph=Command.PARENT,
        node=""some_node"",
        update={        # apply in parent graph
            ""parent_messages"": [AIMessage(""Router â†’ QueryAgent"")] # e.g.
        }
    ),
)
```
Requirements:
- local_update runs first updating CURRENT/local state, using CURRENT graphâ€™s reducers
- After local apply, jump to target graph
- Then the update within Goto applies on TARGET graph state using the TARGET graph reducers
- Then execute/goto target node

I think this would be backwards compatible.</div>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6455/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6455/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6454,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6454/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6454/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6454/events,https://github.com/langchain-ai/langgraph/pull/6454,3631234192,PR_kwDOKFU0lc6zv7WI,6454,chore(docs): Update OpenAPI spec from LangGraph API v0.5.14,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-16T22:53:10Z,2025-11-16T22:53:30Z,,CONTRIBUTOR,,,,,"This PR updates the OpenAPI specification with changes detected from the LangGraph API server.

**Changes detected as of LangGraph API version 0.5.14**

This update was automatically generated by the sync workflow in the langgraph-api repository.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6454/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6454/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6454', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6454', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6454.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6454.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6453,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6453/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6453/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6453/events,https://github.com/langchain-ai/langgraph/pull/6453,3629098256,PR_kwDOKFU0lc6zo2a4,6453,feat: add asyncpg support for postgres checkpoint,"{'login': 'Georgedyatmsk1405', 'id': 88557658, 'node_id': 'MDQ6VXNlcjg4NTU3NjU4', 'avatar_url': 'https://avatars.githubusercontent.com/u/88557658?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Georgedyatmsk1405', 'html_url': 'https://github.com/Georgedyatmsk1405', 'followers_url': 'https://api.github.com/users/Georgedyatmsk1405/followers', 'following_url': 'https://api.github.com/users/Georgedyatmsk1405/following{/other_user}', 'gists_url': 'https://api.github.com/users/Georgedyatmsk1405/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Georgedyatmsk1405/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Georgedyatmsk1405/subscriptions', 'organizations_url': 'https://api.github.com/users/Georgedyatmsk1405/orgs', 'repos_url': 'https://api.github.com/users/Georgedyatmsk1405/repos', 'events_url': 'https://api.github.com/users/Georgedyatmsk1405/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Georgedyatmsk1405/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-15T18:50:13Z,2025-11-15T19:04:42Z,,NONE,,,,,"**Description:** This PR adds support for asyncpg as an alternative database driver for Postgres checkpoints, providing users with choice between psycopg and asyncpg based on their performance needs and licensing preferences. The implementation maintains full backward compatibility with existing psycopg-based code while offering a new asyncpg implementation with identical API.

Key changes:
- Added new `AsyncPgPostgresSaver` class using asyncpg in `langgraph/checkpoint/postgres_asyncpg/`
- Added optional dependencies for asyncpg in pyproject.toml
- Comprehensive test coverage for the new asyncpg implementation
- All existing tests continue to pass with psycopg
- No breaking changes to existing APIs
- `AsyncPgPostgresSaver` works without installing psycopg

**Issue:** N/A (feature enhancement)

**Dependencies:** 
- Added `asyncpg>=0.29.0` as optional dependency
- All existing dependencies remain unchanged
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6453/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6453/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6453', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6453', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6453.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6453.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6452,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6452/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6452/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6452/events,https://github.com/langchain-ai/langgraph/pull/6452,3629025790,PR_kwDOKFU0lc6zomuH,6452,chore(deps): bump js-yaml from 4.1.0 to 4.1.1 in /docs/_scripts/js_translation/codeblocks,"{'login': 'dependabot[bot]', 'id': 49699333, 'node_id': 'MDM6Qm90NDk2OTkzMzM=', 'avatar_url': 'https://avatars.githubusercontent.com/in/29110?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/dependabot%5Bbot%5D', 'html_url': 'https://github.com/apps/dependabot', 'followers_url': 'https://api.github.com/users/dependabot%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/dependabot%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/dependabot%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/dependabot%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}, {'id': 7367967763, 'node_id': 'LA_kwDOKFU0lc8AAAABtypEEw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/javascript', 'name': 'javascript', 'color': '168700', 'default': False, 'description': 'Pull requests that update Javascript code'}]",open,False,,[],,1,2025-11-15T18:03:12Z,2025-11-15T18:03:32Z,,CONTRIBUTOR,,,,,"Bumps [js-yaml](https://github.com/nodeca/js-yaml) from 4.1.0 to 4.1.1.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/nodeca/js-yaml/blob/master/CHANGELOG.md"">js-yaml's changelog</a>.</em></p>
<blockquote>
<h2>[4.1.1] - 2025-11-12</h2>
<h3>Security</h3>
<ul>
<li>Fix prototype pollution issue in yaml merge (&lt;&lt;) operator.</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/nodeca/js-yaml/commit/cc482e775913e6625137572a3712d2826170e53a""><code>cc482e7</code></a> 4.1.1 released</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/50968b862e75866ef90e626572fe0b2f97b55f9f""><code>50968b8</code></a> dist rebuild</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/d092d866031751cb27c12d93f3e2470ad74d678b""><code>d092d86</code></a> lint fix</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/383665ff4248ec2192d1274e934462bb30426879""><code>383665f</code></a> fix prototype pollution in merge (&lt;&lt;)</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/0d3ca7a27b03a6c974790a30a89e456007d62976""><code>0d3ca7a</code></a> README.md: HTTP =&gt; HTTPS (<a href=""https://redirect.github.com/nodeca/js-yaml/issues/678"">#678</a>)</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/49baadd52af887d2991e2c39a6639baa56d6c71b""><code>49baadd</code></a> doc: 'empty' style option for !!null</li>
<li><a href=""https://github.com/nodeca/js-yaml/commit/ba3460eb9d3e4478edcbc29edabe17c2157fc9ce""><code>ba3460e</code></a> Fix demo link (<a href=""https://redirect.github.com/nodeca/js-yaml/issues/618"">#618</a>)</li>
<li>See full diff in <a href=""https://github.com/nodeca/js-yaml/compare/4.1.0...4.1.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=js-yaml&package-manager=npm_and_yarn&previous-version=4.1.0&new-version=4.1.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/langchain-ai/langgraph/network/alerts).

</details>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6452/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6452/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6452', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6452', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6452.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6452.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6451,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6451/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6451/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6451/events,https://github.com/langchain-ai/langgraph/issues/6451,3628027409,I_kwDOKFU0lc7YP04R,6451,"create_agent In ""astream"" with stream_mode=""messages"" does not output tokens incrementally.","{'login': 'nswsnb', 'id': 55875979, 'node_id': 'MDQ6VXNlcjU1ODc1OTc5', 'avatar_url': 'https://avatars.githubusercontent.com/u/55875979?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/nswsnb', 'html_url': 'https://github.com/nswsnb', 'followers_url': 'https://api.github.com/users/nswsnb/followers', 'following_url': 'https://api.github.com/users/nswsnb/following{/other_user}', 'gists_url': 'https://api.github.com/users/nswsnb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/nswsnb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/nswsnb/subscriptions', 'organizations_url': 'https://api.github.com/users/nswsnb/orgs', 'repos_url': 'https://api.github.com/users/nswsnb/repos', 'events_url': 'https://api.github.com/users/nswsnb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/nswsnb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,2,2025-11-15T04:34:26Z,2025-11-16T18:33:52Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import asyncio

from langchain.agents import create_agent
from langchain_openai import ChatOpenAI


modelOpenAI = ChatOpenAI(
        model=""***"",
        base_url=""***"",
        api_key=""***"", 
    )

agent = create_agent(
    model=modelOpenAI,
    system_prompt=""You are a helpful assistant"",

)

async def main():
    async for token, metadata in agent.astream(
            {""messages"": [{""role"": ""user"", ""content"": ""hello who are you?""}]},
            stream_mode=""messages"",
            stream_subgraphs=True
    ):
        print(token.content)


if __name__ == '__main__':
    asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
Output:
Hello! Iâ€™m your AI assistant, here to help answer your questions, provide information, or assist with tasks. You can think of me as a friendly digital helper. How can I assist you today? ðŸ˜Š
```

### Description

I'm trying to use create_agent in astream with stream_mode=""messages"", but the output is not generated token by token.

### System Info

version:

<img width=""642"" height=""680"" alt=""Image"" src=""https://github.com/user-attachments/assets/a9fe9581-8ffa-4249-aa3d-5992de559add"" />",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6451/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6451/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6450,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6450/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6450/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6450/events,https://github.com/langchain-ai/langgraph/pull/6450,3627566286,PR_kwDOKFU0lc6zjx-v,6450,refactor: separate prepare_push_* functions,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-14T23:56:53Z,2025-11-15T00:13:05Z,2025-11-15T00:13:03Z,CONTRIBUTOR,,,,,"Extract two common cases from the big switch statement of `prepare_single_task` since it's a tad more composable.

All this does is shift/extract code to separate functions","{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6450/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6450/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6450', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6450', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6450.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6450.patch', 'merged_at': '2025-11-15T00:13:03Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6449,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6449/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6449/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6449/events,https://github.com/langchain-ai/langgraph/issues/6449,3627286070,I_kwDOKFU0lc7YM_42,6449,`ToolException` from MCP server not handled correclty,"{'login': 'jgomezve', 'id': 10689893, 'node_id': 'MDQ6VXNlcjEwNjg5ODkz', 'avatar_url': 'https://avatars.githubusercontent.com/u/10689893?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jgomezve', 'html_url': 'https://github.com/jgomezve', 'followers_url': 'https://api.github.com/users/jgomezve/followers', 'following_url': 'https://api.github.com/users/jgomezve/following{/other_user}', 'gists_url': 'https://api.github.com/users/jgomezve/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jgomezve/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jgomezve/subscriptions', 'organizations_url': 'https://api.github.com/users/jgomezve/orgs', 'repos_url': 'https://api.github.com/users/jgomezve/repos', 'events_url': 'https://api.github.com/users/jgomezve/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jgomezve/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-14T21:46:35Z,2025-11-14T21:46:35Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import asyncio
from langchain_mcp_adapters.client import MultiServerMCPClient
from langchain_openai import AzureChatOpenAI
import os
from dotenv import load_dotenv
from auth.oauth_login import get_oauth_token
from langchain.agents import create_agent
from system.prompts import agent_prompt

load_dotenv()
AZURE_ENDPOINT = ""https://chat-ai.acme.com""

async def main():
    client = MultiServerMCPClient({
        ""github"": {
            ""command"": ""docker"",
            ""args"": [""run"", ""-i"", ""--rm"",
                        ""-e"", ""GITHUB_PERSONAL_ACCESS_TOKEN"",
                        ""-e"", ""GITHUB_HOST"",
                        ""ghcr.io/github/github-mcp-server""],
            ""env"": {
                ""GITHUB_PERSONAL_ACCESS_TOKEN"": os.getenv('GITHUB_PERSONAL_ACCESS_TOKEN'),
                ""GITHUB_HOST"": os.getenv('GITHUB_HOST'),
            },
            ""transport"": ""stdio"",
    
        }
    })


    tools = await client.get_tools()
    app_key = os.getenv('APP_KEY')
    model =  AzureChatOpenAI(
                            deployment_name=""gpt-4.1"",
                            azure_endpoint=AZURE_ENDPOINT,
                            api_key=get_oauth_token(),
                            api_version=""2023-08-01-preview"",
                            model_kwargs=dict(user=f'{{""appkey"": ""{app_key}""}}')
                        )
    agent = create_agent(model, tools)
    response = await agent.ainvoke({""messages"": ""Could you please list all the issues in the GitHub repo TheWrongRepo?""})

    for msg in response['messages']:
        print(type(msg))
        print(msg.content)

    print(response['messages'][-1].content)

asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
Traceback (most recent call last):
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/test_bot.py"", line 49, in <module>
    asyncio.run(main())
  File ""/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py"", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py"", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/test_bot.py"", line 41, in main
    response = await agent.ainvoke({""messages"": ""Could you please list all the issues in the GitHub repo fsdfdfs?""})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/pregel/main.py"", line 3137, in ainvoke
    async for chunk in self.astream(
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/pregel/main.py"", line 2956, in astream
    async for _ in runner.atick(
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py"", line 304, in atick
    await arun_with_retry(
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py"", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py"", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py"", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 763, in _afunc
    outputs = await asyncio.gather(*coros)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 1102, in _arun_one
    return await self._execute_tool_async(tool_request, input_type, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 1051, in _execute_tool_async
    content = _handle_tool_error(e, flag=self._handle_tool_errors)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 407, in _handle_tool_error
    content = flag(e)  # type: ignore [assignment, call-arg]
              ^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 364, in _default_handle_tool_errors
    raise e
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langgraph/prebuilt/tool_node.py"", line 1004, in _execute_tool_async
    response = await tool.ainvoke(call_args, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_core/tools/structured.py"", line 63, in ainvoke
    return await super().ainvoke(input, config, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_core/tools/base.py"", line 608, in ainvoke
    return await self.arun(tool_input, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_core/tools/base.py"", line 1036, in arun
    raise error_to_raise
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_core/tools/base.py"", line 1002, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_core/tools/structured.py"", line 117, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py"", line 148, in call_tool
    return _convert_call_tool_result(call_tool_result)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/jgomezve/Documents/Development/ai/mcp_a2a/venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py"", line 58, in _convert_call_tool_result
    raise ToolException(tool_content)
langchain_core.tools.base.ToolException: Could not resolve to a Repository with the name 'TheWrongRepo/TheWrongRepo'.
```

### Description

During a error inside the ToolNode the exception is not properly handled. I managed to workaround it by modifying the method `_default_handle_tool_errors` in https://github.com/langchain-ai/langgraph/blob/056ba91a7147fb443c2ae26092b9a4f206d9a91c/libs/prebuilt/langgraph/prebuilt/tool_node.py#L353

This is my implementation

```python
def _default_handle_tool_errors(e: Exception) -> str:
    """"""Default error handler for tool errors.

    If the tool is a tool invocation error, return its message.
    Otherwise, raise the error.

    """"""

    if isinstance(e, ToolInvocationError):
        return e.message
    elif isinstance(e, ToolException):
        return str(e)
    raise e

```

Let me know if I should open this in the `langchain_mcp_adapters` repo

### System Info

```
(venv) $ python -m langchain_core.sys_info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.6.0: Mon Aug 11 21:16:05 PDT 2025; root:xnu-11417.140.69.701.11~1/RELEASE_X86_64
> Python Version:  3.12.0 (v3.12.0:0fb18b02c8, Oct  2 2023, 09:45:56) [Clang 13.0.0 (clang-1300.0.29.30)]

Package Information
-------------------
> langchain_core: 1.0.5
> langchain: 1.0.5
> langsmith: 0.4.38
> langchain_mcp_adapters: 0.1.11
> langchain_openai: 1.0.1
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> httpx: 0.28.1
> jsonpatch: 1.33
> langgraph: 1.0.3
> mcp: 1.19.0
> openai: 2.6.1
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.3
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 14.2.0
> tenacity: 9.1.2
> tiktoken: 0.12.0
> typing-extensions: 4.15.0
> zstandard: 0.25.0
```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6449/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6449/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6448,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6448/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6448/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6448/events,https://github.com/langchain-ai/langgraph/pull/6448,3625775670,PR_kwDOKFU0lc6zdxV1,6448,fix(checkpoint): InMemorySaver context managers should return self instance,"{'login': 'lexi-k', 'id': 69981673, 'node_id': 'MDQ6VXNlcjY5OTgxNjcz', 'avatar_url': 'https://avatars.githubusercontent.com/u/69981673?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lexi-k', 'html_url': 'https://github.com/lexi-k', 'followers_url': 'https://api.github.com/users/lexi-k/followers', 'following_url': 'https://api.github.com/users/lexi-k/following{/other_user}', 'gists_url': 'https://api.github.com/users/lexi-k/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lexi-k/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lexi-k/subscriptions', 'organizations_url': 'https://api.github.com/users/lexi-k/orgs', 'repos_url': 'https://api.github.com/users/lexi-k/repos', 'events_url': 'https://api.github.com/users/lexi-k/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lexi-k/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-14T14:07:29Z,2025-11-14T14:07:34Z,,NONE,,,,,"Hello, I believe that the `__enter__` and `__aenter__` functions of the `InMemorySaver` class should return `self` instances. I tried wrapping checkpointers in a custom function in our library that returns `AbstractAsyncContextManager`s and found out that actually this does not work as IMO intended for the `InMemorySaver`. 

In this PR I am proposing a fix and adding two simple test cases.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6448/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6448/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6448', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6448', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6448.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6448.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6447,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6447/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6447/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6447/events,https://github.com/langchain-ai/langgraph/issues/6447,3625641824,I_kwDOKFU0lc7YGudg,6447,Async tools do not currently support 'custom' events streaming via get_stream_writer().,"{'login': 'bharathiselvan', 'id': 16302752, 'node_id': 'MDQ6VXNlcjE2MzAyNzUy', 'avatar_url': 'https://avatars.githubusercontent.com/u/16302752?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/bharathiselvan', 'html_url': 'https://github.com/bharathiselvan', 'followers_url': 'https://api.github.com/users/bharathiselvan/followers', 'following_url': 'https://api.github.com/users/bharathiselvan/following{/other_user}', 'gists_url': 'https://api.github.com/users/bharathiselvan/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/bharathiselvan/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/bharathiselvan/subscriptions', 'organizations_url': 'https://api.github.com/users/bharathiselvan/orgs', 'repos_url': 'https://api.github.com/users/bharathiselvan/repos', 'events_url': 'https://api.github.com/users/bharathiselvan/events{/privacy}', 'received_events_url': 'https://api.github.com/users/bharathiselvan/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,1,2025-11-14T13:30:10Z,2025-11-14T18:24:25Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langchain_core.tools import tool
from langgraph.config import get_stream_writer

@tool
async def test_async_tool():
    writer = get_stream_writer()
    print(""Writer:"", writer)
    writer(""Hello from async tool"")
    return ""done""
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

When running astream in custom stream mode, the emitted message is not captured. This behavior only occurs with async tools; sync tools stream messages correctly.

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.26100
> Python Version:  3.13.7 (tags/v3.13.7:bcee1c3, Aug 14 2025, 14:15:11) [MSC v.1944 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.3
> langchain: 1.0.3
> langsmith: 0.4.41
> langchain_openai: 1.0.2
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> claude-agent-sdk: Installed. No version info available.
> httpx: 0.28.1
> jsonpatch: 1.33
> langchain-anthropic: Installed. No version info available.
> langchain-aws: Installed. No version info available.
> langchain-community: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-huggingface: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langsmith-pyo3: Installed. No version info available.
> openai: 2.7.1
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.38.0
> opentelemetry-exporter-otlp-proto-http: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.4
> pytest: Installed. No version info available.
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: Installed. No version info available.
> tenacity: 9.1.2
> tiktoken: 0.12.0
> typing-extensions: 4.15.0
> vcrpy: Installed. No version info available.
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6447/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6447/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6446,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6446/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6446/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6446/events,https://github.com/langchain-ai/langgraph/issues/6446,3624988428,I_kwDOKFU0lc7YEO8M,6446,GitHub Issue Title: InvalidUpdateError when using parallel subgraphs with shared state keys in LangGraph,"{'login': 'Ocyss', 'id': 68412205, 'node_id': 'MDQ6VXNlcjY4NDEyMjA1', 'avatar_url': 'https://avatars.githubusercontent.com/u/68412205?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Ocyss', 'html_url': 'https://github.com/Ocyss', 'followers_url': 'https://api.github.com/users/Ocyss/followers', 'following_url': 'https://api.github.com/users/Ocyss/following{/other_user}', 'gists_url': 'https://api.github.com/users/Ocyss/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Ocyss/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Ocyss/subscriptions', 'organizations_url': 'https://api.github.com/users/Ocyss/orgs', 'repos_url': 'https://api.github.com/users/Ocyss/repos', 'events_url': 'https://api.github.com/users/Ocyss/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Ocyss/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-14T10:27:27Z,2025-11-14T10:27:27Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from datetime import datetime, timedelta
from typing import TypedDict

from langgraph.graph import END, START, StateGraph

# @dataclass
# class State:
#     a: int
#     b: str
#     s1: int = 0
#     s2: int = 0


class State(TypedDict):
    a: int
    b: str
    s1: int
    s2: int


def nodea(state: State):
    return {""a"": int(datetime.now().timestamp() * 1000)}


def subnode1(state: State):
    return {""s1"": int(datetime.now().timestamp() * 1000)}


def subnode2(state: State):
    return {""s2"": int(datetime.now().timestamp() * 1000)}


def nodeb(state: State):
    return {""b"": (datetime.now() - timedelta(days=365)).isoformat()}


def subgraph():
    builder = StateGraph(State)
    builder.add_node(""subnode1"", subnode1)
    builder.add_node(""subnode2"", subnode2)

    builder.add_edge(START, ""subnode1"")
    builder.add_edge(START, ""subnode2"")
    return builder.compile()


def create_graph():
    builder = StateGraph(State)

    builder.add_node(""nodea"", nodea)
    builder.add_node(""subgraph"", subgraph())
    builder.add_node(""nodeb"", nodeb)

    builder.add_edge(START, ""nodea"")
    builder.add_edge(""nodea"", ""nodeb"")
    builder.add_edge(""nodea"", ""subgraph"")
    builder.add_edge(""nodeb"", END)
    builder.add_edge(""subgraph"", END)
    return builder.compile()


graph = create_graph()

if __name__ == ""__main__"":
    print(
        graph.invoke(
            {
                ""a"": 123,
                ""b"": ""123"",
                ""s1"": 0,
                ""s2"": 0,
            }
        )
    )
```

### Error Message and Stack Trace (if applicable)

```shell
langgraph.errors.InvalidUpdateError: At key 'b': Can receive only one value per step. Use an Annotated key to handle multiple values.
For troubleshooting, visit: https://docs.langchain.com/oss/python/langgraph/errors/INVALID_CONCURRENT_GRAPH_UPDATE
```

### Description


When a subgraph is executed in parallel with other nodes in the parent graph (e.g., via multiple outgoing edges from a common node), LangGraph raises an `InvalidUpdateError` even if the subgraph and parent nodes update **different state keys**.

Specifically:

```python
langgraph.errors.InvalidUpdateError: At key 'b': Can receive only one value per step. 
Use an Annotated key to handle multiple values.
```

This error occurs **even when the subgraph does not modify key `b`**, and `b` is only updated by a node in the parent graph (e.g., `nodeb`).


### System Info

System Information
------------------
> OS:  Linux
> OS Version:  #1 SMP PREEMPT_DYNAMIC Thu Jun  5 18:30:46 UTC 2025
> Python Version:  3.13.9 (main, Oct 28 2025, 12:10:42) [Clang 20.1.4 ]

Package Information
-------------------
> langchain_core: 1.0.4
> langchain: 1.0.5
> langchain_community: 0.4.1
> langsmith: 0.4.42
> langchain_classic: 1.0.0
> langchain_huggingface: 1.0.1
> langchain_openai: 1.0.2
> langchain_text_splitters: 1.0.0
> langgraph_sdk: 0.2.9",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6446/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6446/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6443,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6443/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6443/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6443/events,https://github.com/langchain-ai/langgraph/pull/6443,3622395046,PR_kwDOKFU0lc6zSh2A,6443,fix: dep warnings in prebuilt,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-13T18:49:22Z,2025-11-13T18:59:37Z,2025-11-13T18:59:34Z,COLLABORATOR,,,,,,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6443/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6443/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6443', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6443', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6443.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6443.patch', 'merged_at': '2025-11-13T18:59:34Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6442,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6442/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6442/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6442/events,https://github.com/langchain-ai/langgraph/pull/6442,3622358691,PR_kwDOKFU0lc6zSaCu,6442,chore(docs): add more redirects  + catchall,"{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-13T18:39:16Z,2025-11-13T19:49:43Z,2025-11-13T19:49:41Z,CONTRIBUTOR,,,,,,"{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6442/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6442/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6442', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6442', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6442.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6442.patch', 'merged_at': '2025-11-13T19:49:41Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6441,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6441/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6441/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6441/events,https://github.com/langchain-ai/langgraph/pull/6441,3622353745,PR_kwDOKFU0lc6zSZLO,6441,release: prebuilt 1.0.3,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-13T18:38:05Z,2025-11-13T18:38:26Z,2025-11-13T18:38:24Z,COLLABORATOR,,,,,,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6441/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6441/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6441', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6441', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6441.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6441.patch', 'merged_at': '2025-11-13T18:38:24Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6440,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6440/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6440/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6440/events,https://github.com/langchain-ai/langgraph/pull/6440,3621521761,PR_kwDOKFU0lc6zPmis,6440,fix: tidy up deprecation warnings,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-13T14:42:59Z,2025-11-13T18:46:58Z,2025-11-13T18:46:58Z,COLLABORATOR,,,,,,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6440/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6440/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6440', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6440', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6440.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6440.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6439,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6439/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6439/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6439/events,https://github.com/langchain-ai/langgraph/issues/6439,3619161956,I_kwDOKFU0lc7XuAdk,6439,"[bug] When a node relies on multiple input edges,  it will execute as soon as one of the edges meets the condition.","{'login': 'qq745639151', 'id': 39238149, 'node_id': 'MDQ6VXNlcjM5MjM4MTQ5', 'avatar_url': 'https://avatars.githubusercontent.com/u/39238149?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/qq745639151', 'html_url': 'https://github.com/qq745639151', 'followers_url': 'https://api.github.com/users/qq745639151/followers', 'following_url': 'https://api.github.com/users/qq745639151/following{/other_user}', 'gists_url': 'https://api.github.com/users/qq745639151/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/qq745639151/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/qq745639151/subscriptions', 'organizations_url': 'https://api.github.com/users/qq745639151/orgs', 'repos_url': 'https://api.github.com/users/qq745639151/repos', 'events_url': 'https://api.github.com/users/qq745639151/events{/privacy}', 'received_events_url': 'https://api.github.com/users/qq745639151/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,2,2025-11-13T03:05:01Z,2025-11-14T17:01:37Z,2025-11-14T17:01:37Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from typing import TypedDict
from typing import Optional
from langgraph.types import Command
from langgraph.graph import StateGraph,START,END

class GraphState(TypedDict):
    data_from_a: Optional[str] = None
    data_from_b: Optional[str] = None
    data_from_c: Optional[str] = None
    data_from_d: Optional[str] = None
    data_from_e: Optional[str] = None
    data_from_f: Optional[str] = None


def node_a(state: GraphState) -> Command:
    print(""execute node A..."")
    # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼ˆå¦‚è°ƒç”¨APIã€è®¡ç®—ï¼‰
    #time.sleep(5)
    data_a = ""data from node_a""
    # å°†ç»“æžœå†™å…¥State
    return Command(update={""data_from_a"": data_a})

# å‰ç½®èŠ‚ç‚¹Bï¼šç”Ÿæˆæ•°æ®b
def node_b(state: GraphState) -> Command:
    print(""execute node B..."")
    # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    data_b = ""data from node b""
    # å°†ç»“æžœå†™å…¥State
    return Command(update={""data_from_b"": data_b})

# ç›®æ ‡èŠ‚ç‚¹Cï¼šä¾èµ–Aã€Bçš„è¾“å‡ºï¼Œéœ€Aã€Béƒ½æ‰§è¡Œå®Œæ‰è§¦å‘
def node_c(state: GraphState):
    print(""execute node C..."")
    # ä»ŽStateä¸­è¯»å–Aã€Bçš„è¾“å‡ºï¼ˆæ­¤æ—¶Aã€Bå·²æ‰§è¡Œå®Œï¼Œæ•°æ®å·²å­˜åœ¨ï¼‰
    if state[""input""]:
        return Command(update={""data_from_c"": ""node_d""})
    else:
        return Command(update={""data_from_c"": ""node_e""})


def node_d(state: GraphState) -> Command:
    print(""execute node D..."")
    # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    data_d = ""data from node_d""
    # å°†ç»“æžœå†™å…¥State
    return Command(update={""data_from_d"": data_d})


def node_e(state: GraphState) -> Command:
    print(""execute node E..."")
    # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    data_e = ""data from node_e""
    # å°†ç»“æžœå†™å…¥State
    return Command(update={""data_from_e"": data_e})


def node_f(state: GraphState) -> Command:
    print(""execute node F..."")
    # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    data_f = ""data from node_f""
    if state[""data_from_a""] and state[""data_from_b""] \
        and (state[""data_from_d""] or state[""data_from_e""]):
    # å°†ç»“æžœå†™å…¥State
        return Command(update={""data_from_f"": data_f})
    else:
        raise Exception(""æ²¡æœ‰å……åˆ†çš„æ‰§è¡Œæ¡ä»¶"")

graph = StateGraph(GraphState)

# 2. æ·»åŠ æ‰€æœ‰èŠ‚ç‚¹
graph.add_node(""node_a"", node_a)
graph.add_node(""node_b"", node_b)
graph.add_node(""node_c"", node_c)
graph.add_node(""node_d"", node_d)
graph.add_node(""node_e"", node_e)
graph.add_node(""node_f"", node_f)

def choice(state: GraphState):
    if state[""data_from_c""] == ""node_d"":
        return ""node_d""
    else:
        return ""node_e""

# 3. é…ç½®è¾¹ï¼šç»™node_cæ·»åŠ ä¸¤ä¸ªå…¥è¾¹ï¼ˆä¾èµ–node_aå’Œnode_bï¼‰
graph.add_edge(START, ""node_a"")
graph.add_edge(START, ""node_b"")
graph.add_edge(""node_a"", ""node_f"")  # node_aæ‰§è¡Œå®Œ â†’ æŒ‡å‘node_f
graph.add_edge(""node_b"", ""node_c"")  # node_bæ‰§è¡Œå®Œ â†’ æŒ‡å‘node_c
graph.add_conditional_edges(
    source=""node_c"",
    path = choice
)
graph.add_edge(""node_d"", ""node_f"")
graph.add_edge(""node_e"", ""node_f"")


# 4. æŒ‡å®šå›¾çš„å…¥å£èŠ‚ç‚¹ï¼ˆAå’ŒBå¯å¹¶è¡Œæ‰§è¡Œï¼‰
graph.add_edge(""node_f"", END)
# 5. æŒ‡å®šå›¾çš„å‡ºå£èŠ‚ç‚¹ï¼ˆæ‰§è¡Œå®Œnode_cåŽç»“æŸï¼‰
# 6. ç¼–è¯‘å›¾
compiled_graph = graph.compile()

compiled_graph.invoke({""input"": """"})
#compiled_graph.invoke({""input"": ""anything""})
```

### Error Message and Stack Trace (if applicable)

```shell
Traceback (most recent call last):
  File ""E:\Gitee\flowagent\test\state.py"", line 105, in <module>
    compiled_graph.invoke({""input"": """"})
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\main.py"", line 3094, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\main.py"", line 2679, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\_runner.py"", line 258, in tick
    _panic_or_proceed(
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\_runner.py"", line 520, in _panic_or_proceed
    raise exc
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\_executor.py"", line 80, in done
    task.result()
  File ""D:\Softwares\Python312\Lib\concurrent\futures\_base.py"", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File ""D:\Softwares\Python312\Lib\concurrent\futures\_base.py"", line 401, in __get_result
    raise self._exception
  File ""D:\Softwares\Python312\Lib\concurrent\futures\thread.py"", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\pregel\_retry.py"", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\_internal\_runnable.py"", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\.venv\Lib\site-packages\langgraph\_internal\_runnable.py"", line 400, in invoke
    ret = self.func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""E:\Gitee\flowagent\test\state.py"", line 64, in node_f
    and (state[""data_from_d""] or state[""data_from_e""]):
         ~~~~~^^^^^^^^^^^^^^^
KeyError: 'data_from_d'
During task with name 'node_f' and id '80262465-cd43-4899-55f1-0f1962764732'
execute node A...
execute node B...
execute node C...
execute node F...
```

### Description

When I execute ```compiled_graph.invoke({""input"": ""anything""})```,the expected output is :
execute node A...
execute node B...
execute node C...
execute node D...
execute node F...

or I execute ```compiled_graph.invoke({""input"": """"})```, the expected output is :
execute node A...
execute node B...
execute node C...
execute node E...
execute node F...

But the process raise the aforementioned exception.


### System Info


System Information
------------------
> OS:  Windows
> OS Version:  10.0.26200
> Python Version:  3.12.10 (tags/v3.12.10:0cc8128, Apr  8 2025, 12:21:36) [MSC v.1943 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.4
> langchain: 1.0.5
> langsmith: 0.4.42
> langchain_openai: 1.0.2
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> httpx: 0.28.1
> jsonpatch: 1.33
> langgraph: 1.0.2
> openai: 2.7.2
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.4
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> tenacity: 9.1.2
> tiktoken: 0.12.0
> typing-extensions: 4.15.0
> zstandard: 0.25.0","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6439/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6439/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6438,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6438/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6438/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6438/events,https://github.com/langchain-ai/langgraph/pull/6438,3618539525,PR_kwDOKFU0lc6zFj3s,6438,"fix(langgraph): allow providing both context and configurable in RemoteGraph, fixes #6342","{'login': 'bolexyro', 'id': 113560716, 'node_id': 'U_kgDOBsTMjA', 'avatar_url': 'https://avatars.githubusercontent.com/u/113560716?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/bolexyro', 'html_url': 'https://github.com/bolexyro', 'followers_url': 'https://api.github.com/users/bolexyro/followers', 'following_url': 'https://api.github.com/users/bolexyro/following{/other_user}', 'gists_url': 'https://api.github.com/users/bolexyro/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/bolexyro/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/bolexyro/subscriptions', 'organizations_url': 'https://api.github.com/users/bolexyro/orgs', 'repos_url': 'https://api.github.com/users/bolexyro/repos', 'events_url': 'https://api.github.com/users/bolexyro/events{/privacy}', 'received_events_url': 'https://api.github.com/users/bolexyro/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-12T22:59:15Z,2025-11-12T23:01:35Z,,NONE,,,,,"## **Description:**

Fixes https://github.com/langchain-ai/langgraph/issues/6342

This PR fixes a 400 error in `RemoteGraph` when using both `context` and `configurable` together. It merges any `configurable` fields into `context` internally and removes the `configurable` key, allowing checkpointing and middleware to work under the context-first architecture introduced in LangGraph 1.0.

### Summary of Issue

This PR resolves an issue where using both `context` and `configurable` together in `RemoteGraph` caused a `400 Bad Request` error:

```python
Cannot specify both configurable and context. Prefer setting context alone.
Context was introduced in LangGraph 0.6.0 and is the long term planned replacement for configurable.
```

The `400 error` here isnâ€™t about using both config and context, itâ€™s specifically about using both configurable and context together. In other words, this line in the error:

```python
Cannot specify both configurable and context.
```

refers to the configurable field inside config, not the entire config argument. You can safely pass both config and context as long as config doesnâ€™t contain a configurable key.
So, instead of doing this:

```python
config = {""configurable"": {""thread_id"": thread_id}}
context = {""user_id"": ""123""}
```

You can move those fields up into your context:

```python
context = {""user_id"": ""123"", ""thread_id"": thread_id}
```

and omit the configurable block entirely.

However, with this approach, checkpointing still doesnâ€™t work, since the thread id being sent to the langgraph api comes from the config[â€configurableâ€], not the context.

---

###  **Fix Summary**

- Added an explicit `context` parameter to `RemoteGraph.stream()`, `.astream()`, `.invoke()`, and `.ainvoke()`.
- Unified `configurable` fields into `context` internally to prevent 400 errors from the API.
- Ensures checkpointing continues to work when using `context`.
- Aligns RemoteGraph API with LangGraph 1.0â€™s context-first architecture.

---

###  **Correct Usage**

Previously, this would fail because you canâ€™t specify both configurable and context:

```python
config = {""configurable"": {""thread_id"": ""123""}}
context = {""user_id"": ""abc""}
remote_graph.ainvoke(input, config=config, context=context)
```

Now, you can simply do:

```python
context = {""user_id"": ""abc"", ""thread_id"": ""123""}
config = {
    ""run_name"": ""joke_generation"",
    ""tags"": [""humor"", ""demo""],
} # remove configurable key from config

remote_graph.ainvoke(input, config=config, context=context)
```

Works because `config` **does not contain a `configurable` key**.

Everything that used to go inside `configurable` can now be placed directly in `context`.

---

###  **Backward Compatibility**

While itâ€™s still technically possible to pass both `configurable` and `context` together, itâ€™s **not recommended**. Internally, the `configurable` block is merged into `context` and removed to prevent API errors. This ensures existing workflows do not break while promoting the **context-first** model introduced in LangGraph 0.6.0.

---

###  **Implementation Highlights**

```python
if context:
    context.update(sanitized_config[""configurable""])
    sanitized_config.pop(""configurable"", None)

async for chunk in client.runs.stream(
    thread_id=context.get(""thread_id"")
    if context
    else sanitized_config[""configurable""].get(""thread_id""),
    assistant_id=self.assistant_id,
    input=input,
    command=command,
    config=sanitized_config,
    context=context,
    stream_mode=stream_modes,
    interrupt_before=interrupt_before,
    interrupt_after=interrupt_after,
    stream_subgraphs=subgraphs or stream is not None,
    if_not_exists=""create"",
    headers=(
        _merge_tracing_headers(headers) if self.distributed_tracing else headers
    ),
    params=params,
    **kwargs,
):
    ...
```

- Merges `configurable` fields into `context` before sending the request.
- Removes `configurable` from `config` to prevent API rejection.
- Supports checkpointing and middleware under the unified context interface.

X handle - https://x.com/bolexyro",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6438/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6438/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6438', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6438', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6438.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6438.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6437,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6437/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6437/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6437/events,https://github.com/langchain-ai/langgraph/issues/6437,3618440555,I_kwDOKFU0lc7XrQVr,6437,HELP WANTED - Update langgraph docs tutorials,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-12T22:21:46Z,2025-11-13T18:04:02Z,,COLLABORATOR,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Privileged issue

- [x] I am a LangGraph maintainer, or was asked directly by a LangGraph maintainer to create an issue here.

### Issue Content

Related issue: https://github.com/langchain-ai/langgraph/issues/6332

There are a handful of old imports that need to be updated in langgraph/docs e.g.:
```python
# incorrect:
from langchainhub import pull 
```
correct would be to import langsmith client: [docs](https://docs.langchain.com/langsmith/manage-prompts-programmatically#pull-a-prompt)

Also need to clean up references to old types like `FunctionMessage` -> `ToolMessage`

Would be good for somebody to identify all old imports and types and do a big replace-all in `.ipynb` files.

For whoever is interested - before you submit a PR, please drop a report of the changes you'll be making here and I'll approve them (to save you some time).",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6437/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6437/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6436,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6436/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6436/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6436/events,https://github.com/langchain-ai/langgraph/issues/6436,3616340655,I_kwDOKFU0lc7XjPqv,6436,Tool function return Command with goto variable cause parallel running,"{'login': 'padanes', 'id': 45506046, 'node_id': 'MDQ6VXNlcjQ1NTA2MDQ2', 'avatar_url': 'https://avatars.githubusercontent.com/u/45506046?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/padanes', 'html_url': 'https://github.com/padanes', 'followers_url': 'https://api.github.com/users/padanes/followers', 'following_url': 'https://api.github.com/users/padanes/following{/other_user}', 'gists_url': 'https://api.github.com/users/padanes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/padanes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/padanes/subscriptions', 'organizations_url': 'https://api.github.com/users/padanes/orgs', 'repos_url': 'https://api.github.com/users/padanes/repos', 'events_url': 'https://api.github.com/users/padanes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/padanes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,0,2025-11-12T12:27:24Z,2025-11-12T14:29:15Z,2025-11-12T14:29:15Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from typing import Annotated, List
from langchain_core.messages import HumanMessage, AIMessage, SystemMessage, ToolMessage, AIMessageChunk, BaseMessage
from langchain.tools import tool, ToolRuntime
from langgraph.graph import MessagesState, StateGraph, START, END
from langgraph.prebuilt import ToolNode
from langchain_openai import ChatOpenAI
from langgraph.types import Command

class AgentState(MessagesState):
    pass

@tool
def handoff_job_to_SOP_executor(handoffback_msg: Annotated[str, ""call SOP executor to execute the job""], 
                                    runtime: ToolRuntime)-> Command:
    """"""
    call SOP executor to execute the job
    """"""
    tool_message = ToolMessage(
                    content=f""success to handoff job to SOP executor"",
                    tool_call_id=runtime.tool_call_id
                )
    return Command(
        goto=""SOP_executor"",  
        update={**runtime.state, ""messages"": runtime.state[""messages""] + [tool_message]},  
        # graph=Command.PARENT,  
    )

def get_qwen_model():

    return ChatOpenAI(
        model=""qwen3-max"",
        temperature=0.5,            
        max_tokens=5000,            
        api_key = mykey,
        base_url='https://dashscope.aliyuncs.com/compatible-mode/v1',
        streaming=False,
        
    )

tools = [handoff_job_to_SOP_executor]

def main_super(state: AgentState):
    llm = get_qwen_model()
    print(""\n\n[[arrive supervisor]]\n\n"")
    llm_with_tools = llm.bind_tools(tools, parallel_tool_calls=True)

    llm_msg = [SystemMessage(content=""hand off any job to SOP executor using handoff_job_to_SOP_executor tool"")] + state[""messages""]
    response = llm_with_tools.invoke(llm_msg)
    state[""messages""].append(response)
    print(""\n\ndo something\n\n"")
    print(""\n\n[[bye supervisor]]\n\n"")
    return state

def SOP_executor(state: AgentState):

    print(""\n\n[[arrive SOP_executor]]\n\n"")
    print(""\n\ndo something\n\n"")
    print(""\n\n[[bye SOP_executor]]\n\n"")
    return state

def should_continue(state: AgentState):
    messages = state[""messages""]
    last_message = messages[-1]

    if hasattr(last_message, 'tool_calls') and last_message.tool_calls:
        return ""tools""

    return END


workflow = StateGraph(AgentState)
workflow.add_node(""supervisor"", main_super)
workflow.add_node(""tools"", ToolNode(tools))
workflow.add_node(""SOP_executor"", SOP_executor, destinations=[""supervisor""])

workflow.add_edge(START, ""supervisor"")
workflow.add_edge(""SOP_executor"", END)
workflow.add_conditional_edges(
    ""supervisor"",
    should_continue,
    {
        ""tools"": ""tools"",
        END: END,
    }
)


workflow.add_edge(""tools"", ""supervisor"")

supervisor = workflow.compile()

for _, chunk in supervisor.stream(
    {
        ""messages"": [
            {
                ""role"": ""user"",
                ""content"": ""find US and New York state GDP in 2024. what % of US GDP was New York state?"",
            }
        ]
    },
    subgraphs=True
):
    for k, v in chunk.items():
        print()
        print(type(v['messages'][-1]))
        if isinstance(v['messages'][-1], dict):
            print(v['messages'][-1])
        else:
            v['messages'][-1].pretty_print()
        
        print()
```

### Error Message and Stack Trace (if applicable)

```shell
[[arrive supervisor]]




do something




[[bye supervisor]]



<class 'langchain_core.messages.ai.AIMessage'>
================================== Ai Message ==================================
Tool Calls:
  handoff_job_to_SOP_executor (call_86f09b6a65ab4ec69f55ea87)
 Call ID: call_86f09b6a65ab4ec69f55ea87
  Args:
    handoffback_msg: find US and New York state GDP in 2024. what % of US GDP was New York state?


<class 'langchain_core.messages.tool.ToolMessage'>
================================= Tool Message =================================
Name: handoff_job_to_SOP_executor

success to handoff job to SOP executor



[[arrive supervisor]]




[[arrive SOP_executor]]




do something




[[bye SOP_executor]]



<class 'langchain_core.messages.tool.ToolMessage'>
================================= Tool Message =================================
Name: handoff_job_to_SOP_executor

success to handoff job to SOP executor



do something




[[bye supervisor]]



<class 'langchain_core.messages.ai.AIMessage'>
================================== Ai Message ==================================

The job has been successfully handed off to the SOP executor for processing. Please wait for the results regarding the US and New York state GDP in 2024, as well as the percentage of US GDP attributed to New York state.
```

### Description

I'm building the supervisor multi-agent gragh by myself. when I'm trying to use command message in the tool to handoff the task to another node(SOP_executor)

I expect the process will directly go to SOP_executor and WOULD NOT execute the supervisor again

But SOP_executor and supervisor is running in parallel.
Why?

```
[[arrive supervisor]]




[[arrive SOP_executor]]




do something




[[bye SOP_executor]]
```

### System Info


System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 23.5.0: Wed May  1 20:13:18 PDT 2024; root:xnu-10063.121.3~5/RELEASE_ARM64_T6030
> Python Version:  3.12.10 (main, Apr  8 2025, 11:35:47) [Clang 16.0.0 (clang-1600.0.26.6)]

Package Information
-------------------
> langchain_core: 1.0.2
> langchain: 1.0.3
> langchain_community: 0.4.1
> langsmith: 0.3.45
> langchain_classic: 1.0.0
> langchain_openai: 1.0.1
> langchain_text_splitters: 1.0.0
> langgraph_sdk: 0.2.9
> langgraph_supervisor: 0.0.30

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.12.13
> async-timeout: Installed. No version info available.
> dataclasses-json: 0.6.7
> httpx: 0.28.1
> httpx-sse: 0.4.3
> jsonpatch: 1.33
> langchain-anthropic: Installed. No version info available.
> langchain-aws: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-huggingface: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langsmith-pyo3: Installed. No version info available.
> numpy: 2.3.0
> openai: 2.6.1
> openai-agents: Installed. No version info available.
> opentelemetry-api: Installed. No version info available.
> opentelemetry-exporter-otlp-proto-http: Installed. No version info available.
> opentelemetry-sdk: Installed. No version info available.
> orjson: 3.10.18
> packaging: 24.2
> pydantic: 2.11.7
> pydantic-settings: 2.11.0
> pytest: Installed. No version info available.
> pyyaml: 6.0.2
> PyYAML: 6.0.2
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: Installed. No version info available.
> sqlalchemy: 2.0.44
> SQLAlchemy: 2.0.44
> tenacity: 9.1.2
> tiktoken: 0.12.0
> typing-extensions: 4.14.0
> zstandard: 0.23.0","{'login': 'padanes', 'id': 45506046, 'node_id': 'MDQ6VXNlcjQ1NTA2MDQ2', 'avatar_url': 'https://avatars.githubusercontent.com/u/45506046?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/padanes', 'html_url': 'https://github.com/padanes', 'followers_url': 'https://api.github.com/users/padanes/followers', 'following_url': 'https://api.github.com/users/padanes/following{/other_user}', 'gists_url': 'https://api.github.com/users/padanes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/padanes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/padanes/subscriptions', 'organizations_url': 'https://api.github.com/users/padanes/orgs', 'repos_url': 'https://api.github.com/users/padanes/repos', 'events_url': 'https://api.github.com/users/padanes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/padanes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6436/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6436/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6435,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6435/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6435/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6435/events,https://github.com/langchain-ai/langgraph/issues/6435,3616179133,I_kwDOKFU0lc7XioO9,6435,Map-reduce fails to trace when reducing dictionary with tuple keys,"{'login': 'Jichao-Yang', 'id': 56456448, 'node_id': 'MDQ6VXNlcjU2NDU2NDQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/56456448?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Jichao-Yang', 'html_url': 'https://github.com/Jichao-Yang', 'followers_url': 'https://api.github.com/users/Jichao-Yang/followers', 'following_url': 'https://api.github.com/users/Jichao-Yang/following{/other_user}', 'gists_url': 'https://api.github.com/users/Jichao-Yang/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Jichao-Yang/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Jichao-Yang/subscriptions', 'organizations_url': 'https://api.github.com/users/Jichao-Yang/orgs', 'repos_url': 'https://api.github.com/users/Jichao-Yang/repos', 'events_url': 'https://api.github.com/users/Jichao-Yang/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Jichao-Yang/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-12T11:39:50Z,2025-11-12T11:40:00Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
""""""
Minimal Reproducible Example: LangSmith cannot serialize dict with tuple keys

Run: LANGCHAIN_TRACING_V2=true python minimal_repro.py

Expected: Both graphs execute successfully, but ONLY the problematic pattern
shows ""Error in LangChainTracer.on_chain_end callback: TypeError(...tuple)""
""""""

import asyncio
import operator
from typing import TypedDict, Annotated
from langgraph.graph import StateGraph, START, END
from langgraph.types import Send


# ============================================================================
# PROBLEMATIC: Dict with tuple keys - breaks LangSmith trace serialization
# ============================================================================

class BadState(TypedDict):
    # operator.or_ used for combining dictionaries, equivalent to `dict1 | dict2`
    results: Annotated[dict[tuple[str, str], str], operator.or_]

def bad_fanout(state: BadState):
    return [Send(""bad_process"", {""id"": str(i)}) for i in range(2)]

async def bad_process(state: BadState) -> dict:
    await asyncio.sleep(0.01)
    # Returns dict with tuple key - BREAKS SERIALIZATION
    return {""results"": {(""key"", state[""id""]): f""value_{state['id']}""}}

def build_bad_graph():
    graph = StateGraph(BadState)
    graph.add_node(""bad_process"", bad_process)
    graph.add_conditional_edges(START, bad_fanout, [""bad_process""])
    graph.add_edge(""bad_process"", END)
    return graph.compile()


# ============================================================================
# WORKING: List with tuples - serializes fine
# ============================================================================

class GoodState(TypedDict):
    results: Annotated[list[tuple[str, str, str]], operator.add]

def good_fanout(state: GoodState):
    return [Send(""good_process"", {""id"": str(i)}) for i in range(2)]

async def good_process(state: GoodState) -> dict:
    await asyncio.sleep(0.01)
    # Returns list with tuple - WORKS FINE
    return {""results"": [(""key"", state[""id""], f""value_{state['id']}"")]}

def build_good_graph():
    graph = StateGraph(GoodState)
    graph.add_node(""good_process"", good_process)
    graph.add_conditional_edges(START, good_fanout, [""good_process""])
    graph.add_edge(""good_process"", END)
    return graph.compile()


# ============================================================================
# TEST
# ============================================================================

async def main():
    print(""\n"" + ""=""*60)
    print(""Testing PROBLEMATIC pattern (dict with tuple keys)..."")
    print(""=""*60)

    bad_graph = build_bad_graph()
    result = await bad_graph.ainvoke({}, config={""run_name"": ""bad_pattern""})
    print(f""âœ“ Execution succeeded: {len(result['results'])} results"")
    print(""âš ï¸  But check logs above for serialization error ^^^"")

    await asyncio.sleep(0.5)

    print(""\n"" + ""=""*60)
    print(""Testing WORKING pattern (list with tuples)..."")
    print(""=""*60)

    good_graph = build_good_graph()
    result = await good_graph.ainvoke({}, config={""run_name"": ""good_pattern""})
    print(f""âœ“ Execution succeeded: {len(result['results'])} results"")
    print(""âœ“ No serialization errors"")

    print(""\n"" + ""=""*60)
    print(""ISSUE: Dict with tuple keys breaks LangSmith serialization"")
    print(""       Error: 'keys must be str, int, float, bool or None'"")
    print(""FIX:   Use list[tuple] with operator.add instead"")
    print(""=""*60 + ""\n"")


if __name__ == ""__main__"":
    asyncio.run(main())
```

### Error Message and Stack Trace (if applicable)

```shell
$ LANGCHAIN_TRACING_V2=true python minimal_repro.py

============================================================
Testing PROBLEMATIC pattern (dict with tuple keys)...
============================================================
keys must be str, int, float, bool or None, not tuple
Error in LangChainTracer.on_chain_end callback: TypeError('keys must be str, int, float, bool or None, not tuple')
Error in LangChainTracer.on_chain_end callback: TypeError('keys must be str, int, float, bool or None, not tuple')
Error in LangChainTracer.on_chain_end callback: TypeError('keys must be str, int, float, bool or None, not tuple')
âœ“ Execution succeeded: 2 results
âš ï¸  But check logs above for serialization error ^^^

============================================================
Testing WORKING pattern (list with tuples)...
============================================================
âœ“ Execution succeeded: 2 results
âœ“ No serialization errors

============================================================
ISSUE: Dict with tuple keys breaks LangSmith serialization
       Error: 'keys must be str, int, float, bool or None'
FIX:   Use list[tuple] with operator.add instead
============================================================
```

### Description

# LangSmith trace never completes when LangGraph state reduces dict with tuple keys

## Problem

When using LangGraph with LangSmith tracing enabled, traces never show completion and latency remains unavailable if the state TypedDict contains a dictionary with tuple keys, even though graph execution completes successfully.

## What I'm doing

I'm using LangGraph's parallel execution pattern with `Send` for fan-out, and accumulating results in state using `operator.or_` with a dict that has tuple keys:

```python
class State(TypedDict):
    results_map: Annotated[dict[tuple[str, str], str], operator.or_]

async def process_node(state: State) -> dict:
    return {""results_map"": {(key1, key2): value}}
```
I run the script with the tracing environmental variable set to true:
```shell
LANGCHAIN_TRACING_V2=true python minimal_repro.py
```


## Expected behavior

- Graph executes successfully âœ“
- Returns correct results âœ“
- LangSmith trace shows completion with latency metrics âœ—
- No errors in logs âœ—

## Actual behavior

- Graph executes successfully âœ“
- Returns correct results âœ“
- **Error in logs**: `Error in LangChainTracer.on_chain_end callback: TypeError('keys must be str, int, float, bool or None, not tuple')`
- **LangSmith trace never completes** - shows as ""running"" indefinitely
- **Latency metrics unavailable** in dashboard

## Hypothesis
LangSmith's tracer serializes state to JSON for observability. Python's JSON encoder only supports primitive types (str, int, float, bool, None) as dictionary keys. When state contains `dict[tuple, Any]`, the serialization callback fails silently, preventing trace completion.

## Workaround

Use `operator.add` with list of tuples instead of `operator.or_` with dict:

```python
class State(TypedDict):
    results_list: Annotated[list[tuple[str, str, str]], operator.add]

async def process_node(state: State) -> dict:
    return {""results_list"": [(key1, key2, value)]}

# Convert to dict in aggregation node if needed
results_map = {(k1, k2): v for k1, k2, v in state[""results_list""]}
```

This successfully allows traces to complete with full metrics.

## Minimal reproduction

See attached `minimal_repro.py` - demonstrates both problematic and working patterns in ~100 lines.


### System Info

System Information
------------------
> OS:  Linux
> OS Version:  #1 SMP PREEMPT_DYNAMIC Thu Jun  5 18:30:46 UTC 2025
> Python Version:  3.11.13 (main, Jul 23 2025, 00:34:47) [Clang 20.1.4 ]

Package Information
-------------------
> langchain_core: 1.0.4
> langsmith: 0.4.42
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> httpx: 0.28.1
> jsonpatch: 1.33
> orjson: 3.11.4
> packaging: 25.0
> pydantic: 2.12.4
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> tenacity: 9.1.2
> typing-extensions: 4.15.0
> zstandard: 0.25.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6435/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6435/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6434,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6434/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6434/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6434/events,https://github.com/langchain-ai/langgraph/issues/6434,3615870073,I_kwDOKFU0lc7Xhcx5,6434,`ImportError: cannot import name 'CompiledStateGraph' from 'langgraph.graph'`,"{'login': 'khteh', 'id': 3871483, 'node_id': 'MDQ6VXNlcjM4NzE0ODM=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3871483?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/khteh', 'html_url': 'https://github.com/khteh', 'followers_url': 'https://api.github.com/users/khteh/followers', 'following_url': 'https://api.github.com/users/khteh/following{/other_user}', 'gists_url': 'https://api.github.com/users/khteh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/khteh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/khteh/subscriptions', 'organizations_url': 'https://api.github.com/users/khteh/orgs', 'repos_url': 'https://api.github.com/users/khteh/repos', 'events_url': 'https://api.github.com/users/khteh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/khteh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,1,2025-11-12T10:12:33Z,2025-11-12T10:15:31Z,2025-11-12T10:15:31Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
`from langgraph.graph import CompiledStateGraph`
```

### Error Message and Stack Trace (if applicable)

```shell
Traceback (most recent call last):
  File ""/usr/src/Python/rag-agent/.venv/bin/hypercorn"", line 10, in <module>
    sys.exit(main())
             ~~~~^^
  File ""/usr/src/Python/rag-agent/.venv/lib/python3.13/site-packages/hypercorn/__main__.py"", line 312, in main
    return run(config)
  File ""/usr/src/Python/rag-agent/.venv/lib/python3.13/site-packages/hypercorn/run.py"", line 51, in run
    load_application(config.application_path, config.wsgi_max_body_size)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/src/Python/rag-agent/.venv/lib/python3.13/site-packages/hypercorn/utils.py"", line 99, in load_application
    module = import_module(import_name)
  File ""/usr/lib/python3.13/importlib/__init__.py"", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""<frozen importlib._bootstrap>"", line 1387, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 1360, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 1331, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 935, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 1026, in exec_module
  File ""<frozen importlib._bootstrap>"", line 488, in _call_with_frames_removed
  File ""/usr/src/Python/rag-agent/src/main.py"", line 108, in <module>
    app = asyncio.run(create_app())
  File ""/usr/lib/python3.13/asyncio/runners.py"", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File ""/usr/lib/python3.13/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File ""/usr/lib/python3.13/asyncio/base_events.py"", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File ""/usr/src/Python/rag-agent/src/main.py"", line 83, in create_app
    from src.controllers.HomeController import home_api as home_blueprint
  File ""/usr/src/Python/rag-agent/src/controllers/HomeController.py"", line 26, in <module>
    from langgraph.graph import CompiledStateGraph
ImportError: cannot import name 'CompiledStateGraph' from 'langgraph.graph' (/usr/src/Python/rag-agent/.venv/lib/python3.13/site-packages/langgraph/graph/__init__.py)
<sys>:0: ResourceWarning: unclosed <socket.socket fd=3, family=2, type=1, proto=0, laddr=('127.0.0.1', 8000)>
<sys>:0: ResourceWarning: unclosed <socket.socket fd=4, family=2, type=1, proto=0, laddr=('0.0.0.0', 8080)>
<sys>:0: ResourceWarning: unclosed <socket.socket fd=6, family=10, type=2, proto=0, laddr=('::', 4433, 0, 0)>
<sys>:0: ResourceWarning: unclosed <socket.socket fd=5, family=2, type=2, proto=0, laddr=('0.0.0.0', 4433)>
```

### Description

```
from langgraph.graph import CompiledStateGraph
```

### System Info

```
System Information
------------------
> OS:  Linux
> OS Version:  #6-Ubuntu SMP PREEMPT_DYNAMIC Tue Oct  7 13:34:17 UTC 2025
> Python Version:  3.13.7 (main, Aug 20 2025, 22:17:40) [GCC 15.2.0]

Package Information
-------------------
> langchain_core: 1.0.4
> langchain: 1.0.5
> langchain_community: 0.4.1
> langsmith: 0.4.42
> langchain_classic: 1.0.0
> langchain_google_genai: 3.0.2
> langchain_neo4j: 0.6.0
> langchain_ollama: 1.0.0
> langchain_postgres: 0.0.16
> langchain_text_splitters: 1.0.0
> langgraph_api: 0.4.28
> langgraph_cli: 0.4.7
> langgraph_runtime_inmem: 0.14.1
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.13.2
> asyncpg: 0.30.0
> blockbuster: 1.5.25
> click: 8.3.0
> cloudpickle: 3.1.2
> cryptography: 44.0.3
> dataclasses-json: 0.6.7
> filetype: 1.2.0
> google-ai-generativelanguage: 0.9.0
> httpx: 0.28.1
> httpx-sse: 0.4.3
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langgraph: 1.0.3
> langgraph-checkpoint: 3.0.1
> neo4j: 5.28.2
> neo4j-graphrag: 1.10.1
> numpy: 2.3.4
> ollama: 0.6.0
> opentelemetry-api: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> pgvector: 0.3.6
> psycopg: 3.2.12
> psycopg-pool: 3.2.7
> pydantic: 2.12.4
> pydantic-settings: 2.12.0
> pyjwt: 2.10.1
> pytest: 9.0.0
> python-dotenv: 1.2.1
> pyyaml: 6.0.3
> PyYAML: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> sqlalchemy: 2.0.44
> SQLAlchemy: 2.0.44
> sse-starlette: 2.1.3
> starlette: 0.49.3
> structlog: 25.5.0
> tenacity: 9.1.2
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.38.0
> watchfiles: 1.1.1
> zstandard: 0.25.0
```","{'login': 'khteh', 'id': 3871483, 'node_id': 'MDQ6VXNlcjM4NzE0ODM=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3871483?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/khteh', 'html_url': 'https://github.com/khteh', 'followers_url': 'https://api.github.com/users/khteh/followers', 'following_url': 'https://api.github.com/users/khteh/following{/other_user}', 'gists_url': 'https://api.github.com/users/khteh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/khteh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/khteh/subscriptions', 'organizations_url': 'https://api.github.com/users/khteh/orgs', 'repos_url': 'https://api.github.com/users/khteh/repos', 'events_url': 'https://api.github.com/users/khteh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/khteh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6434/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6434/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6433,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6433/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6433/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6433/events,https://github.com/langchain-ai/langgraph/issues/6433,3615713678,I_kwDOKFU0lc7Xg2mO,6433,graph.update_state() generates a new config WITH  the 'next' ATTRITUBE empty,"{'login': 'JxKim', 'id': 88940655, 'node_id': 'MDQ6VXNlcjg4OTQwNjU1', 'avatar_url': 'https://avatars.githubusercontent.com/u/88940655?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/JxKim', 'html_url': 'https://github.com/JxKim', 'followers_url': 'https://api.github.com/users/JxKim/followers', 'following_url': 'https://api.github.com/users/JxKim/following{/other_user}', 'gists_url': 'https://api.github.com/users/JxKim/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/JxKim/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/JxKim/subscriptions', 'organizations_url': 'https://api.github.com/users/JxKim/orgs', 'repos_url': 'https://api.github.com/users/JxKim/repos', 'events_url': 'https://api.github.com/users/JxKim/events{/privacy}', 'received_events_url': 'https://api.github.com/users/JxKim/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,1,2025-11-12T09:29:54Z,2025-11-12T22:32:36Z,2025-11-12T22:32:36Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import uuid

from typing_extensions import TypedDict, NotRequired
from langgraph.graph import StateGraph, START, END
from langchain.chat_models import init_chat_model
from langgraph.checkpoint.memory import InMemorySaver
class State(TypedDict):
    topic: NotRequired[str]
    joke: NotRequired[str]

from langchain_openai import ChatOpenAI
model = ChatOpenAI()
def generate_topic(state: State):
    """"""LLM call to generate a topic for the joke""""""
    msg = model.invoke(""Give me a funny topic for a joke"")
    return {""topic"": msg.content}
def write_joke(state: State):
    """"""LLM call to write a joke based on the topic""""""
    msg = model.invoke(f""Write a short joke about {state['topic']}"")
    return {""joke"": msg.content}
workflow = StateGraph(State)
# Add nodes
workflow.add_node(""generate_topic"", generate_topic)
workflow.add_node(""write_joke"", write_joke)

# Add edges to connect nodes
workflow.add_edge(START, ""generate_topic"")
workflow.add_edge(""generate_topic"", ""write_joke"")
workflow.add_edge(""write_joke"", END)
checkpointer = InMemorySaver()
graph = workflow.compile(checkpointer=checkpointer)
config = {
    ""configurable"": {
        ""thread_id"": uuid.uuid4(),
    }
}
state = graph.invoke({}, config)

states = list(graph.get_state_history(config))
selected_state = states[1]
print(selected_state.config[""configurable""][""checkpoint_id""])
print(selected_state.next) # output: ('write_joke',)
print(type(selected_state.next))
print(selected_state.values)
new_config = graph.update_state(selected_state.config,values={""topic"":""chickens""})
print(new_config)

### The codes below show the bug.
new_state = graph.get_state(new_config)
print(new_state.next) # Expected to be the same as select_state.next. Got EMPTY tuple instead !
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

I tried the example of timetraveling shown in the official website.
[](https://docs.langchain.com/oss/python/langgraph/use-time-travel#4-resume-execution-from-the-checkpoint)
However, I got an unexpected value output.

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.26100
> Python Version:  3.12.11 | packaged by Anaconda, Inc. | (main, Jun  5 2025, 12:58:53) [MSC v.1929 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.3
> langchain: 1.0.3
> langchain_community: 0.3.31
> langsmith: 0.4.33
> langchain_anthropic: 0.3.22
> langchain_chroma: 0.2.6
> langchain_deepseek: 1.0.0
> langchain_experimental: 0.3.4
> langchain_huggingface: 1.0.1
> langchain_mcp_adapters: 0.1.12
> langchain_ollama: 1.0.0
> langchain_openai: 1.0.2
> langchain_tavily: 0.2.12
> langchain_text_splitters: 0.3.11
> langgraph_cli: 0.4.3
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.13.0
> anthropic: 0.69.0
> chromadb: 1.1.1
> click: 8.3.0
> dataclasses-json: 0.6.7
> httpx: 0.28.1
> httpx-sse: 0.4.2
> huggingface-hub: 0.35.3
> jsonpatch: 1.33
> langchain-aws: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langgraph-api: Installed. No version info available.
> langgraph-runtime-inmem: Installed. No version info available.
> langsmith-pyo3: Installed. No version info available.
> mcp: 1.21.0
> numpy: 2.2.6
> ollama: 0.6.0
> openai: 1.109.1
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.37.0
> opentelemetry-exporter-otlp-proto-http: Installed. No version info available.
> opentelemetry-sdk: 1.37.0
> orjson: 3.11.3
> packaging: 25.0
> pydantic: 2.12.0
> pydantic-settings: 2.11.0
> pytest: Installed. No version info available.
> python-dotenv: 1.1.1
> PyYAML: 6.0.2
> pyyaml: 6.0.2
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 14.2.0
> sentence-transformers: 5.1.2
> SQLAlchemy: 2.0.43
> tenacity: 9.1.2
> tiktoken: 0.12.0
> tokenizers: 0.22.1
> transformers: 4.57.1
> typing-extensions: 4.15.0
> vcrpy: Installed. No version info available.
> zstandard: 0.25.0","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6433/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6433/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6432,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6432/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6432/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6432/events,https://github.com/langchain-ai/langgraph/issues/6432,3615525696,I_kwDOKFU0lc7XgItA,6432,FilesPreview.tsx: text/csv MIME type not supported in chat file uploads,"{'login': 'workwithspartans', 'id': 219256591, 'node_id': 'U_kgDODRGXDw', 'avatar_url': 'https://avatars.githubusercontent.com/u/219256591?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/workwithspartans', 'html_url': 'https://github.com/workwithspartans', 'followers_url': 'https://api.github.com/users/workwithspartans/followers', 'following_url': 'https://api.github.com/users/workwithspartans/following{/other_user}', 'gists_url': 'https://api.github.com/users/workwithspartans/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/workwithspartans/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/workwithspartans/subscriptions', 'organizations_url': 'https://api.github.com/users/workwithspartans/orgs', 'repos_url': 'https://api.github.com/users/workwithspartans/repos', 'events_url': 'https://api.github.com/users/workwithspartans/events{/privacy}', 'received_events_url': 'https://api.github.com/users/workwithspartans/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,0,2025-11-12T08:35:55Z,2025-11-12T08:35:55Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import sys
import os
import json
import tempfile
from typing import Annotated, TypedDict, Sequence, Tuple, Optional, Dict, Any

# Python version compatibility
if sys.version_info < (3, 12):
    from typing_extensions import TypedDict, Annotated
else:
    from typing import TypedDict, Annotated
    from typing import Sequence as TypingSequence  # noqa: F401 (documentation/compat)

from langchain_openai import AzureChatOpenAI
from langchain_core.messages import BaseMessage, HumanMessage, AIMessage, SystemMessage
from langchain_mcp_adapters.client import MultiServerMCPClient
from langgraph.graph import StateGraph, END
from langgraph.graph.message import add_messages
from langgraph.prebuilt import ToolNode

from dotenv import load_dotenv
import pandas as pd

load_dotenv()

# ========================
# STATE DEFINITION
# ========================

class AgentState(TypedDict):
    """"""Agent state with message history and optional uploaded file.""""""
    messages: Annotated[Sequence[BaseMessage], add_messages]
    uploaded_file: Optional[Any]  # accept dict/path/bytes/file-like for Studio compatibility
    sample_context: Optional[Dict[str, Any]]  # cached summary for downstream logic

# ========================
# LLM INITIALIZATION
# ========================

llm = AzureChatOpenAI(
    azure_deployment=os.getenv(""DEPLOYMENT_NAME""),
    api_version=os.getenv(""AZURE_OPENAI_VERSION""),
    temperature=0,
    api_key=os.getenv(""AZURE_OPENAI_KEY""),
    azure_endpoint=os.getenv(""AZURE_OPENAI_ENDPOINT""),
)

# ========================
# MCP TOOLS
# ========================

def get_mcp_tools():
    """"""Get MCP tools from all servers (adjust endpoints to your environment).""""""
    import asyncio

    async def _get_tools():
        client = MultiServerMCPClient({
            ""data"": {
                ""url"": ""http://10.73.83.83:9006/mcp"",
                ""transport"": ""streamable_http""
            },
            ""duckduckgo"": {
                ""url"": ""http://10.73.83.83:9007/mcp"",
                ""transport"": ""streamable_http""
            },
            ""test_data_generator"": {
                ""url"": ""http://10.73.83.83:9010/mcp"",
                ""transport"": ""streamable_http""
            }
        })
        return await client.get_tools()

    return asyncio.run(_get_tools())

tools = get_mcp_tools()
llm_with_tools = llm.bind_tools(tools)

# ========================
# SYSTEM PROMPT
# ========================

system_prompt = ''''''
# ========================
# FILE HANDLING HELPERS
# ========================

def _read_bytes_from_file(f: Any) -> bytes:
    """"""
    Robustly read a Studio-uploaded file payload supporting:
    - file-like object with .read()
    - dict with path/content fields
    - object with .path attribute
    - raw bytes/str (str as content or filesystem path)
    """"""
    # 1) file-like .read()
    if hasattr(f, ""read"") and callable(getattr(f, ""read"")):
        data = f.read()
        return data if isinstance(data, (bytes, bytearray)) else str(data).encode(""utf-8"", ""ignore"")
    # 2) dict payload
    if isinstance(f, dict):
        path = f.get(""path"") or f.get(""file_path"") or f.get(""filename"")
        if path and os.path.exists(path):
            with open(path, ""rb"") as fh:
                return fh.read()
        content = f.get(""content"") or f.get(""data"") or f.get(""file_data"")
        if isinstance(content, (bytes, bytearray)):
            return bytes(content)
        if isinstance(content, str):
            return content.encode(""utf-8"", ""ignore"")
    # 3) .path attribute
    path = getattr(f, ""path"", None)
    if path and os.path.exists(path):
        with open(path, ""rb"") as fh:
            return fh.read()
    # 4) raw bytes or str
    if isinstance(f, (bytes, bytearray)):
        return bytes(f)
    if isinstance(f, str) and os.path.exists(f):
        with open(f, ""rb"") as fh:
            return fh.read()
    if isinstance(f, str):
        return f.encode(""utf-8"", ""ignore"")
    raise ValueError(""Unsupported uploaded_file payload"")

def _summarize_tabular_sample(f: Any, max_rows: int = 25) -> Dict[str, Any]:
    """"""Read CSV/Excel/JSON into a compact summary for prompting.""""""
    try:
        raw = _read_bytes_from_file(f)
    except Exception as e:
        return {
            ""success"": False,
            ""error"": f""Could not read file: {e}"",
            ""file_name"": getattr(f, ""name"", None) or (f.get(""filename"") if isinstance(f, dict) else ""unknown""),
        }

    name = getattr(f, ""name"", None) or (f.get(""filename"") if isinstance(f, dict) else None) or ""uploaded_file""
    suffix = os.path.splitext(name or """")[1].lower()

    # Persist to a temp file for pandas
    try:
        with tempfile.NamedTemporaryFile(delete=False, suffix=suffix or "".csv"") as tmp:
            tmp.write(raw)
            tmp_path = tmp.name
    except Exception as e:
        return {""success"": False, ""error"": f""Temp file creation failed: {e}""}

    detected_type = ""csv""
    df = None
    error = None
    readers = []
    if suffix in ["".xlsx"", "".xls""]:
        detected_type = ""excel""; readers = [lambda p: pd.read_excel(p)]
    elif suffix == "".json"":
        detected_type = ""json""; readers = [lambda p: pd.read_json(p, lines=False)]
    else:
        detected_type = ""csv""; readers = [lambda p: pd.read_csv(p), lambda p: pd.read_excel(p)]

    for rd in readers:
        try:
            df = rd(tmp_path)
            break
        except Exception as e:
            error = e
            df = None

    # Windows file-lock safe cleanup
    try:
        os.unlink(tmp_path)
    except Exception:
        pass

    if df is None:
        return {
            ""success"": False,
            ""error"": f""Could not parse file as {detected_type}: {error}"",
            ""file_name"": name,
        }

    preview = df.head(min(max_rows, len(df))).to_dict(orient=""records"")
    cols = [{""name"": str(c), ""dtype"": str(df[c].dtype)} for c in df.columns]
    shape = [int(df.shape[0]), int(df.shape[1])]
    return {
        ""success"": True,
        ""file_name"": name,
        ""detected_type"": detected_type,
        ""shape"": shape,
        ""columns"": cols[:50],      # keep prompt small
        ""sample_preview"": preview[:5],  # first 5 rows max
    }

def _maybe_pick_upload_from_message(state: AgentState) -> Optional[Any]:
    """"""If uploaded_file not set in state, try to pull the first attachment from the last HumanMessage.""""""
    last = state[""messages""][-1] if state.get(""messages"") else None
    if not last or not isinstance(last, HumanMessage):
        return None
    additional = getattr(last, ""additional_kwargs"", {}) or {}
    for key in [""attachments"", ""files"", ""message_attachments"", ""metadata""]:
        atts = additional.get(key) or []
        if isinstance(atts, list) and atts:
            return atts[0]  # pass dict/file-like into _read_bytes_from_file
    return None

# ========================
# GRAPH NODES
# ========================

def call_agent(state: AgentState):
    """"""
    Agent node:
    1) If a file is uploaded (state or attachments), silently sample it and prepend a SystemMessage.
    2) Call LLM with tools as usual.
    """"""
    sys_msg = None
    f = state.get(""uploaded_file"") or _maybe_pick_upload_from_message(state)
    if f:
        summary = _summarize_tabular_sample(f, max_rows=25)
        state[""sample_context""] = summary
        if summary.get(""success""):
            cols = "", "".join(f""{c['name']}:{c['dtype']}"" for c in summary[""columns""][:20])
            prev = summary[""sample_preview""]
            sys_text = (
                ""ðŸ“„ Sample file detected and analyzed:\n""
                f""- File: {summary['file_name']} ({summary['detected_type']})\n""
                f""- Shape: {summary['shape'][0]} rows Ã— {summary['shape'][1]} columns\n""
                f""- Columns: {cols}\n""
                f""- Preview (first {len(prev)} rows): {json.dumps(prev)[:500]}\n""
                ""ðŸ“Š Use this sample to infer entities, field types, enums, realistic ranges, and cardinalities.\n""
            )
            sys_msg = SystemMessage(content=sys_text)
        else:
            sys_msg = SystemMessage(content=f""âš ï¸ File was uploaded but could not be parsed: {summary.get('error')} â€” continue without sample."")

    msgs = [SystemMessage(content=system_prompt)]
    if sys_msg:
        msgs.append(sys_msg)
    msgs.extend(state[""messages""])

    response = llm_with_tools.invoke(msgs)
    return {""messages"": [response]}

# ========================
# ROUTER
# ========================

def should_continue(state: AgentState):
    """"""If the agent created tool calls, execute them; otherwise end.""""""
    last = state[""messages""][-1]
    if isinstance(last, AIMessage) and getattr(last, ""tool_calls"", None):
        return ""tools""
    return END

# ========================
# BUILD GRAPH
# ========================

workflow = StateGraph(AgentState)
workflow.add_node(""agent"", call_agent)
workflow.add_node(""tools"", ToolNode(tools))

workflow.set_entry_point(""agent"")
workflow.add_conditional_edges(""agent"", should_continue, {""tools"": ""tools"", END: END})
workflow.add_edge(""tools"", ""agent"")

graph = workflow.compile()
```

### Error Message and Stack Trace (if applicable)

```shell
I am not getting any error message in my termnal
ðŸŽ¨ Opening Studio in your browser...
2025-11-12T07:59:10.009778Z [info     ] ðŸŽ¨ Opening Studio in your browser... [browser_opener] api_variant=local_dev langgraph_api_version=0.5.12 message='ðŸŽ¨ Opening Studio in your browser...' thread_name='Thread-3 (_open_browser)'
URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024&organizationId=69c80884-92d8-43af-86b8-83258f23eac3
2025-11-12T07:59:10.011774Z [info     ] URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024&organizationId=69c80884-92d8-43af-86b8-83258f23eac3 [browser_opener] api_variant=local_dev langgraph_api_version=0.5.12 message='URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024&organizationId=69c80884-92d8-43af-86b8-83258f23eac3' thread_name='Thread-3 (_open_browser)'
2025-11-12T07:59:10.288114Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:00:09.946378Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:00:10.460589Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:01:10.194208Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:01:10.696043Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:02:10.231390Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:02:10.733588Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:03:10.721323Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:03:11.223420Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:04:02.519180Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:04:02.520411Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:04:11.151355Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:04:11.644269Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:05:11.212566Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:05:11.724391Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:06:11.647434Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:06:12.155337Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:07:12.006790Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:07:12.537185Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:08:12.278540Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:08:12.786623Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:09:02.837967Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:09:02.837967Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:09:12.660517Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:09:13.150098Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:10:13.141649Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:10:13.659001Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:11:13.556495Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:11:14.068369Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:12:13.585811Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:12:14.103370Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:13:13.887198Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:13:14.394613Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:14:03.342626Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:14:03.370417Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:14:14.266634Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:14:14.768706Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:15:14.603231Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:15:15.127918Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:16:14.748437Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:16:15.255093Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:17:15.130501Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:17:15.643443Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:18:15.523651Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:18:16.035432Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:19:03.654787Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:19:03.654787Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:19:15.766238Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:19:16.280657Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:20:16.162426Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:20:16.671893Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:21:16.271440Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:21:16.782842Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:22:16.634655Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:22:17.157145Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:23:16.656706Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:23:17.157265Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:24:03.927316Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:24:03.927316Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:24:16.700375Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:24:17.205306Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:25:17.123093Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:25:17.609117Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:26:17.612277Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:26:18.125578Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:27:17.870181Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:27:18.357936Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:28:18.158068Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_0
2025-11-12T08:28:18.672074Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_2
2025-11-12T08:29:04.281045Z [info     ] HTTP Request: POST https://api.smith.langchain.com/v1/metadata/submit ""HTTP/1.1 204 No Content"" [httpx] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:29:04.283057Z [info     ] Successfully submitted metadata to LangSmith instance [langgraph_api.metadata] api_variant=local_dev langgraph_api_version=0.5.12 thread_name=MainThread
2025-11-12T08:29:18.310879Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:29:18.810439Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:30:18.770393Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:30:19.294334Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:31:19.248354Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:31:19.761814Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:32:19.716128Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:32:20.231437Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
2025-11-12T08:33:19.777695Z [info     ] Worker stats                   [langgraph_runtime_inmem.queue] active=0 api_variant=local_dev available=1 langgraph_api_version=0.5.12 max=1 thread_name=asyncio_2
2025-11-12T08:33:20.277923Z [info     ] Queue stats                    [langgraph_runtime_inmem.queue] api_variant=local_dev langgraph_api_version=0.5.12 n_pending=0 n_running=0 pending_runs_wait_time_max_secs=None pending_runs_wait_time_med_secs=None thread_name=asyncio_0
```

### Description

- LangGraph Studio rejects CSV files with ""Unsupported file type: text/csv""
- Error location: FilesPreview.tsx:58 (WYe function)
- This occurs even after disabling Tracking Prevention
- Expected: CSV should be supported as it's a standard data format
- Actual: CSV is rejected while code backend can handle it
- Workaround: Upload via Python, not Studio chat
- 
I can chat normaly but when I try to upload something in chat interface and ask something it is not working. 

```delighted.js:3 [Delighted] Survey not shown because person is not eligible until Mon Feb 09 2026 00:18:45 GMT+0000 (Coordinated Universal Time).
FilesPreview.tsx:58  Uncaught (in promise) Error: Unsupported file type: text/csv
    at WYe (FilesPreview.tsx:58:94)
    at Array.map (<anonymous>)
    at f (Conversation.tsx:41:17)
    at j (Conversation.tsx:189:4)
    at C (Conversation.tsx:203:10)
    at Xgr.test.r.<computed> (index.mjs:73:26)
    at Object.vt (react-dom.production.min.js:54:317)
    at kt (react-dom.production.min.js:54:471)
    at We (react-dom.production.min.js:55:35)
    at e2 (react-dom.production.min.js:105:68)
WYe @ FilesPreview.tsx:58
f @ Conversation.tsx:41
j @ Conversation.tsx:189
C @ Conversation.tsx:203
Xgr.test.r.<computed> @ index.mjs:73
vt @ react-dom.production.min.js:54
kt @ react-dom.production.min.js:54
We @ react-dom.production.min.js:55
e2 @ react-dom.production.min.js:105
ND @ react-dom.production.min.js:106
(anonymous) @ react-dom.production.min.js:117
f5 @ react-dom.production.min.js:274
Ar @ react-dom.production.min.js:52
E4 @ react-dom.production.min.js:109
Ag @ react-dom.production.min.js:74
Rc @ react-dom.production.min.js:73
[NEW] Explain Console errors by using Copilot in Edge: click
         
         to explain an error. 
        Learn more
        Don't show again
```
<img width=""946"" height=""451"" alt=""Image"" src=""https://github.com/user-attachments/assets/65e15aa5-bce2-415e-b2d6-eec2f555527c"" />

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.26100
> Python Version:  3.11.0 (main, Oct 24 2022, 18:26:48) [MSC v.1933 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.3
> langchain: 1.0.3
> langchain_community: 0.4.1
> langsmith: 0.3.45
> langchain_classic: 1.0.0
> langchain_mcp_adapters: 0.1.12
> langchain_openai: 1.0.2
> langchain_text_splitters: 1.0.0
> langgraph_api: 0.5.12
> langgraph_cli: 0.4.7
> langgraph_runtime_inmem: 0.18.0
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.12.15
> async-timeout: Installed. No version info available.
> blockbuster: 1.5.25
> click: 8.3.0
> cloudpickle: 3.1.1
> cryptography: 44.0.3
> dataclasses-json: 0.6.7
> grpcio: 1.76.0
> grpcio-tools: 1.75.1
> httpx: 0.28.1
> httpx-sse: 0.4.1
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langchain-anthropic: Installed. No version info available.
> langchain-aws: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-huggingface: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.3
> langgraph-checkpoint: 3.0.1
> langsmith-pyo3: Installed. No version info available.
> mcp: 1.20.0
> numpy: 2.3.3
> openai: 1.109.1
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.37.0
> opentelemetry-exporter-otlp-proto-http: 1.37.0
> opentelemetry-sdk: 1.37.0
> orjson: 3.11.3
> packaging: 24.2
> protobuf: 6.33.0
> pydantic: 2.11.9
> pydantic-settings: 2.10.1
> pyjwt: 2.10.1
> pytest: 8.4.2
> python-dotenv: 1.1.1
> PyYAML: 6.0.2
> pyyaml: 6.0.2
> requests: 2.31.0
> requests-toolbelt: 1.0.0
> rich: 14.2.0
> SQLAlchemy: 2.0.43
> sqlalchemy: 2.0.43
> sse-starlette: 2.1.3
> starlette: 0.48.0
> structlog: 25.4.0
> tenacity: 8.5.0
> tiktoken: 0.12.0
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.36.0
> watchfiles: 1.1.1
> zstandard: 0.23.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6432/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6432/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6431,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6431/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6431/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6431/events,https://github.com/langchain-ai/langgraph/issues/6431,3612646614,I_kwDOKFU0lc7XVJzW,6431,ToolNode fails to execute tools with ToolRuntime parameter due to Pydantic validation error,"{'login': 'Haknt', 'id': 5864713, 'node_id': 'MDQ6VXNlcjU4NjQ3MTM=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5864713?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Haknt', 'html_url': 'https://github.com/Haknt', 'followers_url': 'https://api.github.com/users/Haknt/followers', 'following_url': 'https://api.github.com/users/Haknt/following{/other_user}', 'gists_url': 'https://api.github.com/users/Haknt/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Haknt/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Haknt/subscriptions', 'organizations_url': 'https://api.github.com/users/Haknt/orgs', 'repos_url': 'https://api.github.com/users/Haknt/repos', 'events_url': 'https://api.github.com/users/Haknt/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Haknt/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,,[],,2,2025-11-11T14:51:33Z,2025-11-14T11:18:58Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
import asyncio
from typing import TypedDict, Annotated, Sequence
from langchain_core.tools import tool
from langchain.tools import ToolRuntime
from langchain_core.messages import AIMessage
from langgraph.prebuilt import ToolNode
from langgraph.graph import StateGraph, END
from operator import add


# Define state
class TestState(TypedDict):
    messages: Annotated[Sequence, add]


# Define a tool that uses ToolRuntime
@tool
def get_current_time(runtime: ToolRuntime) -> str:
    """"""Get the current time.""""""
    return ""2025-01-01 12:00:00""


# Create ToolNode with the tool
tool_node = ToolNode([get_current_time])

# Build a simple graph
builder = StateGraph(TestState)
builder.add_node(""tools"", tool_node)
builder.set_entry_point(""tools"")
graph = builder.compile()


# Test the graph
async def test():
    initial_state = {
        ""messages"": [
            AIMessage(
                content=""Get time"",
                tool_calls=[{
                    ""name"": ""get_current_time"",
                    ""args"": {},
                    ""id"": ""call_1"",
                    ""type"": ""tool_call""
                }]
            )
        ]
    }
    
    result = await graph.ainvoke(initial_state)
    print(result)


if __name__ == ""__main__"":
    asyncio.run(test())
```

### Error Message and Stack Trace (if applicable)

```shell
pydantic_core._pydantic_core.ValidationError: 1 validation error for get_current_time
runtime
  Input should be a dictionary or an instance of ToolRuntime [type=dataclass_type, input_value=ToolRuntime(state={'messages': [...]}, context=None, config={...}, stream_writer=<function ...>, tool_call_id='call_1', store=None), input_type=ToolRuntime]
    For further information visit https://errors.pydantic.dev/2.11/v/dataclass_type

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "".../langgraph/prebuilt/tool_node.py"", line 990, in _execute_tool_async
    response = await tool.ainvoke(call_args, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "".../langchain_core/tools/structured.py"", line 61, in ainvoke
    return await run_in_executor(config, self.invoke, input, config, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "".../langchain_core/runnables/config.py"", line 603, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "".../concurrent/futures/thread.py"", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "".../langchain_core/runnables/config.py"", line 594, in wrapper
    return func(*args, **kwargs)
  File "".../langchain_core/tools/base.py"", line 598, in invoke
    return self.run(tool_input, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "".../langchain_core/tools/base.py"", line 907, in run
    raise error_to_raise
  File "".../langchain_core/tools/base.py"", line 866, in run
    tool_args, tool_kwargs = self._to_args_and_kwargs(
                             ~~~~~~~~~~~~~~~~~~~~~~~~^
        tool_input, tool_call_id
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "".../langchain_core/tools/base.py"", line 769, in _to_args_and_kwargs
    tool_input = self._parse_input(tool_input, tool_call_id)
  File "".../langchain_core/tools/base.py"", line 664, in _parse_input
    result = input_args.model_validate(tool_input)
  File "".../pydantic/main.py"", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        obj, strict=strict, from_attributes=from_attributes, context=context, by_alias=by_alias, by_name=by_name
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 1 validation error for get_current_time
runtime
  Input should be a dictionary or an instance of ToolRuntime [type=dataclass_type, input_value=ToolRuntime(...), input_type=ToolRuntime]

The above exception was the direct cause of the following exception:

langgraph.prebuilt.tool_node.ToolInvocationError: Error invoking tool 'get_current_time' with kwargs {} with error:
 
 Please fix the error and try again.
```

### Description

**What is the problem?**
When using `ToolNode` with a tool that has a `ToolRuntime` parameter, the tool execution fails with a Pydantic validation error. The error occurs because Pydantic cannot properly validate the `ToolRuntime` dataclass instance.

**What I expect to happen:**
The `ToolNode` should successfully execute tools that use `ToolRuntime` parameter, as this is a supported feature according to the LangGraph documentation.

**What actually happens:**
The tool execution fails with a `ValidationError` indicating that Pydantic cannot validate the `ToolRuntime` dataclass instance. The error message states: ""Input should be a dictionary or an instance of ToolRuntime [type=dataclass_type]"".


## Root Cause Analysis

The issue occurs in `ToolNode._execute_tool_async()` method at line 990 where it calls `tool.ainvoke(call_args, config)`. The `ToolRuntime` instance is correctly injected into `call_args['args']['runtime']` by the `_inject_tool_args()` method. However, when the tool's `ainvoke()` method is called, it triggers Pydantic validation via `input_args.model_validate(tool_input)` in `langchain_core/tools/base.py:664`.

The problem is that `ToolRuntime` is a dataclass (defined in `langgraph/prebuilt/tool_node.py:1471`), and Pydantic's validation mechanism cannot properly validate dataclass instances when they are passed directly. Pydantic expects either a dictionary or a properly configured Pydantic model instance.

## Workaround

A workaround is to inherit from `ToolNode` and override `_execute_tool_async()` to bypass Pydantic validation for tools with `ToolRuntime` parameters by directly calling the tool's underlying function:

```python
class FixedToolNode(ToolNode):
    async def _execute_tool_async(self, request, input_type, config):
        # ... inject runtime as before ...
        # Then call tool function directly instead of tool.ainvoke()
        if 'runtime' in params:
            result = await tool_func(runtime=runtime, **func_args)
        else:
            result = await tool.ainvoke(call_args, config)
        # ... convert result to ToolMessage ...
```

### System Info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 25.0.0
> Python Version:  3.13.3

Package Information
-------------------
> langchain_core: 1.0.4
> langchain: 1.0.2
> langgraph: 1.0.3
> pydantic: 2.11.7",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6431/reactions', 'total_count': 1, '+1': 1, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6431/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6430,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6430/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6430/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6430/events,https://github.com/langchain-ai/langgraph/issues/6430,3612240042,I_kwDOKFU0lc7XTmiq,6430,ä¸ºä»€ä¹ˆæ— æ³•å¯¼å…¥glm,"{'login': 'hnking-star', 'id': 175230002, 'node_id': 'U_kgDOCnHMMg', 'avatar_url': 'https://avatars.githubusercontent.com/u/175230002?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hnking-star', 'html_url': 'https://github.com/hnking-star', 'followers_url': 'https://api.github.com/users/hnking-star/followers', 'following_url': 'https://api.github.com/users/hnking-star/following{/other_user}', 'gists_url': 'https://api.github.com/users/hnking-star/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hnking-star/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hnking-star/subscriptions', 'organizations_url': 'https://api.github.com/users/hnking-star/orgs', 'repos_url': 'https://api.github.com/users/hnking-star/repos', 'events_url': 'https://api.github.com/users/hnking-star/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hnking-star/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,0,2025-11-11T13:04:20Z,2025-11-11T13:04:35Z,2025-11-11T13:04:35Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
os.environ[""ZHIPUAI_API_KEY""] = ""key""

model = ChatOpenAI(
    temperature=0.6,
    model=""glm-4.6"",
    openai_api_key=os.environ[""ZHIPUAI_API_KEY""],
    openai_api_base=""https://open.bigmodel.cn/api/coding/paas/v4""
)
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

æ— æ³•è¿è¡Œ

### System Info

æ— æ³•è¿è¡Œ","{'login': 'hnking-star', 'id': 175230002, 'node_id': 'U_kgDOCnHMMg', 'avatar_url': 'https://avatars.githubusercontent.com/u/175230002?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hnking-star', 'html_url': 'https://github.com/hnking-star', 'followers_url': 'https://api.github.com/users/hnking-star/followers', 'following_url': 'https://api.github.com/users/hnking-star/following{/other_user}', 'gists_url': 'https://api.github.com/users/hnking-star/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hnking-star/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hnking-star/subscriptions', 'organizations_url': 'https://api.github.com/users/hnking-star/orgs', 'repos_url': 'https://api.github.com/users/hnking-star/repos', 'events_url': 'https://api.github.com/users/hnking-star/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hnking-star/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6430/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6430/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6429,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6429/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6429/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6429/events,https://github.com/langchain-ai/langgraph/pull/6429,3608965280,PR_kwDOKFU0lc6ylQ53,6429,chore: langgraph patch release,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-10T17:15:51Z,2025-11-10T17:37:38Z,2025-11-10T17:37:35Z,COLLABORATOR,,,,,,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6429/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6429/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6429', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6429', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6429.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6429.patch', 'merged_at': '2025-11-10T17:37:35Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6428,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6428/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6428/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6428/events,https://github.com/langchain-ai/langgraph/pull/6428,3608392177,PR_kwDOKFU0lc6yjUYa,6428,chore(docs): Update links in notebook_hooks.py for deployment,"{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-10T14:47:19Z,2025-11-10T14:51:08Z,2025-11-10T14:51:06Z,CONTRIBUTOR,,,,,,"{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6428/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6428/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6428', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6428', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6428.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6428.patch', 'merged_at': '2025-11-10T14:51:06Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6427,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6427/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6427/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6427/events,https://github.com/langchain-ai/langgraph/pull/6427,3607203587,PR_kwDOKFU0lc6yfT7T,6427,fix _strip_extras helper function,"{'login': 'le-codeur-rapide', 'id': 166131032, 'node_id': 'U_kgDOCeb1WA', 'avatar_url': 'https://avatars.githubusercontent.com/u/166131032?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/le-codeur-rapide', 'html_url': 'https://github.com/le-codeur-rapide', 'followers_url': 'https://api.github.com/users/le-codeur-rapide/followers', 'following_url': 'https://api.github.com/users/le-codeur-rapide/following{/other_user}', 'gists_url': 'https://api.github.com/users/le-codeur-rapide/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/le-codeur-rapide/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/le-codeur-rapide/subscriptions', 'organizations_url': 'https://api.github.com/users/le-codeur-rapide/orgs', 'repos_url': 'https://api.github.com/users/le-codeur-rapide/repos', 'events_url': 'https://api.github.com/users/le-codeur-rapide/events{/privacy}', 'received_events_url': 'https://api.github.com/users/le-codeur-rapide/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-10T10:05:58Z,2025-11-10T10:06:04Z,,CONTRIBUTOR,,,,,"Hello everyone !
While reading the code of `libs/langgraph/langgraph/channels/binop.py`, I found out that the helper function `_strip_extras` may have a small typo:
```python
# Adapted from typing_extensions
def _strip_extras(t):  # type: ignore[no-untyped-def]
    """"""Strips Annotated, Required and NotRequired from a given type.""""""
    if hasattr(t, ""__origin__""):
        return _strip_extras(t.__origin__)
    if hasattr(t, ""__origin__"") and t.__origin__ in (Required, NotRequired):
        return _strip_extras(t.__args__[0])

    return t
```
There is an issue because the second part of the function will never be reached because if `hasattr(t, ""__origin__"") == False` then `hasattr(t, ""__origin__"") and t.__origin__ in (Required, NotRequired) == False` too.

The original implementation from typing_extension is [github link](https://github.com/python/typing_extensions/blob/196082138aebe36af7f5a1d08691b84dab950eea/src/typing_extensions.py#L1470C23-L1470C26) :
```python
  def _strip_extras(t):
      """"""Strips Annotated, Required and NotRequired from a given type.""""""
      if isinstance(t, typing._AnnotatedAlias):
          return _strip_extras(t.__origin__)
      if hasattr(t, ""__origin__"") and t.__origin__ in (Required, NotRequired, ReadOnly):
          return _strip_extras(t.__args__[0])
      # Other cases...
```
We can see that they don't use `hasattr(t, ""__origin__"")` as first condition but `isinstance(t, typing._AnnotatedAlias)` which specifically targets annotations.

This code was introduced in [this commit](https://github.com/langchain-ai/langgraph/commit/cec6ba4963d8746c577c3e68d395ef23bc725c4f). According to the docstring of the function, the first two lines are supposed to target the annotations specifically but I am not 100% certain that changing `if hasattr(t, ""__origin__""):` to `if isinstance(t, typing._AnnotatedAlias):` will not break other parts of the code (moreover there might be a reason the author of this commit made that choice.).
But switching the two ifs seams to fix the function behaviour without breaking any existing code, this is why I propose this small fix.

#### Sample code for the bug

We can exhibit the bug when manipulating the `BinaryOperatorAggregate` object:
```python
from typing import Required
import operator
from langgraph.channels.binop import BinaryOperatorAggregate

agg = BinaryOperatorAggregate(Required[list[int]], operator.add)
agg.value.append(1)
```
returns 
`AttributeError: 'object' object has no attribute 'append'`

But 
```python
from typing import Required
import operator
from langgraph.channels.binop import BinaryOperatorAggregate

agg = BinaryOperatorAggregate(list[int], operator.add)
agg.value.append(1)
```
works fine.

#### Higher level object manipulation
It looks like this code has no impact over higher level objects because the `BinaryOperatorAggregate` values are always updated via the `update()` method that will handle `MISSING` flag. the `BinaryOperatorAggregate(...).value` is never assigned directly in the code.


",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6427/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6427/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6427', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6427', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6427.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6427.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6426,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6426/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6426/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6426/events,https://github.com/langchain-ai/langgraph/issues/6426,3606977940,I_kwDOKFU0lc7W_h2U,6426,Checkpointer for mongodb is not updated to support langgraph-checkpoint 3.0,"{'login': 'Haneeshjaikar', 'id': 76054267, 'node_id': 'MDQ6VXNlcjc2MDU0MjY3', 'avatar_url': 'https://avatars.githubusercontent.com/u/76054267?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Haneeshjaikar', 'html_url': 'https://github.com/Haneeshjaikar', 'followers_url': 'https://api.github.com/users/Haneeshjaikar/followers', 'following_url': 'https://api.github.com/users/Haneeshjaikar/following{/other_user}', 'gists_url': 'https://api.github.com/users/Haneeshjaikar/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Haneeshjaikar/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Haneeshjaikar/subscriptions', 'organizations_url': 'https://api.github.com/users/Haneeshjaikar/orgs', 'repos_url': 'https://api.github.com/users/Haneeshjaikar/repos', 'events_url': 'https://api.github.com/users/Haneeshjaikar/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Haneeshjaikar/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-10T09:17:02Z,2025-11-12T05:34:14Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","Checkpointer for mongodb is not updated to support langgraph-checkpoint 3.0

_Originally posted by @Haneeshjaikar in https://github.com/langchain-ai/langgraph/issues/6313#issuecomment-3510362784_
 


# Issue: MongoDB Checkpointer Not Updated for `langgraph-checkpoint@3.0`

## Summary
The **MongoDB checkpointer package** has not yet been updated to support **`langgraph-checkpoint@3.0`**.  
As a result, applications using MongoDB as a checkpoint backend **cannot upgrade** to the latest version of `langgraph` without breaking compatibility.

---

## Affected Packages
- **Package:** `langgraph-checkpoint-mongodb` (current version)  
- **Dependency:** `langgraph-checkpoint (>=2.0, <3.0)`

---

## Impact
- **Blocked upgrades:** Applications depending on MongoDB checkpoints are stuck on `langgraph-checkpoint@2.x`.  
- **Security concern:** The older MongoDB checkpointer version triggers **Trivy vulnerability scans** due to outdated dependencies.  
- **Inconsistency:** Other checkpoint strategies (`redis`, `pg`, `sqlite`) have already been updated for **v3.0** compatibility.

---

## Steps to Reproduce
1. Attempt to upgrade `langgraph-checkpoint` to `3.0.0`.  
2. Use `langgraph-checkpoint-mongodb` as a checkpointer dependency.  
3. Observe **dependency conflict error** due to version constraints.

---

## Expected Behavior
The **MongoDB checkpointer** should support `langgraph-checkpoint@^3.0`, similar to the **Redis**, **Postgres**, and **in-memory** checkpointers.

---

## Proposed Solution / Request
Please update the **MongoDB checkpointer** to support `langgraph-checkpoint@^3.0`.
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6426/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6426/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6425,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6425/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6425/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6425/events,https://github.com/langchain-ai/langgraph/pull/6425,3606830280,PR_kwDOKFU0lc6yeGn8,6425,fix(langgraph): inject runtime with store for conditional edges in update_state operations #6340,"{'login': 'DraPraks', 'id': 150769865, 'node_id': 'U_kgDOCPyQyQ', 'avatar_url': 'https://avatars.githubusercontent.com/u/150769865?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/DraPraks', 'html_url': 'https://github.com/DraPraks', 'followers_url': 'https://api.github.com/users/DraPraks/followers', 'following_url': 'https://api.github.com/users/DraPraks/following{/other_user}', 'gists_url': 'https://api.github.com/users/DraPraks/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/DraPraks/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/DraPraks/subscriptions', 'organizations_url': 'https://api.github.com/users/DraPraks/orgs', 'repos_url': 'https://api.github.com/users/DraPraks/repos', 'events_url': 'https://api.github.com/users/DraPraks/events{/privacy}', 'received_events_url': 'https://api.github.com/users/DraPraks/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-10T08:43:06Z,2025-11-10T08:43:11Z,,NONE,,,,,"## Description

Fixes #6340 

This PR resolves a bug where conditional edge functions with a `store: BaseStore` parameter would fail with `ValueError: Missing required config key 'store'` when invoked during `update_state()` or `bulk_update_state()` operations.

## Problem

When using conditional edges with dependency injection for the `store` parameter, the graph would work correctly during normal execution (`invoke()`, `stream()`), but fail when state was updated via `update_state()` or `bulk_update_state()`. This is because the runtime configuration containing the store was not being passed to the writer functions (conditional edges) in the bulk update code paths.

**Example that was failing:**
```python
def route_with_store(
    state: State, 
    config: RunnableConfig, 
    store: BaseStore  # <-- This caused the error
) -> Literal[""next_node"", END]:
    # Access store for routing logic
    preferences = list(store.search(namespace))
    return ""next_node"" if preferences else END

builder.add_conditional_edges(""node"", route_with_store)
graph = builder.compile(checkpointer=checkpointer, store=store)

# This worked fine
graph.invoke({""value"": 1}, config)

# This failed with ValueError: Missing required config key 'store'
graph.update_state(config, {""value"": 2}, as_node=""node"")
```

## Solution

Applied the same runtime setup pattern used in `invoke()` and `stream()` methods to both `bulk_update_state()` and `abulk_update_state()` methods:

1. Extract store from config or use self.store
2. Create Runtime object with store, context, stream_writer, and previous state
3. Merge with parent runtime
4. Pass runtime via `CONFIG_KEY_RUNTIME` in configurable dict when invoking writers

This ensures conditional edges have access to all dependency-injected parameters during state updates, maintaining consistency across all execution paths.

## Changes

### Core Fix (`libs/langgraph/langgraph/pregel/main.py`)
- Added `PREVIOUS` constant import
- Added runtime setup in `bulk_update_state()` (lines ~1794-1808)
- Added runtime setup in `abulk_update_state()` (lines ~2247-2261)
- Pass runtime via `CONFIG_KEY_RUNTIME` to writer invocations in both methods

### Tests (`libs/langgraph/tests/test_pregel.py` & `test_pregel_async.py`)
Added 8 test cases (4 sync + 4 async):

1. **`test_conditional_edge_with_store_in_update_state`** - Basic regression test for the reported bug
2. **`test_conditional_edge_with_store_bulk_update_state`** - Tests bulk update scenario with multiple state updates
3. **`test_conditional_edge_store_with_config_runtime`** - Tests runtime merging when parent config already has runtime
4. **`test_conditional_edge_without_store_still_works`** - Backward compatibility test

Verifying:
- Conditional edges can access store parameter without errors
- Store operations (get, put, search) work correctly
- Routing logic executes properly
- Graph execution continues correctly after state updates

## Checklist

- [x] Bug fix (non-breaking change which fixes an issue)
- [x] Includes tests that fail before the fix and pass after
- [x] Follows existing code patterns and style
- [x] Passed `make format`, `make lint`, `make test`

---

## Notes

- Scope: `libs/langgraph`
- Branch: `fix/store-conditional-edge-update-state-6340`
- The fix mirrors the existing pattern used in `invoke()` and `stream()` methods for consistency
- All changes are isolated to the `Pregel` class in `main.py`
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6425/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6425/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6425', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6425', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6425.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6425.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6424,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6424/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6424/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6424/events,https://github.com/langchain-ai/langgraph/pull/6424,3606355515,PR_kwDOKFU0lc6yckzH,6424,chore(deps): bump codespell-project/actions-codespell from 2.1 to 2.2,"{'login': 'dependabot[bot]', 'id': 49699333, 'node_id': 'MDM6Qm90NDk2OTkzMzM=', 'avatar_url': 'https://avatars.githubusercontent.com/in/29110?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/dependabot%5Bbot%5D', 'html_url': 'https://github.com/apps/dependabot', 'followers_url': 'https://api.github.com/users/dependabot%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/dependabot%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/dependabot%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/dependabot%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/dependabot%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}, {'id': 8717114058, 'node_id': 'LA_kwDOKFU0lc8AAAACB5Sayg', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/github_actions', 'name': 'github_actions', 'color': '000000', 'default': False, 'description': 'Pull requests that update GitHub Actions code'}]",open,False,,[],,1,2025-11-10T06:34:12Z,2025-11-10T06:34:19Z,,CONTRIBUTOR,,,,,"Bumps [codespell-project/actions-codespell](https://github.com/codespell-project/actions-codespell) from 2.1 to 2.2.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/codespell-project/actions-codespell/releases"">codespell-project/actions-codespell's releases</a>.</em></p>
<blockquote>
<h2>v2.2</h2>
<!-- raw HTML omitted -->
<h2>What's Changed</h2>
<ul>
<li>Add the config file option and tests by <a href=""https://github.com/rdimaio""><code>@â€‹rdimaio</code></a> in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/80"">codespell-project/actions-codespell#80</a></li>
<li>Use <code>pip install</code> with <code>--no-cache-dir</code> in the Dockerfile by <a href=""https://github.com/PeterDaveHello""><code>@â€‹PeterDaveHello</code></a> in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/89"">codespell-project/actions-codespell#89</a></li>
<li>Upgrade to Python 3.13 by <a href=""https://github.com/candrews""><code>@â€‹candrews</code></a> in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/82"">codespell-project/actions-codespell#82</a></li>
<li>Add checkout action and problem matcher to README by <a href=""https://github.com/vadi2""><code>@â€‹vadi2</code></a> in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/32"">codespell-project/actions-codespell#32</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a href=""https://github.com/rdimaio""><code>@â€‹rdimaio</code></a> made their first contribution in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/80"">codespell-project/actions-codespell#80</a></li>
<li><a href=""https://github.com/PeterDaveHello""><code>@â€‹PeterDaveHello</code></a> made their first contribution in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/89"">codespell-project/actions-codespell#89</a></li>
<li><a href=""https://github.com/candrews""><code>@â€‹candrews</code></a> made their first contribution in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/82"">codespell-project/actions-codespell#82</a></li>
<li><a href=""https://github.com/vadi2""><code>@â€‹vadi2</code></a> made their first contribution in <a href=""https://redirect.github.com/codespell-project/actions-codespell/pull/32"">codespell-project/actions-codespell#32</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/codespell-project/actions-codespell/compare/v2...v2.2"">https://github.com/codespell-project/actions-codespell/compare/v2...v2.2</a></p>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/8f01853be192eb0f849a5c7d721450e7a467c579""><code>8f01853</code></a> MAINT: Release notes</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/23a4abea248a30208f0b9d8682ac515b5714cd3e""><code>23a4abe</code></a> Add checkout action and problem matcher to README (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/32"">#32</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/906f13fba196b1478f876bf3fdc4f9798c77b6f3""><code>906f13f</code></a> Upgrade to Python 3.13 (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/82"">#82</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/df0bba344d8a1022f611728aa58c5fdfd7c094b1""><code>df0bba3</code></a> [pre-commit.ci] pre-commit autoupdate (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/85"">#85</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/c460eef33ec1d5171b201b66ffc77bbdbdbb6b2a""><code>c460eef</code></a> Use <code>pip install</code> with <code>--no-cache-dir</code> in the Dockerfile (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/89"">#89</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/037a23a348b32d9060fe3b94ddf99986b779de2c""><code>037a23a</code></a> Add the config file option and tests (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/80"">#80</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/8d1a4b1bd974b8082be0842c2e7e57c8bf6b9b63""><code>8d1a4b1</code></a> Bump actions/setup-python from 5 to 6 (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/92"">#92</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/71286cb40fe09b3222aff820311357b4e67cc206""><code>71286cb</code></a> Bump actions/checkout from 4 to 5 (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/91"">#91</a>)</li>
<li><a href=""https://github.com/codespell-project/actions-codespell/commit/fad9339798e1ee3fe979ae0a022c931786a408b8""><code>fad9339</code></a> [pre-commit.ci] pre-commit autoupdate (<a href=""https://redirect.github.com/codespell-project/actions-codespell/issues/84"">#84</a>)</li>
<li>See full diff in <a href=""https://github.com/codespell-project/actions-codespell/compare/v2.1...v2.2"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=codespell-project/actions-codespell&package-manager=github_actions&previous-version=2.1&new-version=2.2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)


</details>",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6424/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6424/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6424', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6424', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6424.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6424.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6423,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6423/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6423/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6423/events,https://github.com/langchain-ai/langgraph/pull/6423,3605313470,PR_kwDOKFU0lc6yZJ2R,6423,Fix lint for APIConnectionError,"{'login': 'redwrasse', 'id': 6155946, 'node_id': 'MDQ6VXNlcjYxNTU5NDY=', 'avatar_url': 'https://avatars.githubusercontent.com/u/6155946?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/redwrasse', 'html_url': 'https://github.com/redwrasse', 'followers_url': 'https://api.github.com/users/redwrasse/followers', 'following_url': 'https://api.github.com/users/redwrasse/following{/other_user}', 'gists_url': 'https://api.github.com/users/redwrasse/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/redwrasse/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/redwrasse/subscriptions', 'organizations_url': 'https://api.github.com/users/redwrasse/orgs', 'repos_url': 'https://api.github.com/users/redwrasse/repos', 'events_url': 'https://api.github.com/users/redwrasse/events{/privacy}', 'received_events_url': 'https://api.github.com/users/redwrasse/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-09T18:24:51Z,2025-11-09T18:24:56Z,,NONE,,,,,"Getting familiar with the project; `make lint` in the pre-PR [steps](https://github.com/langchain-ai/langgraph/blob/main/AGENTS.md) run locally fails on `APIConnectionError`:

  ```
  error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
  --> langgraph_sdk/errors.py:91:35
   |
89 |         self, *, message: str = ""Connection error."", request: httpx.Request
90 |     ) -> None:
91 |         super().__init__(message, request, body=None)
   |                                   ^^^^^^^ Expected `Response`, found `Request`
   ...
   ```

Updates `APIConnectionError` with a potential fix to pass the lint.

(Claude explaining an outdated `ty` version, now updated in the pipeline, is responsible for this not failing CI):
```
  Timeline:

  1. Sept 24, 2025: PR #6173 introduced the bug
    - The APIConnectionError class was created with the type error
    - CI passed because ty (the type checker) didn't catch this error at that time
  2. ~Oct 29, 2025: ty was updated to version 0.0.1-alpha.25
    - This new version has improved type checking and now detects the invalid-argument-type error
  3. Nov 7, 2025: PR #6388 touched sdk-py files
    - Lint ran with the new version of ty
    - It FAILED with the exact same error you're seeing:
  error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
    --> langgraph_sdk/errors.py:91:35
    - The PR was merged anyway (likely with admin override) because:
        - The PR only changed auth/__init__.py, not errors.py
      - The error was in pre-existing code, not the new changes
  4. Since Nov 7: No changes to sdk-py
    - All CI runs skip the sdk-py lint job due to the changed-files filter
    - From the most recent main CI run: ""Analysing package code with our lint"": ""skipped""

  ```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6423/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6423/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6423', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6423', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6423.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6423.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6422,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6422/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6422/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6422/events,https://github.com/langchain-ai/langgraph/pull/6422,3605055887,PR_kwDOKFU0lc6yYV7r,6422,test(langchain) Complements changes from PR #6420 ( retry resilience) ,"{'login': 'sgmoorthy', 'id': 6230525, 'node_id': 'MDQ6VXNlcjYyMzA1MjU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/6230525?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sgmoorthy', 'html_url': 'https://github.com/sgmoorthy', 'followers_url': 'https://api.github.com/users/sgmoorthy/followers', 'following_url': 'https://api.github.com/users/sgmoorthy/following{/other_user}', 'gists_url': 'https://api.github.com/users/sgmoorthy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sgmoorthy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sgmoorthy/subscriptions', 'organizations_url': 'https://api.github.com/users/sgmoorthy/orgs', 'repos_url': 'https://api.github.com/users/sgmoorthy/repos', 'events_url': 'https://api.github.com/users/sgmoorthy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sgmoorthy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-09T14:17:51Z,2025-11-09T15:17:46Z,,NONE,,,,,"â€¦bustness

Thank you for contributing to LangGraph! Follow these steps to mark your pull request as ready for review. **If any of these steps are not completed, your PR will not be considered for review.**

- [x] **PR title**: Follows the format: {TYPE}({SCOPE}): {DESCRIPTION}
  - Examples:
    - feat(core): add multi-tenant support
    - fix(cli): resolve flag parsing error
    - docs(openai): update API usage examples
  - Allowed `{TYPE}` values:
    - feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, release
  - Allowed `{SCOPE}` values (optional):
    - langgraph, docs, cli, checkpoint, checkpoint-postgres, checkpoint-sqlite, prebuilt, scheduler-kafka, sdk-py
  - Once you've written the title, please delete this checklist item; do not include it in the PR.

- [x] **PR message**: ***Delete this entire checklist*** and replace with
  - **Description:** a description of the change. Include a [closing keyword](https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword) if applicable.
  - **Issue:** the issue # it fixes, if applicable
  - **Dependencies:** any dependencies required for this change
  - **Twitter handle:** if your PR gets announced, and you'd like a mention, we'll gladly shout you out!

- [x] **Add tests and docs**: If you're adding a new integration, you must include:
  1. A test for the integration, preferably unit tests that do not rely on network access,
  2. An example notebook showing its use. It lives in `docs/docs/integrations` directory.

- [x] **Lint and test**: Run `make format`, `make lint` and `make test` from the root of the package(s) you've modified. We will not consider a PR unless these three are passing in CI. See [contribution guidelines](https://github.com/langchain-ai/langgraph/blob/main/CONTRIBUTING.md) for more.

Additional guidelines:

- Make sure optional dependencies are imported within a function.
- Please do not add dependencies to `pyproject.toml` files (even optional ones) unless they are **required** for unit tests.
- Most PRs should not touch more than one package.
- Changes should be backwards compatible.
",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6422/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6422/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6422', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6422', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6422.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6422.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6421,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6421/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6421/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6421/events,https://github.com/langchain-ai/langgraph/pull/6421,3604251099,PR_kwDOKFU0lc6yVs7x,6421,chore(deps): upgrade dependencies with `uv lock --upgrade`,"{'login': 'github-actions[bot]', 'id': 41898282, 'node_id': 'MDM6Qm90NDE4OTgyODI=', 'avatar_url': 'https://avatars.githubusercontent.com/in/15368?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/github-actions%5Bbot%5D', 'html_url': 'https://github.com/apps/github-actions', 'followers_url': 'https://api.github.com/users/github-actions%5Bbot%5D/followers', 'following_url': 'https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}', 'gists_url': 'https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/github-actions%5Bbot%5D/subscriptions', 'organizations_url': 'https://api.github.com/users/github-actions%5Bbot%5D/orgs', 'repos_url': 'https://api.github.com/users/github-actions%5Bbot%5D/repos', 'events_url': 'https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}', 'received_events_url': 'https://api.github.com/users/github-actions%5Bbot%5D/received_events', 'type': 'Bot', 'user_view_type': 'public', 'site_admin': False}","[{'id': 6772434619, 'node_id': 'LA_kwDOKFU0lc8AAAABk6smuw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/dependencies', 'name': 'dependencies', 'color': '0366d6', 'default': False, 'description': 'Pull requests that update a dependency file'}]",open,False,,[],,1,2025-11-09T00:36:41Z,2025-11-23T00:39:41Z,,CONTRIBUTOR,,,,,"This PR updates the dependencies in all Python packages using `uv lock --upgrade`.

This is an automated PR created by the UV Lock Upgrade workflow.",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6421/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6421/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6421', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6421', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6421.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6421.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6420,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6420/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6420/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6420/events,https://github.com/langchain-ai/langgraph/pull/6420,3603569299,PR_kwDOKFU0lc6yTeWx,6420,fix(checkpoint-postgres): add minimal retry resilience to PostgresSaver for transient connection errors,"{'login': 'samirpatil2000', 'id': 55244065, 'node_id': 'MDQ6VXNlcjU1MjQ0MDY1', 'avatar_url': 'https://avatars.githubusercontent.com/u/55244065?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/samirpatil2000', 'html_url': 'https://github.com/samirpatil2000', 'followers_url': 'https://api.github.com/users/samirpatil2000/followers', 'following_url': 'https://api.github.com/users/samirpatil2000/following{/other_user}', 'gists_url': 'https://api.github.com/users/samirpatil2000/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/samirpatil2000/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/samirpatil2000/subscriptions', 'organizations_url': 'https://api.github.com/users/samirpatil2000/orgs', 'repos_url': 'https://api.github.com/users/samirpatil2000/repos', 'events_url': 'https://api.github.com/users/samirpatil2000/events{/privacy}', 'received_events_url': 'https://api.github.com/users/samirpatil2000/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-08T13:38:17Z,2025-11-11T14:59:45Z,,NONE,,,,,"### Description
This PR adds minimal, targeted retry resilience around the I/O boundaries where `PostgresSaver` interacts with PostgreSQL to mitigate transient connection errors without altering public APIs or overall behavior.

- Imports: add `time` and `psycopg.errors.OperationalError`
- `PostgresSaver.__init__`: add `max_retries` (default 3) and `retry_delay_seconds` (default 2.0); persist `conninfo` for reconnection; docstring updated
- Helpers:
  - `_execute_with_retries`: retries on `OperationalError`/`ConnectionError`, sleeps, attempts `_reconnect`, re-raises on final attempt; preserves return values
  - `_reconnect`: safely closes and recreates `ConnectionPool`/`Connection` from `conninfo`
- Wrapped DB-touching methods only: `setup`, `list`, `get_tuple`, `put`, `put_writes`
- No new dependencies or files; behavior and typing preserved

### Issue
None.

### Dependencies
None.

### How to test
- Run existing test suite; no changes required.
- Manual:
  1. Exercise `setup`, `put`, `put_writes`, `list`, `get_tuple` against local Postgres.
  2. Induce transient failures (network blip/Postgres restart) and observe automatic retries.
  3. Confirm original exception surfaces after the final retry.

### Risks
- `conninfo` may be unavailable for custom wrappers; `_reconnect` is best-effort.
- Over-retrying persistent failures; mitigated by conservative defaults and configurable kwargs.

### Twitter handle
https://x.com/sampatil1010",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6420/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6420/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6420', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6420', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6420.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6420.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6419,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6419/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6419/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6419/events,https://github.com/langchain-ai/langgraph/pull/6419,3603562448,PR_kwDOKFU0lc6yTdCP,6419,fix: make ToolNode changes more backwards compat,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-08T13:28:53Z,2025-11-08T13:32:10Z,2025-11-08T13:32:10Z,COLLABORATOR,,,,,"* Allows for direct invocation w/o mocked runtime
* Old overrides are still compat w/ new signatures bc of defaults","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6419/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6419/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6419', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6419', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6419.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6419.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6418,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6418/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6418/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6418/events,https://github.com/langchain-ai/langgraph/pull/6418,3602545221,PR_kwDOKFU0lc6yQM35,6418,feat(docs): enhance return type documentation for graph run method,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-08T01:48:34Z,2025-11-08T13:08:53Z,,MEMBER,,,,,Might also want to do for `stream`?,,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6418/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6418/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6418', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6418', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6418.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6418.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6417,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6417/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6417/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6417/events,https://github.com/langchain-ai/langgraph/pull/6417,3602544475,PR_kwDOKFU0lc6yQMuW,6417,feat(docs): warn that `StateGraph` is a builder class,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-08T01:47:39Z,2025-11-08T02:09:17Z,2025-11-08T02:09:15Z,MEMBER,,,,,,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6417/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6417/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6417', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6417', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6417.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6417.patch', 'merged_at': '2025-11-08T02:09:15Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6416,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6416/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6416/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6416/events,https://github.com/langchain-ai/langgraph/pull/6416,3602543966,PR_kwDOKFU0lc6yQMnz,6416,fix(docs): `PartialState` rendering in MkDocs,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-08T01:46:57Z,2025-11-08T02:08:04Z,2025-11-08T02:08:02Z,MEMBER,,,,,The carat chars were not rendering without code style formatting,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6416/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6416/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6416', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6416', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6416.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6416.patch', 'merged_at': '2025-11-08T02:08:02Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6415,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6415/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6415/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6415/events,https://github.com/langchain-ai/langgraph/pull/6415,3602497891,PR_kwDOKFU0lc6yQDLO,6415,fix(docs): synchronize `invoke` and `ainvoke` docstrings,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-08T00:59:46Z,2025-11-08T01:44:35Z,2025-11-08T01:44:33Z,MEMBER,,,,,Similar to #6414,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6415/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6415/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6415', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6415', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6415.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6415.patch', 'merged_at': '2025-11-08T01:44:33Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6414,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6414/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6414/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6414/events,https://github.com/langchain-ai/langgraph/pull/6414,3602493682,PR_kwDOKFU0lc6yQCTf,6414,fix(docs): synchronize `stream` and `astream` docstrings,"{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-08T00:56:27Z,2025-11-08T01:44:27Z,2025-11-08T01:44:25Z,MEMBER,,,,,"`stream` and `astream` docstrings listed different available `stream_mode` options.

Both methods support the same seven stream modes as defined in `StreamMode`

Fixed for consistency","{'login': 'mdrxy', 'id': 61371264, 'node_id': 'MDQ6VXNlcjYxMzcxMjY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/61371264?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mdrxy', 'html_url': 'https://github.com/mdrxy', 'followers_url': 'https://api.github.com/users/mdrxy/followers', 'following_url': 'https://api.github.com/users/mdrxy/following{/other_user}', 'gists_url': 'https://api.github.com/users/mdrxy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mdrxy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mdrxy/subscriptions', 'organizations_url': 'https://api.github.com/users/mdrxy/orgs', 'repos_url': 'https://api.github.com/users/mdrxy/repos', 'events_url': 'https://api.github.com/users/mdrxy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mdrxy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6414/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6414/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6414', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6414', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6414.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6414.patch', 'merged_at': '2025-11-08T01:44:25Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6411,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6411/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6411/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6411/events,https://github.com/langchain-ai/langgraph/pull/6411,3601159618,PR_kwDOKFU0lc6yLhsO,6411,fix(langgraph): fix command usage with nested subgraphs,"{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,1,2025-11-07T16:51:20Z,2025-11-07T16:52:08Z,,COLLABORATOR,,,,,"Need to re-review prior to merge

Resolve https://github.com/langchain-ai/langgraph/issues/6409",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6411/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6411/timeline,,,True,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6411', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6411', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6411.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6411.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6410,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6410/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6410/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6410/events,https://github.com/langchain-ai/langgraph/pull/6410,3601075619,PR_kwDOKFU0lc6yLPHO,6410,docs(langgraph): Fix docstring code examples of task function,"{'login': 'le-codeur-rapide', 'id': 166131032, 'node_id': 'U_kgDOCeb1WA', 'avatar_url': 'https://avatars.githubusercontent.com/u/166131032?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/le-codeur-rapide', 'html_url': 'https://github.com/le-codeur-rapide', 'followers_url': 'https://api.github.com/users/le-codeur-rapide/followers', 'following_url': 'https://api.github.com/users/le-codeur-rapide/following{/other_user}', 'gists_url': 'https://api.github.com/users/le-codeur-rapide/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/le-codeur-rapide/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/le-codeur-rapide/subscriptions', 'organizations_url': 'https://api.github.com/users/le-codeur-rapide/orgs', 'repos_url': 'https://api.github.com/users/le-codeur-rapide/repos', 'events_url': 'https://api.github.com/users/le-codeur-rapide/events{/privacy}', 'received_events_url': 'https://api.github.com/users/le-codeur-rapide/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,"{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,1,2025-11-07T16:28:18Z,2025-11-07T21:01:20Z,2025-11-07T21:01:20Z,CONTRIBUTOR,,,,,"Hi all,
I found out that the sync and async code examples of the `task` function in `libs/langgraph/langgraph/func/__init__.py` have a typo:
```
    Example: Sync Task
        ```python
        from langgraph.func import entrypoint, task


        @task
        def add_one(a: int) -> int:
            return a + 1


        @entrypoint()
        def add_one(numbers: list[int]) -> list[int]:
            futures = [add_one(n) for n in numbers]
            results = [f.result() for f in futures]
            return results


        # Call the entrypoint
        add_one.invoke([1, 2, 3])  # Returns [2, 3, 4]
        ```
```

Both task and entrypoint functions have the same name which gives an error.

This is a small PR to fix this","{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6410/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6410/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6410', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6410', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6410.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6410.patch', 'merged_at': '2025-11-07T21:01:20Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6409,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6409/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6409/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6409/events,https://github.com/langchain-ai/langgraph/issues/6409,3599645697,I_kwDOKFU0lc7WjjwB,6409,Returning `Command` with `goto` attribute in a graph with >= 3 total graph depth results in `langgraph.errors.ParentCommand` error,"{'login': 'egebilecen', 'id': 29331682, 'node_id': 'MDQ6VXNlcjI5MzMxNjgy', 'avatar_url': 'https://avatars.githubusercontent.com/u/29331682?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/egebilecen', 'html_url': 'https://github.com/egebilecen', 'followers_url': 'https://api.github.com/users/egebilecen/followers', 'following_url': 'https://api.github.com/users/egebilecen/following{/other_user}', 'gists_url': 'https://api.github.com/users/egebilecen/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/egebilecen/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/egebilecen/subscriptions', 'organizations_url': 'https://api.github.com/users/egebilecen/orgs', 'repos_url': 'https://api.github.com/users/egebilecen/repos', 'events_url': 'https://api.github.com/users/egebilecen/events{/privacy}', 'received_events_url': 'https://api.github.com/users/egebilecen/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",open,False,"{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,2,2025-11-07T10:18:11Z,2025-11-10T09:13:23Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langchain_core.messages import BaseMessage
from langchain_core.runnables import RunnableConfig
from langgraph.checkpoint.memory import MemorySaver
from langgraph.graph import StateGraph, START
from langgraph.types import Command
from langgraph.graph.message import add_messages
from typing import Annotated, TypedDict, Sequence

class State(TypedDict):
    messages: Annotated[Sequence[BaseMessage], add_messages]

def sub_sub_child(state):
    return Command(
        graph=Command.PARENT,
        goto=""sub_child_3"",
        update={""messages"": state[""messages""] + [""sub_sub_child executed, going to sub_child_3""]},
    )

sub_sub_builder = StateGraph(State)
sub_sub_builder.add_node(""sub_sub_child"", sub_sub_child)
sub_sub_builder.add_edge(START, ""sub_sub_child"")
sub_sub_graph = sub_sub_builder.compile(name=""sub_sub_graph"", checkpointer=True)

def sub_child_1(state):
    return {""messages"": state[""messages""] + [""sub_child_1 executed""]}

def sub_child_3(state):
    return {""messages"": state[""messages""] + [""sub_child_3 executed""]}

sub_builder = StateGraph(State)
sub_builder.add_node(""sub_child_1"", sub_child_1)
sub_builder.add_node(""sub_child_2"", sub_sub_graph)
sub_builder.add_node(""sub_child_3"", sub_child_3)
sub_builder.add_edge(START, ""sub_child_1"")
sub_builder.add_edge(""sub_child_1"", ""sub_child_2"")
sub_graph = sub_builder.compile(name=""sub_graph"", checkpointer=True)

def child_1(state):
    return {""messages"": state[""messages""] + [""child_1 executed""]}

builder = StateGraph(State)
builder.add_node(""child_1"", child_1)
builder.add_node(""child_2"", sub_graph)
builder.add_edge(START, ""child_1"")
builder.add_edge(""child_1"", ""child_2"")
graph = builder.compile(name=""main_graph"", checkpointer=MemorySaver())

result = graph.invoke({""messages"":[]}, RunnableConfig(recursion_limit=100, configurable={""thread_id"": 1}))
```

### Error Message and Stack Trace (if applicable)

```shell
langgraph.errors.ParentCommand: Command(graph='child_2|sub_child_2', update={'messages': [HumanMessage(content='child_1 executed', additional_kwargs={}, response_metadata={}, id='0d913850-1062-4395-a94b-1edccb9fc3e8'), HumanMessage(content='sub_child_1 executed', additional_kwargs={}, response_metadata={}, id='bce46bfc-5040-40e7-a080-04c735edcabe'), 'sub_sub_child executed, going to sub_child_3']}, goto='sub_child_3')
```

### Description

I am working on a graph which has a sub-graph as one of its nodes. This sub-graph also has a sub-graph in it. So essentially, we have a parent graph (called `main_graph`), which has one sub-graph as its node (called `sub_graph`). This `sub_graph` also has a sub-graph as its node (called `sub_sub_graph`). Returning a `Command` from the `sub_sub_graph`'s one node that targets its parent (which should be `sub_graph`) results in an error.

### System Info

System Information
------------------
> OS:  Linux
> OS Version:  #1 SMP PREEMPT_DYNAMIC Wed Jan 15 08:02:15 EST 2025
> Python Version:  3.12.0 (main, Aug 26 2024, 03:18:57) [GCC 8.5.0 20210514 (Red Hat 8.5.0-4)]

Package Information
-------------------
> langchain_core: 0.3.76
> langchain: 0.3.27
> langsmith: 0.4.4
> langchain_openai: 0.3.27
> langchain_text_splitters: 0.3.11
> langgraph_sdk: 0.2.0
> langgraph_supervisor: 0.0.29

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> async-timeout<5.0.0,>=4.0.0;: Installed. No version info available.
> httpx: 0.28.1
> httpx>=0.25.2: Installed. No version info available.
> jsonpatch<2.0,>=1.33: Installed. No version info available.
> langchain-anthropic;: Installed. No version info available.
> langchain-aws;: Installed. No version info available.
> langchain-azure-ai;: Installed. No version info available.
> langchain-cohere;: Installed. No version info available.
> langchain-community;: Installed. No version info available.
> langchain-core<1.0.0,>=0.3.66: Installed. No version info available.
> langchain-core<1.0.0,>=0.3.72: Installed. No version info available.
> langchain-core<2.0.0,>=0.3.75: Installed. No version info available.
> langchain-core>=0.3.40: Installed. No version info available.
> langchain-deepseek;: Installed. No version info available.
> langchain-fireworks;: Installed. No version info available.
> langchain-google-genai;: Installed. No version info available.
> langchain-google-vertexai;: Installed. No version info available.
> langchain-groq;: Installed. No version info available.
> langchain-huggingface;: Installed. No version info available.
> langchain-mistralai;: Installed. No version info available.
> langchain-ollama;: Installed. No version info available.
> langchain-openai;: Installed. No version info available.
> langchain-perplexity;: Installed. No version info available.
> langchain-text-splitters<1.0.0,>=0.3.9: Installed. No version info available.
> langchain-together;: Installed. No version info available.
> langchain-xai;: Installed. No version info available.
> langgraph<0.7.0,>=0.6.0: Installed. No version info available.
> langsmith-pyo3: Installed. No version info available.
> langsmith>=0.1.17: Installed. No version info available.
> langsmith>=0.3.45: Installed. No version info available.
> openai-agents: Installed. No version info available.
> openai<2.0.0,>=1.86.0: Installed. No version info available.
> opentelemetry-api: Installed. No version info available.
> opentelemetry-exporter-otlp-proto-http: Installed. No version info available.
> opentelemetry-sdk: Installed. No version info available.
> orjson: 3.10.18
> orjson>=3.10.1: Installed. No version info available.
> packaging: 24.2
> packaging>=23.2: Installed. No version info available.
> pydantic: 2.10.6
> pydantic<3.0.0,>=2.7.4: Installed. No version info available.
> pydantic>=2.7.4: Installed. No version info available.
> pytest: Installed. No version info available.
> PyYAML>=5.3: Installed. No version info available.
> requests: 2.32.4
> requests-toolbelt: 1.0.0
> requests<3,>=2: Installed. No version info available.
> rich: 14.0.0
> SQLAlchemy<3,>=1.4: Installed. No version info available.
> tenacity!=8.4.0,<10.0.0,>=8.1.0: Installed. No version info available.
> tiktoken<1,>=0.7: Installed. No version info available.
> typing-extensions>=4.7: Installed. No version info available.
> zstandard: 0.23.0",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6409/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6409/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6407,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6407/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6407/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6407/events,https://github.com/langchain-ai/langgraph/pull/6407,3599411480,PR_kwDOKFU0lc6yFiWd,6407,docs(langgraph): Fix typo in docstring of PregelLoop.tick,"{'login': 'le-codeur-rapide', 'id': 166131032, 'node_id': 'U_kgDOCeb1WA', 'avatar_url': 'https://avatars.githubusercontent.com/u/166131032?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/le-codeur-rapide', 'html_url': 'https://github.com/le-codeur-rapide', 'followers_url': 'https://api.github.com/users/le-codeur-rapide/followers', 'following_url': 'https://api.github.com/users/le-codeur-rapide/following{/other_user}', 'gists_url': 'https://api.github.com/users/le-codeur-rapide/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/le-codeur-rapide/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/le-codeur-rapide/subscriptions', 'organizations_url': 'https://api.github.com/users/le-codeur-rapide/orgs', 'repos_url': 'https://api.github.com/users/le-codeur-rapide/repos', 'events_url': 'https://api.github.com/users/le-codeur-rapide/events{/privacy}', 'received_events_url': 'https://api.github.com/users/le-codeur-rapide/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-07T09:17:01Z,2025-11-07T12:38:17Z,2025-11-07T12:38:16Z,CONTRIBUTOR,,,,,"This is a very small PR to correct a typo in the docstring of the `PregelLoop.tick()` method.
```python
  def tick(self) -> bool:
      """"""Execute a single iteration of the Pregel loop.

      Args:
          input_keys: The key(s) to read input from.

      Returns:
          True if more iterations are needed.
      """"""
```

Corrected to :
```python
  def tick(self) -> bool:
      """"""Execute a single iteration of the Pregel loop.

      Returns:
          True if more iterations are needed.
      """"""
```

The docstring was written in #2946 when the signature of tick was
```python
    def tick(
        self,
        *,
        input_keys: Union[str, Sequence[str]],
    ) -> bool:
```
but  it was simplified to 
```python
def tick(self) -> bool:
```
in #5080 ","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6407/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6407/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6407', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6407', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6407.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6407.patch', 'merged_at': '2025-11-07T12:38:16Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6406,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6406/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6406/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6406/events,https://github.com/langchain-ai/langgraph/issues/6406,3599326590,I_kwDOKFU0lc7WiV1-,6406,Inconsistency of concurrent nodes,"{'login': 'vanner-young', 'id': 42507349, 'node_id': 'MDQ6VXNlcjQyNTA3MzQ5', 'avatar_url': 'https://avatars.githubusercontent.com/u/42507349?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/vanner-young', 'html_url': 'https://github.com/vanner-young', 'followers_url': 'https://api.github.com/users/vanner-young/followers', 'following_url': 'https://api.github.com/users/vanner-young/following{/other_user}', 'gists_url': 'https://api.github.com/users/vanner-young/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/vanner-young/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/vanner-young/subscriptions', 'organizations_url': 'https://api.github.com/users/vanner-young/orgs', 'repos_url': 'https://api.github.com/users/vanner-young/repos', 'events_url': 'https://api.github.com/users/vanner-young/events{/privacy}', 'received_events_url': 'https://api.github.com/users/vanner-young/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,"{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,2,2025-11-07T08:51:03Z,2025-11-07T19:49:38Z,2025-11-07T19:49:38Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
def run_node():
    class AgentState(TypedDict):
        node_1: str
        node_2: str
        node_3: str
        node_4: str
        node_5: str
        node_6: str

    def node1(state: AgentState):
        return { 'node_1': 'node1' }

    def node2(state: AgentState):
        return { 'node_2': 'node2' }

    def node3(state: AgentState):
        return { 'node_3': 'node3' }

    def node4(state: AgentState):
        return { 'node_4': 'node4' }

    def node5(state: AgentState):
        print('---> node5 exec', state)
        return { 'node_5': 'node5' }

    def node6(state: AgentState):
        return { 'node_6': 'node6' }

    with_builder = StateGraph(AgentState)
    with_builder.add_node('node1', node1)
    with_builder.add_node('node2', node2)
    with_builder.add_node('node3', node3)
    with_builder.add_node('node4', node4)
    with_builder.add_node('node5', node5)
    with_builder.add_node('node6', node6)

    with_builder.add_edge(START, 'node1')
    with_builder.add_edge(START, 'node2')
    with_builder.add_edge('node1', 'node3')
    with_builder.add_edge('node2', 'node4')
    with_builder.add_edge('node4', 'node6')
    with_builder.add_edge('node3', 'node5')
    with_builder.add_edge('node6', 'node5')
    with_builder.add_edge('node5', END)

    graph = with_builder.compile()

    display(Image(graph.get_graph().draw_mermaid_png(output_file_path='./graph.png')))
    response = graph.invoke({})
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

Please refer to my code example above.

Strangely, the code example above produces the following result:

""---> node5 exec"", which is printed twice.

However, if I modify the execution order of the process nodes as follows:
```
with_builder.add_edge(START, 'node1')
with_builder.add_edge(START, 'node2')
with_builder.add_edge('node1', 'node3')
with_builder.add_edge('node2', 'node4')
with_builder.add_edge('node3', 'node5')
with_builder.add_edge('node4', 'node5')
with_builder.add_edge('node5', END)
```
Then, ""---> node5 exec"", is only printed once.

It's strange that the original example only has one more execution node than the modified example, even though both are actually two concurrent execution lines. I believe that in both the original and modified examples, ""---> node5 exec"" should be printed twice.

I don't think this is a bug, but it's easily misleading.

### System Info

system:
    windows11

packages:
    langgraph: v1.0.2","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6406/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6406/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6403,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6403/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6403/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6403/events,https://github.com/langchain-ai/langgraph/pull/6403,3596499852,PR_kwDOKFU0lc6x770E,6403,fix: patch tool names when not specified on custom messages,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,2,2025-11-06T16:09:20Z,2025-11-07T12:39:21Z,2025-11-07T12:39:20Z,COLLABORATOR,,,,,,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6403/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6403/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6403', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6403', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6403.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6403.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6402,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6402/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6402/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6402/events,https://github.com/langchain-ai/langgraph/pull/6402,3596226283,PR_kwDOKFU0lc6x6-8y,6402,chore(checkpoint-postgres): bump to 3.0.1,"{'login': 'jdrogers940', 'id': 16026633, 'node_id': 'MDQ6VXNlcjE2MDI2NjMz', 'avatar_url': 'https://avatars.githubusercontent.com/u/16026633?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jdrogers940', 'html_url': 'https://github.com/jdrogers940', 'followers_url': 'https://api.github.com/users/jdrogers940/followers', 'following_url': 'https://api.github.com/users/jdrogers940/following{/other_user}', 'gists_url': 'https://api.github.com/users/jdrogers940/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jdrogers940/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jdrogers940/subscriptions', 'organizations_url': 'https://api.github.com/users/jdrogers940/orgs', 'repos_url': 'https://api.github.com/users/jdrogers940/repos', 'events_url': 'https://api.github.com/users/jdrogers940/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jdrogers940/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-06T15:06:35Z,2025-11-06T16:14:05Z,2025-11-06T16:14:02Z,COLLABORATOR,,,,,"**Description:** Bumping the checkpoint-postgres package to version 3.0.1 to release an update to migrations (https://github.com/langchain-ai/langgraph/pull/6400). 
**Issue:** N/A
**Dependencies:** N/A
**Twitter handle:** N/A
","{'login': 'jdrogers940', 'id': 16026633, 'node_id': 'MDQ6VXNlcjE2MDI2NjMz', 'avatar_url': 'https://avatars.githubusercontent.com/u/16026633?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jdrogers940', 'html_url': 'https://github.com/jdrogers940', 'followers_url': 'https://api.github.com/users/jdrogers940/followers', 'following_url': 'https://api.github.com/users/jdrogers940/following{/other_user}', 'gists_url': 'https://api.github.com/users/jdrogers940/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jdrogers940/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jdrogers940/subscriptions', 'organizations_url': 'https://api.github.com/users/jdrogers940/orgs', 'repos_url': 'https://api.github.com/users/jdrogers940/repos', 'events_url': 'https://api.github.com/users/jdrogers940/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jdrogers940/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6402/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6402/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6402', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6402', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6402.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6402.patch', 'merged_at': '2025-11-06T16:14:02Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6404,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6404/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6404/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6404/events,https://github.com/langchain-ai/langgraph/issues/6404,3596710830,I_kwDOKFU0lc7WYXOu,6404,Deprecation message for `langgraph.prebuilt.create_react_agent` has a wrong suggestion,"{'login': 'ilnarkhasanov', 'id': 37439026, 'node_id': 'MDQ6VXNlcjM3NDM5MDI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/37439026?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/ilnarkhasanov', 'html_url': 'https://github.com/ilnarkhasanov', 'followers_url': 'https://api.github.com/users/ilnarkhasanov/followers', 'following_url': 'https://api.github.com/users/ilnarkhasanov/following{/other_user}', 'gists_url': 'https://api.github.com/users/ilnarkhasanov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/ilnarkhasanov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/ilnarkhasanov/subscriptions', 'organizations_url': 'https://api.github.com/users/ilnarkhasanov/orgs', 'repos_url': 'https://api.github.com/users/ilnarkhasanov/repos', 'events_url': 'https://api.github.com/users/ilnarkhasanov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/ilnarkhasanov/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,4,2025-11-06T10:01:52Z,2025-11-18T16:51:00Z,2025-11-07T10:48:28Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","When I import langgraph.prebuilt.create_react_agent, I get the following deprecation message:

> create_react_agent has been moved to `langchain.agents`. Please update your import to `from langchain.agents import create_agent`.

However, there is no `create_agent` in `langchain.agents`:
<img width=""389"" height=""47"" alt=""Image"" src=""https://github.com/user-attachments/assets/eb9c1dfe-7979-46bb-88a5-df24a63ba4d9"" />

I consider this as a documentation bug and offer my help in fixing this. Specifically, I suggest to change the text to the following:

> create_react_agent has been moved to `langchain.agents`. Please update your import to `from langchain.agents import create_react_agent`.","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6404/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6404/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6401,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6401/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6401/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6401/events,https://github.com/langchain-ai/langgraph/issues/6401,3594522275,I_kwDOKFU0lc7WQA6j,6401,Pydantic populate_by_name not respected in StateGraph input validation,"{'login': 'smart-cau', 'id': 13105073, 'node_id': 'MDQ6VXNlcjEzMTA1MDcz', 'avatar_url': 'https://avatars.githubusercontent.com/u/13105073?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/smart-cau', 'html_url': 'https://github.com/smart-cau', 'followers_url': 'https://api.github.com/users/smart-cau/followers', 'following_url': 'https://api.github.com/users/smart-cau/following{/other_user}', 'gists_url': 'https://api.github.com/users/smart-cau/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/smart-cau/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/smart-cau/subscriptions', 'organizations_url': 'https://api.github.com/users/smart-cau/orgs', 'repos_url': 'https://api.github.com/users/smart-cau/repos', 'events_url': 'https://api.github.com/users/smart-cau/events{/privacy}', 'received_events_url': 'https://api.github.com/users/smart-cau/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-06T07:40:07Z,2025-11-07T10:52:48Z,2025-11-07T10:52:48Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","## Bug Description

Pydantic's `populate_by_name=True` configuration is not respected during LangGraph's `StateGraph` input validation, causing validation errors when using field aliases (camelCase) instead of original field names (snake_case).

## Environment

- **LangGraph version**: 1.0.1
- **Python version**: 3.13.5
- **Pydantic version**: 2.x

## Steps to Reproduce

```python
from pydantic import BaseModel, ConfigDict, Field
from langgraph.graph import StateGraph, START, END

def to_camel(string: str) -> str:
    """"""Convert snake_case to camelCase.""""""
    return """".join(
        word.capitalize() if i != 0 else word
        for i, word in enumerate(string.split(""_""))
    )

class BaseStateConfig(BaseModel):
    model_config = ConfigDict(
        alias_generator=to_camel,
        populate_by_name=True,  # Should allow both snake_case and camelCase
        serialize_by_alias=True,
    )

class InputState(BaseStateConfig):
    user_name: str = Field(description=""User name"")
    user_age: int | None = Field(default=None, description=""User age"")

class OutputState(BaseStateConfig):
    result: str | None = Field(default=None, description=""Result"")

class GraphState(InputState, OutputState):
    pass

def process_node(state: GraphState) -> dict:
    return {""result"": f""Hello, {state.user_name}!""}

# Create graph
workflow = StateGraph(GraphState, input_schema=InputState, output_schema=OutputState)
workflow.add_node(""process"", process_node)
workflow.add_edge(START, ""process"")
workflow.add_edge(""process"", END)
graph = workflow.compile()

# Test 1: snake_case input (works)
result1 = graph.invoke({""user_name"": ""Alice"", ""user_age"": 30})
print(""âœ… Test 1 passed:"", result1)

# Test 2: camelCase input (fails, but should work due to populate_by_name=True)
result2 = graph.invoke({""userName"": ""Bob"", ""userAge"": 25})
print(""âœ… Test 2 passed:"", result2)
```

## Expected Behavior

Both Test 1 (snake_case) and Test 2 (camelCase) should succeed, because:
1. `alias_generator=to_camel` creates camelCase aliases for all fields
2. `populate_by_name=True` allows **both** original names (snake_case) **and** aliases (camelCase) during validation

## Actual Behavior

Test 2 fails with:
```
pydantic_core._pydantic_core.ValidationError: 1 validation error for GraphState
userName
  Field required [type=missing, input_value={'userName': 'Bob', 'userAge': 25}, input_type=dict]
```

The camelCase fields are not recognized, even though Pydantic's `populate_by_name=True` should enable this.

## Root Cause Analysis

The issue appears to be in `langgraph/graph/state.py` around line 1237 in the `_coerce_state` function:

```python
def _coerce_state(schema, input):
    return schema(**input)
```

LangGraph's state coercion logic may be bypassing Pydantic's normal validation flow, which respects `populate_by_name`. The direct field mapping or optimization in LangGraph's state handling might not honor Pydantic's `model_config` settings.

## Verification: Pydantic Works Correctly

Direct Pydantic validation works as expected:

```python
# This works perfectly:
state1 = InputState(user_name=""Alice"", user_age=30)  # snake_case
state2 = InputState(userName=""Bob"", userAge=25)      # camelCase
# Both succeed âœ…
```

The issue only occurs when going through LangGraph's `StateGraph.invoke()`.

## Suggested Fix

LangGraph's state validation should respect Pydantic's `model_config` settings, particularly `populate_by_name`. This would allow users to:

1. Define schemas with snake_case (Python convention)
2. Use camelCase aliases for external APIs (JavaScript/JSON convention)
3. Accept both formats during validation (thanks to `populate_by_name=True`)

## Workaround

Currently, users must manually convert camelCase to snake_case before passing input to LangGraph:

```python
# Manual conversion required
def camel_to_snake(data: dict) -> dict:
    # Convert all keys from camelCase to snake_case
    ...

graph.invoke(camel_to_snake(input_data))
```

This workaround defeats the purpose of Pydantic's `populate_by_name` feature.

## Impact

This issue affects any LangGraph application that:
- Receives input from external systems using different naming conventions (e.g., JavaScript/TypeScript frontends)
- Wants to use Pydantic's alias features for field name mapping
- Expects `populate_by_name=True` to work as documented

Thank you for your consideration!
","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6401/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6401/timeline,,duplicate,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6400,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6400/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6400/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6400/events,https://github.com/langchain-ai/langgraph/pull/6400,3593145052,PR_kwDOKFU0lc6xww7W,6400,fix(checkpoint-postgres): make async PG checkpoint migration idempotent,"{'login': 'jdrogers940', 'id': 16026633, 'node_id': 'MDQ6VXNlcjE2MDI2NjMz', 'avatar_url': 'https://avatars.githubusercontent.com/u/16026633?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jdrogers940', 'html_url': 'https://github.com/jdrogers940', 'followers_url': 'https://api.github.com/users/jdrogers940/followers', 'following_url': 'https://api.github.com/users/jdrogers940/following{/other_user}', 'gists_url': 'https://api.github.com/users/jdrogers940/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jdrogers940/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jdrogers940/subscriptions', 'organizations_url': 'https://api.github.com/users/jdrogers940/orgs', 'repos_url': 'https://api.github.com/users/jdrogers940/repos', 'events_url': 'https://api.github.com/users/jdrogers940/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jdrogers940/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-05T23:01:43Z,2025-11-06T14:49:53Z,2025-11-06T14:49:52Z,COLLABORATOR,,,,,"- **Description:** The final migration for the postgres checkpointer is not currently idempotent. That presents problems when migrating from one checkpointer to another or if migrations otherwise get applied twice. This makes the final migration idempotent to avoid this problem.
- **Issue:** N/A
- **Dependencies:** N/A
- **Twitter handle:** N/A
","{'login': 'jdrogers940', 'id': 16026633, 'node_id': 'MDQ6VXNlcjE2MDI2NjMz', 'avatar_url': 'https://avatars.githubusercontent.com/u/16026633?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/jdrogers940', 'html_url': 'https://github.com/jdrogers940', 'followers_url': 'https://api.github.com/users/jdrogers940/followers', 'following_url': 'https://api.github.com/users/jdrogers940/following{/other_user}', 'gists_url': 'https://api.github.com/users/jdrogers940/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/jdrogers940/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/jdrogers940/subscriptions', 'organizations_url': 'https://api.github.com/users/jdrogers940/orgs', 'repos_url': 'https://api.github.com/users/jdrogers940/repos', 'events_url': 'https://api.github.com/users/jdrogers940/events{/privacy}', 'received_events_url': 'https://api.github.com/users/jdrogers940/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6400/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6400/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6400', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6400', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6400.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6400.patch', 'merged_at': '2025-11-06T14:49:52Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6399,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6399/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6399/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6399/events,https://github.com/langchain-ai/langgraph/pull/6399,3591418010,PR_kwDOKFU0lc6xq9L6,6399,chore(docs): Update redirects for langgraph server to agent server rename,"{'login': 'katmayb', 'id': 44557882, 'node_id': 'MDQ6VXNlcjQ0NTU3ODgy', 'avatar_url': 'https://avatars.githubusercontent.com/u/44557882?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/katmayb', 'html_url': 'https://github.com/katmayb', 'followers_url': 'https://api.github.com/users/katmayb/followers', 'following_url': 'https://api.github.com/users/katmayb/following{/other_user}', 'gists_url': 'https://api.github.com/users/katmayb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/katmayb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/katmayb/subscriptions', 'organizations_url': 'https://api.github.com/users/katmayb/orgs', 'repos_url': 'https://api.github.com/users/katmayb/repos', 'events_url': 'https://api.github.com/users/katmayb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/katmayb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-05T14:42:20Z,2025-11-05T16:21:12Z,2025-11-05T16:21:10Z,CONTRIBUTOR,,,,,"Renaming LangGraph Server to Agent Server, this updates the redirects from the old site to the new site's renamed files.
PR also includes some hosting --> platform setup redirects","{'login': 'lnhsingh', 'id': 15386648, 'node_id': 'MDQ6VXNlcjE1Mzg2NjQ4', 'avatar_url': 'https://avatars.githubusercontent.com/u/15386648?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lnhsingh', 'html_url': 'https://github.com/lnhsingh', 'followers_url': 'https://api.github.com/users/lnhsingh/followers', 'following_url': 'https://api.github.com/users/lnhsingh/following{/other_user}', 'gists_url': 'https://api.github.com/users/lnhsingh/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lnhsingh/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lnhsingh/subscriptions', 'organizations_url': 'https://api.github.com/users/lnhsingh/orgs', 'repos_url': 'https://api.github.com/users/lnhsingh/repos', 'events_url': 'https://api.github.com/users/lnhsingh/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lnhsingh/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6399/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6399/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6399', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6399', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6399.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6399.patch', 'merged_at': '2025-11-05T16:21:10Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6397,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6397/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6397/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6397/events,https://github.com/langchain-ai/langgraph/issues/6397,3590280543,I_kwDOKFU0lc7V_1Vf,6397,Invoking a toolnode programmatically fails,"{'login': '13am', 'id': 11457975, 'node_id': 'MDQ6VXNlcjExNDU3OTc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/11457975?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/13am', 'html_url': 'https://github.com/13am', 'followers_url': 'https://api.github.com/users/13am/followers', 'following_url': 'https://api.github.com/users/13am/following{/other_user}', 'gists_url': 'https://api.github.com/users/13am/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/13am/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/13am/subscriptions', 'organizations_url': 'https://api.github.com/users/13am/orgs', 'repos_url': 'https://api.github.com/users/13am/repos', 'events_url': 'https://api.github.com/users/13am/events{/privacy}', 'received_events_url': 'https://api.github.com/users/13am/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,"{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,8,2025-11-05T10:16:17Z,2025-11-19T15:45:57Z,,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","https://github.com/langchain-ai/langgraph/blob/3c75e414e5d4472ba5e6c747675cc23804ab23e8/libs/langgraph/langgraph/_internal/_runnable.py#L369


The following unittest fails:

```
from langchain_core.tools import tool
from langgraph.prebuilt import ToolNode


def test_toolnode_works():
    @tool
    def get_instructions() -> str:
        """"""Get instructions.""""""
        return ""Instructions.""
    tool_node = ToolNode(tools=[get_instructions])
    tool_calls = [{'name': 'get_instructions', 'args': {}, 'id': 'call_35db3afc-3232-4278-b5c1-4fb54ae6cbe7', 'type': 'tool_call'}]
    tool_node.invoke(tool_calls)
```

with the following exception:

```

    def invoke(
        self, input: Any, config: RunnableConfig | None = None, **kwargs: Any
    ) -> Any:
        if self.func is None:
            raise TypeError(
                f'No synchronous function provided to ""{self.name}"".'
                ""\nEither initialize with a synchronous function or invoke""
                "" via the async API (ainvoke, astream, etc.)""
            )
        if config is None:
            config = ensure_config()
        if self.explode_args:
            args, _kwargs = input
            kwargs = {**self.kwargs, **_kwargs, **kwargs}
        else:
            args = (input,)
            kwargs = {**self.kwargs, **kwargs}
    
        runtime = config.get(CONF, {}).get(CONFIG_KEY_RUNTIME)
    
        for kw, (runtime_key, default) in self.func_accepts.items():
            # If the kwarg is already set, use the set value
            if kw in kwargs:
                continue
    
            kw_value: Any = MISSING
            if kw == ""config"":
                kw_value = config
            elif runtime:
                if kw == ""runtime"":
                    kw_value = runtime
                else:
                    try:
                        kw_value = getattr(runtime, runtime_key)
                    except AttributeError:
                        pass
    
            if kw_value is MISSING:
                if default is inspect.Parameter.empty:
>                   raise ValueError(
                        f""Missing required config key '{runtime_key}' for '{self.name}'.""
                    )
E                   ValueError: Missing required config key 'N/A' for 'tools'.
```


Version information:


```

[[package]]
name = ""langgraph""
version = ""1.0.2""
source = { registry = ""https://pypi.org/simple"" }
dependencies = [
    { name = ""langchain-core"" },
    { name = ""langgraph-checkpoint"" },
    { name = ""langgraph-prebuilt"" },
    { name = ""langgraph-sdk"" },
    { name = ""pydantic"" },
    { name = ""xxhash"" },
]
sdist = { url = ""https://files.pythonhosted.org/packages/0e/25/18e6e056ee1a8af64fcab441b4a3f2e158399935b08f148c7718fc42ecdb/langgraph-1.0.2.tar.gz"", hash = ""sha256:dae1af08d6025cb1fcaed68f502c01af7d634d9044787c853a46c791cfc52f67"", size = 482660 }
wheels = [
    { url = ""https://files.pythonhosted.org/packages/d7/b1/9f4912e13d4ed691f2685c8a4b764b5a9237a30cca0c5782bc213d9f0a9a/langgraph-1.0.2-py3-none-any.whl"", hash = ""sha256:b3d56b8c01de857b5fb1da107e8eab6e30512a377685eeedb4f76456724c9729"", size = 156751 },
]

```",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6397/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6397/timeline,,,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6396,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6396/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6396/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6396/events,https://github.com/langchain-ai/langgraph/issues/6396,3589345411,I_kwDOKFU0lc7V8RCD,6396,Token Usage Missing with AzureChatOpenAI when run through LangGraph Studio,"{'login': 'titlethanason', 'id': 29888508, 'node_id': 'MDQ6VXNlcjI5ODg4NTA4', 'avatar_url': 'https://avatars.githubusercontent.com/u/29888508?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/titlethanason', 'html_url': 'https://github.com/titlethanason', 'followers_url': 'https://api.github.com/users/titlethanason/followers', 'following_url': 'https://api.github.com/users/titlethanason/following{/other_user}', 'gists_url': 'https://api.github.com/users/titlethanason/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/titlethanason/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/titlethanason/subscriptions', 'organizations_url': 'https://api.github.com/users/titlethanason/orgs', 'repos_url': 'https://api.github.com/users/titlethanason/repos', 'events_url': 'https://api.github.com/users/titlethanason/events{/privacy}', 'received_events_url': 'https://api.github.com/users/titlethanason/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,1,2025-11-05T05:12:05Z,2025-11-07T19:59:57Z,2025-11-07T19:55:56Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [ ] I added a clear and detailed title that summarizes the issue.
- [ ] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [ ] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from langchain_openai import ChatOpenAI, AzureChatOpenAI
from langchain.agents.structured_output import ToolStrategy
from deepagents import create_deep_agent

model = ""gpt-5-mini""

llm = ChatOpenAI(
        model=model, 
        base_url=""https://openrouter.ai/api/v1"",
        openai_api_key=os.environ[""OPENAI_API_KEY""]
    )

llm = AzureChatOpenAI(
        azure_deployment=model,
        model=model,
        api_version=""2024-12-01-preview""
    )

coding_agent = create_deep_agent(
    model=llm,
    name=""coding_agent"",
    system_prompt=AGENT_PROMPT,
    response_format=ToolStrategy(Code),
    use_longterm_memory=True,
)
```

### Error Message and Stack Trace (if applicable)

```shell

```

### Description

When using AzureChatOpenAI inside a LangGraph workflow deployed via LangGraph Studio, token usage and cost data fail to appear in LangSmith traces.

The graph executes correctly, but token accounting data is missing â€” resulting in $0.00 cost reports.

Evidence

âœ… Works (token usage recorded):

Local execution â€” Running the same graph with graph.invoke() from a local Python script using AzureChatOpenAI.

Studio with standard model â€” Running the same workflow in LangGraph Studio, but switching from AzureChatOpenAI â†’ ChatOpenAI.

âŒ Fails (no token data):

LangGraph Studio + AzureChatOpenAI â€” Execution succeeds, but LangSmith trace shows empty token usage and $0.00 total cost.

### System Info

System Information
------------------
> OS:  Windows
> OS Version:  10.0.22631
> Python Version:  3.13.5 (tags/v3.13.5:6cb20a2, Jun 11 2025, 16:15:46) [MSC v.1943 64 bit (AMD64)]

Package Information
-------------------
> langchain_core: 1.0.0
> langchain: 1.0.2
> langsmith: 0.4.31
> langchain_anthropic: 1.0.0
> langchain_chroma: 0.2.6
> langchain_openai: 0.3.34
> langchain_text_splitters: 0.3.11
> langgraph_api: 0.4.46
> langgraph_cli: 0.4.4
> langgraph_runtime_inmem: 0.14.1
> langgraph_sdk: 0.2.9","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6396/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6396/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6395,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6395/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6395/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6395/events,https://github.com/langchain-ai/langgraph/pull/6395,3588221921,PR_kwDOKFU0lc6xgaT6,6395,chore: update ormsgpack minbound and add OPT_REPLACE_SURROGATES,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-04T21:38:19Z,2025-11-04T21:51:37Z,2025-11-04T21:51:35Z,CONTRIBUTOR,,,,,This lets the default `msgpack` serialization mode handle more cases where user data contains invalid unicode.,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6395/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6395/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6395', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6395', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6395.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6395.patch', 'merged_at': '2025-11-04T21:51:35Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6394,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6394/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6394/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6394/events,https://github.com/langchain-ai/langgraph/issues/6394,3588211195,I_kwDOKFU0lc7V38H7,6394,Langgraph streaming conflicts with additional callbacks,"{'login': 'yasonk', 'id': 6750414, 'node_id': 'MDQ6VXNlcjY3NTA0MTQ=', 'avatar_url': 'https://avatars.githubusercontent.com/u/6750414?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/yasonk', 'html_url': 'https://github.com/yasonk', 'followers_url': 'https://api.github.com/users/yasonk/followers', 'following_url': 'https://api.github.com/users/yasonk/following{/other_user}', 'gists_url': 'https://api.github.com/users/yasonk/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/yasonk/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/yasonk/subscriptions', 'organizations_url': 'https://api.github.com/users/yasonk/orgs', 'repos_url': 'https://api.github.com/users/yasonk/repos', 'events_url': 'https://api.github.com/users/yasonk/events{/privacy}', 'received_events_url': 'https://api.github.com/users/yasonk/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}]",closed,False,,[],,2,2025-11-04T21:33:06Z,2025-11-07T21:57:04Z,2025-11-07T21:57:04Z,CONTRIBUTOR,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

```python
from dataclasses import dataclass

from langchain.chat_models import init_chat_model
from langchain_core.callbacks import UsageMetadataCallbackHandler
from langgraph.constants import START
from langgraph.graph import StateGraph

model_1 = init_chat_model(model=""gpt-4o-mini"")  # must have API_KEY in env or pass it in here

@dataclass
class MyState:
    topic: str

callback = UsageMetadataCallbackHandler()

model_with_callback = model_1.with_config(
    callbacks=[callback]
)

def call_model(state: MyState):
    """"""Call the LLM to generate a joke about a topic""""""
    # Note that message events are emitted even when the LLM is run using .invoke rather than .stream
    model_response = model_with_callback.invoke(
        [
            {""role"": ""user"", ""content"": f""{state.topic}""}
        ]
    )
    return {""topic"": model_response.content}


graph = (
    StateGraph(MyState)
    .add_node(call_model)
    .add_edge(START, ""call_model"")
    .compile()
)

stream_gen = graph.stream(
    {""topic"": ""What is the capital of France?""},
    stream_mode=""messages"",
)
for message_chunk, metadata in stream_gen:
    if message_chunk.content:
        print(message_chunk.content, end=""|"", flush=True)
        print(callback.usage_metadata)
```

### Error Message and Stack Trace (if applicable)

```shell
""messages"" mode streaming does not work when passing other callbacks in.
```

### Description

I'm trying to stream model output, but also count usage tokens via callback. But all the documented ways that I found for adding callbacks to count token usage end up removing the `StreamMessagesHandler` callback resulting in no streaming.

This seems to be a pretty important use case -- you want to stream output, but also you want to charge customers for tokens used.

Need to be able to add callbacks without removing existing callbacks.

### System Info

System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:29 PDT 2025; root:xnu-11417.140.69~1/RELEASE_ARM64_T6000
> Python Version:  3.12.4 (main, Jul 29 2024, 13:31:11) [Clang 15.0.0 (clang-1500.3.9.4)]

Package Information
-------------------
> langchain_core: 1.0.2
> langchain: 1.0.3
> langsmith: 0.4.32
> langchain_mcp_adapters: 0.1.11
> langchain_openai: 1.0.1
> langchain_tavily: 0.2.12
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.12.15
> httpx: 0.28.1
> jsonpatch: 1.33
> langchain-anthropic: Installed. No version info available.
> langchain-aws: Installed. No version info available.
> langchain-community: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-huggingface: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langsmith-pyo3: Installed. No version info available.
> mcp: 1.11.0
> openai: 2.6.1
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.37.0
> opentelemetry-exporter-otlp-proto-http: 1.37.0
> opentelemetry-sdk: 1.37.0
> orjson: 3.11.3
> packaging: 24.2
> pydantic: 2.11.3
> pytest: 8.4.2
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: Installed. No version info available.
> tenacity: 9.1.2
> tiktoken: 0.11.0
> typing-extensions: 4.15.0
> vcrpy: Installed. No version info available.
> zstandard: 0.25.0
","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6394/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6394/timeline,,completed,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6393,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6393/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6393/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6393/events,https://github.com/langchain-ai/langgraph/issues/6393,3585342922,I_kwDOKFU0lc7Vs_3K,6393,Read checkpoint_pending_writes (in class PregelLoop) from Redis(use langgraph-checkpoint-redis),"{'login': 'galain1994', 'id': 10805116, 'node_id': 'MDQ6VXNlcjEwODA1MTE2', 'avatar_url': 'https://avatars.githubusercontent.com/u/10805116?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/galain1994', 'html_url': 'https://github.com/galain1994', 'followers_url': 'https://api.github.com/users/galain1994/followers', 'following_url': 'https://api.github.com/users/galain1994/following{/other_user}', 'gists_url': 'https://api.github.com/users/galain1994/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/galain1994/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/galain1994/subscriptions', 'organizations_url': 'https://api.github.com/users/galain1994/orgs', 'repos_url': 'https://api.github.com/users/galain1994/repos', 'events_url': 'https://api.github.com/users/galain1994/events{/privacy}', 'received_events_url': 'https://api.github.com/users/galain1994/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'id': 5828292607, 'node_id': 'LA_kwDOKFU0lc8AAAABW2Sv_w', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/bug', 'name': 'bug', 'color': 'd73a4a', 'default': True, 'description': ""Something isn't working""}, {'id': 8766527708, 'node_id': 'LA_kwDOKFU0lc8AAAACCoaY3A', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/pending', 'name': 'pending', 'color': 'd51c9a', 'default': False, 'description': 'awaiting review/confirmation by maintainer'}, {'id': 9604400275, 'node_id': 'LA_kwDOKFU0lc8AAAACPHeEkw', 'url': 'https://api.github.com/repos/langchain-ai/langgraph/labels/not%20maintained%20by%20langchain', 'name': 'not maintained by langchain', 'color': 'aaaaaa', 'default': False, 'description': None}]",closed,False,"{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","[{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}]",,1,2025-11-04T08:36:17Z,2025-11-07T21:14:37Z,2025-11-07T21:14:37Z,NONE,,,"{'total': 0, 'completed': 0, 'percent_completed': 0}","{'blocked_by': 0, 'total_blocked_by': 0, 'blocking': 0, 'total_blocking': 0}","### Checked other resources

- [x] This is a bug, not a usage question. For questions, please use the LangChain Forum (https://forum.langchain.com/).
- [x] I added a clear and detailed title that summarizes the issue.
- [x] I read what a minimal reproducible example is (https://stackoverflow.com/help/minimal-reproducible-example).
- [x] I included a self-contained, minimal example that demonstrates the issue INCLUDING all the relevant imports. The code run AS IS to reproduce the issue.

### Example Code

human-in-the-loop node
```python
from langgraph.types import interrupt


async def human_selection_node(state: State, runtime: Runtime[ContextSchema]) -> Dict:

    interrupt_message = ""Please input your choice""

    user_selection = interrupt(
        interrupt_message
    )
    print(f""user_selection: {user_selection}"")

    return {
        ""user_selection"": user_selection
    }


```

Agent using redis as checkpointer:
```python

from langgraph.checkpoint.redis.ashallow import AsyncShallowRedisSaver

async with AsyncShallowRedisSaver(REDIS_URL) as checkpointer:
    await checkpointer.asetup()
    agent = compiled_graph.compile(
        checkpointer=checkpointer,
    )

```

### Error Message and Stack Trace (if applicable)

```shell
16:24:24 src.handler ERROR   Traceback (most recent call last):
  File ""/Users/user/work/code/agent/src/handler.py"", line 69, in gen_astream_response
    msg_mode, output = await asyncio.wait_for(stream_generator.__anext__(), timeout=timeout)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py"", line 507, in wait_for
    return await fut
           ^^^^^^^^^
  File ""/Users/user/work/code/agent/.venv/lib/python3.13/site-packages/langgraph/pregel/main.py"", line 2917, in astream
    async with AsyncPregelLoop(
               ~~~~~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<17 lines>...
        cache_policy=self.cache_policy,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as loop:
    ^
  File ""/Users/user/work/code/agent/.venv/lib/python3.13/site-packages/langgraph/pregel/_loop.py"", line 1299, in __aenter__
        input_keys=self.input_keys,
                            ^^^^^^^
    ...<4 lines>...
    
    
  File ""/Users/user/work/code/agent/.venv/lib/python3.13/site-packages/langgraph/pregel/_loop.py"", line 656, in _first
    raise RuntimeError(
       ^^^^^^^^^^^^^^^^
  File ""/Users/user/work/code/agent/.venv/lib/python3.13/site-packages/langgraph/pregel/_loop.py"", line 603, in _pending_interrupts
    elif write_type == RESUME:
    
AttributeError: 'dict' object has no attribute 'id'
```

### Description

current langgraph version is 1.0.2, the interrupt works in version 0.5.4.
In version 1.0.2, in file langgraph/pregel/_loop.py:603,
task_id is get from attribute:
`pending_interrupts[task_id] = value[0].id`
And in version 0.5.4, the ""id"" in get from dictionary, which is compatible the data stored in redis.

langgraph-checkpoint-redis version is 0.1.2, the intterupt checkpoint data store in redis: 
`{
  ""thread_id"": ""3fa85f64-5717-4562-b3fc-2c963f66afb3"",
  ""checkpoint_ns"": """",
  ""checkpoint_id"": ""1f0b9579-a113-633c-8025-bc2dbb26ef87"",
  ""task_id"": ""29cc4ae0-2b5f-c415-e3bb-3ca250d6afb6"",
  ""task_path"": ""~__pregel_pull, HUMAN_SELECTION_NODE"",
  ""idx"": -3,
  ""channel"": ""__interrupt__"",
  ""type"": ""json"",
  ""blob"": ""[{""value"": [{""sequence_selection"": {""type"": ""string"", ""title"": ""Select download sequence"", ""description"": ""Select download sequence"", ""format"": ""radio"", ""required"": true, ""default"": null, ""enum"": [{""schema"": ""esummary.gene"", ""ncbi_id"": ""7157"", ""Id"": ""7157"", ""Name"": ""TP53"", ""Description"": ""tumor protein p53"", ""Summary"": ""This gene encodes a tumor suppressor protein containing transcriptional activation, DNA binding, and oligomerization domains. The encoded protein responds to diverse cellular stresses to regulate expression of target genes, thereby inducing cell cycle arrest, apoptosis, senescence, DNA repair, or changes in metabolism. Mutations in this gene are associated with a variety of human cancers, including hereditary cancers such as Li-Fraumeni syndrome. Alternative splicing of this gene and the use of alternate promoters result in multiple transcript variants and isoforms. Additional isoforms have also been shown to result from the use of alternate translation initiation codons from identical transcript variants (PMIDs: 12032546, 20937277). [provided by RefSeq, Dec 2016]"", ""OtherAliases"": ""BCC7, BMFS5, LFS1, P53, TRP53"", ""OrganismScientificName"": ""Homo sapiens"", ""OrganismTaxID"": ""9606"", ""ChrAccVer"": ""NC_000017.11"", ""ChrStart"": ""7687489"", ""ChrStop"": ""7668420"", ""NomenclatureSymbol"": ""TP53"", ""NomenclatureName"": ""tumor protein p53"", ""download_type"": ""ncbi""}], ""enumLabels"": [""Unknown label""], ""items"": {""type"": ""string""}}}], ""id"": ""b30bee2c3a26d9b44523f0434a29e49f""}]""
}`


### System Info


System Information
------------------
> OS:  Darwin
> OS Version:  Darwin Kernel Version 25.0.0: Wed Sep 17 21:41:45 PDT 2025; root:xnu-12377.1.9~141/RELEASE_ARM64_T6000
> Python Version:  3.13.5 (main, Jun 11 2025, 15:36:57) [Clang 17.0.0 (clang-1700.0.13.3)]

Package Information
-------------------
> langchain_core: 1.0.3
> langchain_community: 0.4.1
> langsmith: 0.4.40
> langchain_classic: 1.0.0
> langchain_openai: 1.0.2
> langchain_text_splitters: 1.0.0
> langgraph_api: 0.4.48
> langgraph_runtime_inmem: 0.14.1
> langgraph_sdk: 0.2.9

Optional packages not installed
-------------------------------
> langserve

Other Dependencies
------------------
> aiohttp: 3.13.2
> async-timeout: Installed. No version info available.
> blockbuster: 1.5.25
> claude-agent-sdk: Installed. No version info available.
> cloudpickle: 3.1.2
> cryptography: 44.0.3
> dataclasses-json: 0.6.7
> grpcio: 1.76.0
> grpcio-tools: 1.75.1
> httpx: 0.28.1
> httpx-sse: 0.4.3
> jsonpatch: 1.33
> jsonschema-rs: 0.29.1
> langchain-anthropic: Installed. No version info available.
> langchain-aws: Installed. No version info available.
> langchain-deepseek: Installed. No version info available.
> langchain-fireworks: Installed. No version info available.
> langchain-google-genai: Installed. No version info available.
> langchain-google-vertexai: Installed. No version info available.
> langchain-groq: Installed. No version info available.
> langchain-mistralai: Installed. No version info available.
> langchain-ollama: Installed. No version info available.
> langchain-perplexity: Installed. No version info available.
> langchain-together: Installed. No version info available.
> langchain-xai: Installed. No version info available.
> langgraph: 1.0.2
> langgraph-checkpoint: 2.1.2
> langsmith-pyo3: Installed. No version info available.
> numpy: 2.3.4
> openai: 2.7.0
> openai-agents: Installed. No version info available.
> opentelemetry-api: 1.38.0
> opentelemetry-exporter-otlp-proto-http: 1.38.0
> opentelemetry-sdk: 1.38.0
> orjson: 3.11.4
> packaging: 25.0
> protobuf: 6.33.0
> pydantic: 2.12.3
> pydantic-settings: 2.11.0
> pyjwt: 2.10.1
> pytest: 8.4.2
> PyYAML: 6.0.3
> pyyaml: 6.0.3
> requests: 2.32.5
> requests-toolbelt: 1.0.0
> rich: 14.2.0
> SQLAlchemy: 2.0.44
> sqlalchemy: 2.0.44
> sse-starlette: 2.1.3
> starlette: 0.49.3
> structlog: 25.5.0
> tenacity: 9.1.2
> tiktoken: 0.12.0
> truststore: 0.10.4
> typing-extensions: 4.15.0
> uvicorn: 0.38.0
> vcrpy: Installed. No version info available.
> watchfiles: 1.1.1
> zstandard: 0.25.0","{'login': 'eyurtsev', 'id': 3205522, 'node_id': 'MDQ6VXNlcjMyMDU1MjI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/3205522?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/eyurtsev', 'html_url': 'https://github.com/eyurtsev', 'followers_url': 'https://api.github.com/users/eyurtsev/followers', 'following_url': 'https://api.github.com/users/eyurtsev/following{/other_user}', 'gists_url': 'https://api.github.com/users/eyurtsev/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/eyurtsev/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/eyurtsev/subscriptions', 'organizations_url': 'https://api.github.com/users/eyurtsev/orgs', 'repos_url': 'https://api.github.com/users/eyurtsev/repos', 'events_url': 'https://api.github.com/users/eyurtsev/events{/privacy}', 'received_events_url': 'https://api.github.com/users/eyurtsev/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6393/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6393/timeline,,not_planned,,
https://api.github.com/repos/langchain-ai/langgraph/issues/6392,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6392/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6392/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6392/events,https://github.com/langchain-ai/langgraph/pull/6392,3584773405,PR_kwDOKFU0lc6xU9sh,6392,docs: add license files for checkpoint-sqlite and checkpoint-postgres,"{'login': 'inhun', 'id': 39795046, 'node_id': 'MDQ6VXNlcjM5Nzk1MDQ2', 'avatar_url': 'https://avatars.githubusercontent.com/u/39795046?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/inhun', 'html_url': 'https://github.com/inhun', 'followers_url': 'https://api.github.com/users/inhun/followers', 'following_url': 'https://api.github.com/users/inhun/following{/other_user}', 'gists_url': 'https://api.github.com/users/inhun/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/inhun/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/inhun/subscriptions', 'organizations_url': 'https://api.github.com/users/inhun/orgs', 'repos_url': 'https://api.github.com/users/inhun/repos', 'events_url': 'https://api.github.com/users/inhun/events{/privacy}', 'received_events_url': 'https://api.github.com/users/inhun/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-04T05:18:08Z,2025-11-07T12:39:07Z,2025-11-07T12:39:07Z,CONTRIBUTOR,,,,,"In this PR:

- Add missing LICENSE files for checkpoint-sqlite and checkpoint-postgres libraries.

Both libraries specify the MIT License in their pyproject.toml files, but the actual LICENSE files were missing.
This update adds the corresponding LICENSE files to ensure proper license documentation and compliance.","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6392/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6392/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6392', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6392', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6392.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6392.patch', 'merged_at': '2025-11-07T12:39:07Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6391,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6391/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6391/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6391/events,https://github.com/langchain-ai/langgraph/pull/6391,3584281691,PR_kwDOKFU0lc6xTaRs,6391,fix(langgraph): add_edge() now accepts node objects like add_node(),"{'login': 'zhangzhefang-github', 'id': 34058239, 'node_id': 'MDQ6VXNlcjM0MDU4MjM5', 'avatar_url': 'https://avatars.githubusercontent.com/u/34058239?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/zhangzhefang-github', 'html_url': 'https://github.com/zhangzhefang-github', 'followers_url': 'https://api.github.com/users/zhangzhefang-github/followers', 'following_url': 'https://api.github.com/users/zhangzhefang-github/following{/other_user}', 'gists_url': 'https://api.github.com/users/zhangzhefang-github/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/zhangzhefang-github/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/zhangzhefang-github/subscriptions', 'organizations_url': 'https://api.github.com/users/zhangzhefang-github/orgs', 'repos_url': 'https://api.github.com/users/zhangzhefang-github/repos', 'events_url': 'https://api.github.com/users/zhangzhefang-github/events{/privacy}', 'received_events_url': 'https://api.github.com/users/zhangzhefang-github/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],open,False,,[],,2,2025-11-04T00:55:31Z,2025-11-10T17:46:27Z,,NONE,,,,,"**Description:** 

This PR resolves the inconsistency between `add_node()` and `add_edge()` by allowing `add_edge()` to accept node objects (functions, Runnables) in addition to strings.

Previously, `add_node()` accepted both strings and objects, but `add_edge()` only accepted strings. This forced users to manually convert node objects:

```python
# Before:
builder.add_node(my_function)
builder.add_edge(my_function.__name__, other_function.__name__)  # âŒ Manual

# After:
builder.add_node(my_function)
builder.add_edge(my_function, other_function)  # âœ… Direct
Changes:
Added _get_node_key() helper function to convert node objects to string keys
Updated add_edge() type signature to accept str | list[str] | Any | list[Any]
Fully backward compatible - all existing string usage unchanged
Added comprehensive test coverage with 5 scenarios
Testing:
âœ… All existing tests pass (19/19)
âœ… New test test_add_edge_with_objects covers all usage patterns
âœ… make format passing
âœ… make lint passing
âœ… make test passing (for test_state.py)

Issue: Closes #6376 Dependencies: None ",,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6391/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6391/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6391', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6391', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6391.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6391.patch', 'merged_at': None}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6390,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6390/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6390/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6390/events,https://github.com/langchain-ai/langgraph/pull/6390,3584132808,PR_kwDOKFU0lc6xS7pU,6390,release(cli): 0.4.7 expand  api bounds,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-03T23:39:29Z,2025-11-03T23:47:07Z,2025-11-03T23:47:06Z,CONTRIBUTOR,,,,,Fixes #6380,"{'login': 'hinthornw', 'id': 13333726, 'node_id': 'MDQ6VXNlcjEzMzMzNzI2', 'avatar_url': 'https://avatars.githubusercontent.com/u/13333726?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/hinthornw', 'html_url': 'https://github.com/hinthornw', 'followers_url': 'https://api.github.com/users/hinthornw/followers', 'following_url': 'https://api.github.com/users/hinthornw/following{/other_user}', 'gists_url': 'https://api.github.com/users/hinthornw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/hinthornw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/hinthornw/subscriptions', 'organizations_url': 'https://api.github.com/users/hinthornw/orgs', 'repos_url': 'https://api.github.com/users/hinthornw/repos', 'events_url': 'https://api.github.com/users/hinthornw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/hinthornw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6390/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6390/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6390', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6390', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6390.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6390.patch', 'merged_at': '2025-11-03T23:47:06Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6389,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6389/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6389/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6389/events,https://github.com/langchain-ai/langgraph/pull/6389,3584112269,PR_kwDOKFU0lc6xS3i0,6389,fix(langgraph): do not apply pending writes when updating state,"{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-03T23:31:31Z,2025-11-04T22:38:43Z,2025-11-04T22:38:41Z,COLLABORATOR,,,,,"PR #6195 fixed `bulk_update_state` to populate `task.result` by calling `prepare_next_tasks` to discover task IDs. Before #6195, prepare_next_tasks was gated by the condition `CONFIG_KEY_CHECKPOINT_ID not in config[CONF]` - so it only ran if we were resuming from an empty checkpoint. This check was removed in order to properly populate task results. However, the removal of this check inadvertently applied pending writes during manual state updates which caused issues when forking:

  - When you fork from a checkpoint by calling `update_state(config, new_values, as_node=""mynode"")`, pending writes from the original execution were being applied
  - This caused stale data to leak into forked threads (eg. old tool call results appearing in forked execution)

Changes

  Removed pending writes application from `bulk_update_state` and `abulk_update_state`:
  - Still call `prepare_next_tasks` to discover task IDs, but skip the code that applies null writes and regular pending writes

Tests

  - Added `test_fork_does_not_apply_pending_writes` for sync and async which verifies forking doesn't include stale pending writes from original execution","{'login': 'casparb', 'id': 25157475, 'node_id': 'MDQ6VXNlcjI1MTU3NDc1', 'avatar_url': 'https://avatars.githubusercontent.com/u/25157475?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/casparb', 'html_url': 'https://github.com/casparb', 'followers_url': 'https://api.github.com/users/casparb/followers', 'following_url': 'https://api.github.com/users/casparb/following{/other_user}', 'gists_url': 'https://api.github.com/users/casparb/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/casparb/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/casparb/subscriptions', 'organizations_url': 'https://api.github.com/users/casparb/orgs', 'repos_url': 'https://api.github.com/users/casparb/repos', 'events_url': 'https://api.github.com/users/casparb/events{/privacy}', 'received_events_url': 'https://api.github.com/users/casparb/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6389/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6389/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6389', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6389', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6389.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6389.patch', 'merged_at': '2025-11-04T22:38:41Z'}"
https://api.github.com/repos/langchain-ai/langgraph/issues/6388,https://api.github.com/repos/langchain-ai/langgraph,https://api.github.com/repos/langchain-ai/langgraph/issues/6388/labels{/name},https://api.github.com/repos/langchain-ai/langgraph/issues/6388/comments,https://api.github.com/repos/langchain-ai/langgraph/issues/6388/events,https://github.com/langchain-ai/langgraph/pull/6388,3583974891,PR_kwDOKFU0lc6xSaF_,6388,fix(sdk-py): use correct f-string representation when loading error,"{'login': 'Kavya-24', 'id': 54931749, 'node_id': 'MDQ6VXNlcjU0OTMxNzQ5', 'avatar_url': 'https://avatars.githubusercontent.com/u/54931749?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Kavya-24', 'html_url': 'https://github.com/Kavya-24', 'followers_url': 'https://api.github.com/users/Kavya-24/followers', 'following_url': 'https://api.github.com/users/Kavya-24/following{/other_user}', 'gists_url': 'https://api.github.com/users/Kavya-24/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Kavya-24/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Kavya-24/subscriptions', 'organizations_url': 'https://api.github.com/users/Kavya-24/orgs', 'repos_url': 'https://api.github.com/users/Kavya-24/repos', 'events_url': 'https://api.github.com/users/Kavya-24/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Kavya-24/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}",[],closed,False,,[],,1,2025-11-03T22:27:06Z,2025-11-07T12:51:36Z,2025-11-07T12:51:36Z,CONTRIBUTOR,,,,,"Thank you for contributing to LangGraph! Follow these steps to mark your pull request as ready for review. **If any of these steps are not completed, your PR will not be considered for review.**


## Description
- Fixed a bug in `libs/sdk-py/langgraph_sdk/auth/__init__.py` where the error message for an already-set authentication handler did not properly render the handler value.
- Updated the error string from a static `{self._authenticate_handler}` to a correctly interpolated f-string.

```python
""Authentication handler already set as {self._authenticate_handler}.""
```

```python
f""Authentication handler already set as {self._authenticate_handler}.""
```

- Error messages now correctly display the actual handler instance, improving debugging clarity.



  - **Issue:** Fixes https://github.com/langchain-ai/langgraph/issues/6387
  - **Dependencies:** -
  - **Twitter handle:** -

- [x] **Add tests and docs**: If you're adding a new integration, you must include:
  1. A test for the integration, preferably unit tests that do not rely on network access,
  2. An example notebook showing its use. It lives in `docs/docs/integrations` directory.

- [ ] **Lint and test**: Run `make format`, `make lint` and `make test` from the root of the package(s) you've modified. We will not consider a PR unless these three are passing in CI. See [contribution guidelines](https://github.com/langchain-ai/langgraph/blob/main/CONTRIBUTING.md) for more.

Additional guidelines:

- Make sure optional dependencies are imported within a function.
- Please do not add dependencies to `pyproject.toml` files (even optional ones) unless they are **required** for unit tests.
- Most PRs should not touch more than one package.
- Changes should be backwards compatible.
","{'login': 'sydney-runkle', 'id': 54324534, 'node_id': 'MDQ6VXNlcjU0MzI0NTM0', 'avatar_url': 'https://avatars.githubusercontent.com/u/54324534?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/sydney-runkle', 'html_url': 'https://github.com/sydney-runkle', 'followers_url': 'https://api.github.com/users/sydney-runkle/followers', 'following_url': 'https://api.github.com/users/sydney-runkle/following{/other_user}', 'gists_url': 'https://api.github.com/users/sydney-runkle/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/sydney-runkle/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/sydney-runkle/subscriptions', 'organizations_url': 'https://api.github.com/users/sydney-runkle/orgs', 'repos_url': 'https://api.github.com/users/sydney-runkle/repos', 'events_url': 'https://api.github.com/users/sydney-runkle/events{/privacy}', 'received_events_url': 'https://api.github.com/users/sydney-runkle/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}","{'url': 'https://api.github.com/repos/langchain-ai/langgraph/issues/6388/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}",https://api.github.com/repos/langchain-ai/langgraph/issues/6388/timeline,,,False,"{'url': 'https://api.github.com/repos/langchain-ai/langgraph/pulls/6388', 'html_url': 'https://github.com/langchain-ai/langgraph/pull/6388', 'diff_url': 'https://github.com/langchain-ai/langgraph/pull/6388.diff', 'patch_url': 'https://github.com/langchain-ai/langgraph/pull/6388.patch', 'merged_at': '2025-11-07T12:51:36Z'}"
